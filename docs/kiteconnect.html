<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>kiteconnect API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#license">License</a></li>
  <li><a href="#the-library">The library</a></li>
  <li><a href="#getting-started">Getting started</a></li>
  <li><a href="#a-typical-web-application">A typical web application</a></li>
  <li><a href="#exceptions">Exceptions</a></li>
</ul>


            <h2>Submodules</h2>
            <ul>
                    <li><a href="kiteconnect/exceptions.html">exceptions</a></li>
            </ul>

            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#KiteConnect">KiteConnect</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#KiteConnect.__init__">KiteConnect</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.kite_header_version">kite_header_version</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.PRODUCT_MIS">PRODUCT_MIS</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.PRODUCT_CNC">PRODUCT_CNC</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.PRODUCT_NRML">PRODUCT_NRML</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.PRODUCT_CO">PRODUCT_CO</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.ORDER_TYPE_MARKET">ORDER_TYPE_MARKET</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.ORDER_TYPE_LIMIT">ORDER_TYPE_LIMIT</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.ORDER_TYPE_SLM">ORDER_TYPE_SLM</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.ORDER_TYPE_SL">ORDER_TYPE_SL</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VARIETY_REGULAR">VARIETY_REGULAR</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VARIETY_CO">VARIETY_CO</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VARIETY_AMO">VARIETY_AMO</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VARIETY_ICEBERG">VARIETY_ICEBERG</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VARIETY_AUCTION">VARIETY_AUCTION</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.TRANSACTION_TYPE_BUY">TRANSACTION_TYPE_BUY</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.TRANSACTION_TYPE_SELL">TRANSACTION_TYPE_SELL</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VALIDITY_DAY">VALIDITY_DAY</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VALIDITY_IOC">VALIDITY_IOC</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.VALIDITY_TTL">VALIDITY_TTL</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.POSITION_TYPE_DAY">POSITION_TYPE_DAY</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.POSITION_TYPE_OVERNIGHT">POSITION_TYPE_OVERNIGHT</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.EXCHANGE_NSE">EXCHANGE_NSE</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.EXCHANGE_BSE">EXCHANGE_BSE</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.EXCHANGE_NFO">EXCHANGE_NFO</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.EXCHANGE_CDS">EXCHANGE_CDS</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.EXCHANGE_BFO">EXCHANGE_BFO</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.EXCHANGE_MCX">EXCHANGE_MCX</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.EXCHANGE_BCD">EXCHANGE_BCD</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.MARGIN_EQUITY">MARGIN_EQUITY</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.MARGIN_COMMODITY">MARGIN_COMMODITY</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.STATUS_COMPLETE">STATUS_COMPLETE</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.STATUS_REJECTED">STATUS_REJECTED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.STATUS_CANCELLED">STATUS_CANCELLED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_TYPE_OCO">GTT_TYPE_OCO</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_TYPE_SINGLE">GTT_TYPE_SINGLE</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_STATUS_ACTIVE">GTT_STATUS_ACTIVE</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_STATUS_TRIGGERED">GTT_STATUS_TRIGGERED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_STATUS_DISABLED">GTT_STATUS_DISABLED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_STATUS_EXPIRED">GTT_STATUS_EXPIRED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_STATUS_CANCELLED">GTT_STATUS_CANCELLED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_STATUS_REJECTED">GTT_STATUS_REJECTED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.GTT_STATUS_DELETED">GTT_STATUS_DELETED</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.debug">debug</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.api_key">api_key</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.session_expiry_hook">session_expiry_hook</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.disable_ssl">disable_ssl</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.access_token">access_token</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.proxies">proxies</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.timeout">timeout</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteConnect.reqsession">reqsession</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.set_session_expiry_hook">set_session_expiry_hook</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.set_access_token">set_access_token</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.login_url">login_url</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.generate_session">generate_session</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.invalidate_access_token">invalidate_access_token</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.renew_access_token">renew_access_token</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.invalidate_refresh_token">invalidate_refresh_token</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.margins">margins</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.profile">profile</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.place_order">place_order</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.modify_order">modify_order</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.cancel_order">cancel_order</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.exit_order">exit_order</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.orders">orders</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.order_history">order_history</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.trades">trades</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.order_trades">order_trades</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.positions">positions</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.holdings">holdings</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.get_auction_instruments">get_auction_instruments</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.convert_position">convert_position</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.mf_orders">mf_orders</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.place_mf_order">place_mf_order</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.cancel_mf_order">cancel_mf_order</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.mf_sips">mf_sips</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.place_mf_sip">place_mf_sip</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.modify_mf_sip">modify_mf_sip</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.cancel_mf_sip">cancel_mf_sip</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.mf_holdings">mf_holdings</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.mf_instruments">mf_instruments</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.instruments">instruments</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.quote">quote</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.ohlc">ohlc</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.ltp">ltp</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.historical_data">historical_data</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.trigger_range">trigger_range</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.get_gtts">get_gtts</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.get_gtt">get_gtt</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.place_gtt">place_gtt</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.modify_gtt">modify_gtt</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.delete_gtt">delete_gtt</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.order_margins">order_margins</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.basket_order_margins">basket_order_margins</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteConnect.get_virtual_contract_note">get_virtual_contract_note</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#KiteTicker">KiteTicker</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#KiteTicker.__init__">KiteTicker</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.EXCHANGE_MAP">EXCHANGE_MAP</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.CONNECT_TIMEOUT">CONNECT_TIMEOUT</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.RECONNECT_MAX_DELAY">RECONNECT_MAX_DELAY</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.RECONNECT_MAX_TRIES">RECONNECT_MAX_TRIES</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.ROOT_URI">ROOT_URI</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.MODE_FULL">MODE_FULL</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.MODE_QUOTE">MODE_QUOTE</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.MODE_LTP">MODE_LTP</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.connect_timeout">connect_timeout</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.socket_url">socket_url</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.debug">debug</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.ws">ws</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_ticks">on_ticks</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_open">on_open</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_close">on_close</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_error">on_error</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_connect">on_connect</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_message">on_message</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_reconnect">on_reconnect</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_noreconnect">on_noreconnect</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.on_order_update">on_order_update</a>
                        </li>
                        <li>
                                <a class="variable" href="#KiteTicker.subscribed_tokens">subscribed_tokens</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.connect">connect</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.is_connected">is_connected</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.stop">stop</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.stop_retry">stop_retry</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.subscribe">subscribe</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.unsubscribe">unsubscribe</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.set_mode">set_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#KiteTicker.resubscribe">resubscribe</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
kiteconnect    </h1>

                        <div class="docstring"><p>Kite Connect API client for Python -- <a href="https://kite.trade">kite.trade</a>.</p>

<p>Zerodha Technology Pvt. Ltd. (c) 2021</p>

<h2 id="license">License</h2>

<p>KiteConnect Python library is licensed under the MIT License</p>

<h2 id="the-library">The library</h2>

<p>Kite Connect is a set of REST-like APIs that expose
many capabilities required to build a complete
investment and trading platform. Execute orders in
real time, manage user portfolio, stream live market
data (WebSockets), and more, with the simple HTTP API collection</p>

<p>This module provides an easy to use abstraction over the HTTP APIs.
The HTTP calls have been converted to methods and their JSON responses
are returned as native Python structures, for example, dicts, lists, bools etc.
See the <strong><a href="https://kite.trade/docs/connect/v3/">Kite Connect API documentation</a></strong>
for the complete list of APIs, supported parameters and values, and response formats.</p>

<h2 id="getting-started">Getting started</h2>

<pre><code>#!python
import logging
from kiteconnect import KiteConnect

logging.basicConfig(level=logging.DEBUG)

kite = KiteConnect(api_key="your_api_key")

# Redirect the user to the login url obtained
# from kite.login_url(), and receive the request_token
# from the registered redirect url after the login flow.
# Once you have the request_token, obtain the access_token
# as follows.

data = kite.generate_session("request_token_here", api_secret="your_secret")
kite.set_access_token(data["access_token"])

# Place an order
try:
    order_id = kite.place_order(variety=kite.VARIETY_REGULAR,
                                tradingsymbol="INFY",
                                exchange=kite.EXCHANGE_NSE,
                                transaction_type=kite.TRANSACTION_TYPE_BUY,
                                quantity=1,
                                order_type=kite.ORDER_TYPE_MARKET,
                                product=kite.PRODUCT_CNC,
                                validity=kite.VALIDITY_DAY)

    logging.info("Order placed. ID is: {}".format(order_id))
except Exception as e:
    logging.info("Order placement failed: {}".format(e.message))

# Fetch all orders
kite.orders()

# Get instruments
kite.instruments()

# Place an mutual fund order
kite.place_mf_order(
    tradingsymbol="INF090I01239",
    transaction_type=kite.TRANSACTION_TYPE_BUY,
    amount=5000,
    tag="mytag"
)

# Cancel a mutual fund order
kite.cancel_mf_order(order_id="order_id")

# Get mutual fund instruments
kite.mf_instruments()
</code></pre>

<h2 id="a-typical-web-application">A typical web application</h2>

<p>In a typical web application where a new instance of
views, controllers etc. are created per incoming HTTP
request, you will need to initialise a new instance of
Kite client per request as well. This is because each
individual instance represents a single user that's
authenticated, unlike an <strong>admin</strong> API where you may
use one instance to manage many users.</p>

<p>Hence, in your web application, typically:</p>

<ul>
<li>You will initialise an instance of the Kite client</li>
<li>Redirect the user to the <code>login_url()</code></li>
<li>At the redirect url endpoint, obtain the
<code>request_token</code> from the query parameters</li>
<li>Initialise a new instance of Kite client,
use <code>generate_session()</code> to obtain the <code>access_token</code>
along with authenticated user data</li>
<li>Store this response in a session and use the
stored <code>access_token</code> and initialise instances
of Kite client for subsequent API calls.</li>
</ul>

<h2 id="exceptions">Exceptions</h2>

<p>Kite Connect client saves you the hassle of detecting API errors
by looking at HTTP codes or JSON error responses. Instead,
it raises aptly named <strong><a href="exceptions.m.html">exceptions</a></strong> that you can catch.</p>
</div>

                        <input id="mod-kiteconnect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-kiteconnect-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># -*- coding: utf-8 -*-</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">Kite Connect API client for Python -- [kite.trade](https://kite.trade).</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">Zerodha Technology Pvt. Ltd. (c) 2021</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">License</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">-------</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">KiteConnect Python library is licensed under the MIT License</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">The library</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">-----------</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">Kite Connect is a set of REST-like APIs that expose</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">many capabilities required to build a complete</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">investment and trading platform. Execute orders in</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">real time, manage user portfolio, stream live market</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">data (WebSockets), and more, with the simple HTTP API collection</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">This module provides an easy to use abstraction over the HTTP APIs.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">The HTTP calls have been converted to methods and their JSON responses</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">are returned as native Python structures, for example, dicts, lists, bools etc.</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">See the **[Kite Connect API documentation](https://kite.trade/docs/connect/v3/)**</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">for the complete list of APIs, supported parameters and values, and response formats.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">Getting started</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">---------------</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">    #!python</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">    import logging</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">    from kiteconnect import KiteConnect</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">    logging.basicConfig(level=logging.DEBUG)</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">    kite = KiteConnect(api_key=&quot;your_api_key&quot;)</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    # Redirect the user to the login url obtained</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">    # from kite.login_url(), and receive the request_token</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">    # from the registered redirect url after the login flow.</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">    # Once you have the request_token, obtain the access_token</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">    # as follows.</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">    data = kite.generate_session(&quot;request_token_here&quot;, api_secret=&quot;your_secret&quot;)</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">    kite.set_access_token(data[&quot;access_token&quot;])</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">    # Place an order</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">    try:</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">        order_id = kite.place_order(variety=kite.VARIETY_REGULAR,</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">                                    tradingsymbol=&quot;INFY&quot;,</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">                                    exchange=kite.EXCHANGE_NSE,</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">                                    transaction_type=kite.TRANSACTION_TYPE_BUY,</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">                                    quantity=1,</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">                                    order_type=kite.ORDER_TYPE_MARKET,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">                                    product=kite.PRODUCT_CNC,</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">                                    validity=kite.VALIDITY_DAY)</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">        logging.info(&quot;Order placed. ID is: {}&quot;.format(order_id))</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">    except Exception as e:</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">        logging.info(&quot;Order placement failed: {}&quot;.format(e.message))</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">    # Fetch all orders</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">    kite.orders()</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">    # Get instruments</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">    kite.instruments()</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">    # Place an mutual fund order</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">    kite.place_mf_order(</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">        tradingsymbol=&quot;INF090I01239&quot;,</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">        transaction_type=kite.TRANSACTION_TYPE_BUY,</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">        amount=5000,</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">        tag=&quot;mytag&quot;</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    )</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">    # Cancel a mutual fund order</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">    kite.cancel_mf_order(order_id=&quot;order_id&quot;)</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">    # Get mutual fund instruments</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">    kite.mf_instruments()</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">A typical web application</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">-------------------------</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">In a typical web application where a new instance of</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">views, controllers etc. are created per incoming HTTP</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">request, you will need to initialise a new instance of</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">Kite client per request as well. This is because each</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">individual instance represents a single user that&#39;s</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">authenticated, unlike an **admin** API where you may</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">use one instance to manage many users.</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">Hence, in your web application, typically:</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">- You will initialise an instance of the Kite client</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">- Redirect the user to the `login_url()`</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">- At the redirect url endpoint, obtain the</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">`request_token` from the query parameters</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">- Initialise a new instance of Kite client,</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">use `generate_session()` to obtain the `access_token`</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">along with authenticated user data</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">- Store this response in a session and use the</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">stored `access_token` and initialise instances</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">of Kite client for subsequent API calls.</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">Exceptions</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">----------</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">Kite Connect client saves you the hassle of detecting API errors</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">by looking at HTTP codes or JSON error responses. Instead,</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">it raises aptly named **[exceptions](exceptions.m.html)** that you can catch.</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">unicode_literals</span><span class="p">,</span> <span class="n">absolute_import</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiteconnect</span><span class="w"> </span><span class="kn">import</span> <span class="n">exceptions</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiteconnect.connect</span><span class="w"> </span><span class="kn">import</span> <span class="n">KiteConnect</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiteconnect.ticker</span><span class="w"> </span><span class="kn">import</span> <span class="n">KiteTicker</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;KiteConnect&quot;</span><span class="p">,</span> <span class="s2">&quot;KiteTicker&quot;</span><span class="p">,</span> <span class="s2">&quot;exceptions&quot;</span><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="KiteConnect">
                            <input id="KiteConnect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">KiteConnect</span>:

                <label class="view-source-button" for="KiteConnect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect-28"><a href="#KiteConnect-28"><span class="linenos"> 28</span></a><span class="k">class</span><span class="w"> </span><span class="nc">KiteConnect</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="KiteConnect-29"><a href="#KiteConnect-29"><span class="linenos"> 29</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-30"><a href="#KiteConnect-30"><span class="linenos"> 30</span></a><span class="sd">    The Kite Connect API wrapper class.</span>
</span><span id="KiteConnect-31"><a href="#KiteConnect-31"><span class="linenos"> 31</span></a>
</span><span id="KiteConnect-32"><a href="#KiteConnect-32"><span class="linenos"> 32</span></a><span class="sd">    In production, you may initialise a single instance of this class per `api_key`.</span>
</span><span id="KiteConnect-33"><a href="#KiteConnect-33"><span class="linenos"> 33</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="KiteConnect-34"><a href="#KiteConnect-34"><span class="linenos"> 34</span></a>
</span><span id="KiteConnect-35"><a href="#KiteConnect-35"><span class="linenos"> 35</span></a>    <span class="c1"># Default root API endpoint. It&#39;s possible to</span>
</span><span id="KiteConnect-36"><a href="#KiteConnect-36"><span class="linenos"> 36</span></a>    <span class="c1"># override this by passing the `root` parameter during initialisation.</span>
</span><span id="KiteConnect-37"><a href="#KiteConnect-37"><span class="linenos"> 37</span></a>    <span class="n">_default_root_uri</span> <span class="o">=</span> <span class="s2">&quot;https://api.kite.trade&quot;</span>
</span><span id="KiteConnect-38"><a href="#KiteConnect-38"><span class="linenos"> 38</span></a>    <span class="n">_default_login_uri</span> <span class="o">=</span> <span class="s2">&quot;https://kite.zerodha.com/connect/login&quot;</span>
</span><span id="KiteConnect-39"><a href="#KiteConnect-39"><span class="linenos"> 39</span></a>    <span class="n">_default_timeout</span> <span class="o">=</span> <span class="mi">7</span>  <span class="c1"># In seconds</span>
</span><span id="KiteConnect-40"><a href="#KiteConnect-40"><span class="linenos"> 40</span></a>
</span><span id="KiteConnect-41"><a href="#KiteConnect-41"><span class="linenos"> 41</span></a>    <span class="c1"># Kite connect header version</span>
</span><span id="KiteConnect-42"><a href="#KiteConnect-42"><span class="linenos"> 42</span></a>    <span class="n">kite_header_version</span> <span class="o">=</span> <span class="s2">&quot;3&quot;</span>
</span><span id="KiteConnect-43"><a href="#KiteConnect-43"><span class="linenos"> 43</span></a>
</span><span id="KiteConnect-44"><a href="#KiteConnect-44"><span class="linenos"> 44</span></a>    <span class="c1"># Constants</span>
</span><span id="KiteConnect-45"><a href="#KiteConnect-45"><span class="linenos"> 45</span></a>    <span class="c1"># Products</span>
</span><span id="KiteConnect-46"><a href="#KiteConnect-46"><span class="linenos"> 46</span></a>    <span class="n">PRODUCT_MIS</span> <span class="o">=</span> <span class="s2">&quot;MIS&quot;</span>
</span><span id="KiteConnect-47"><a href="#KiteConnect-47"><span class="linenos"> 47</span></a>    <span class="n">PRODUCT_CNC</span> <span class="o">=</span> <span class="s2">&quot;CNC&quot;</span>
</span><span id="KiteConnect-48"><a href="#KiteConnect-48"><span class="linenos"> 48</span></a>    <span class="n">PRODUCT_NRML</span> <span class="o">=</span> <span class="s2">&quot;NRML&quot;</span>
</span><span id="KiteConnect-49"><a href="#KiteConnect-49"><span class="linenos"> 49</span></a>    <span class="n">PRODUCT_CO</span> <span class="o">=</span> <span class="s2">&quot;CO&quot;</span>
</span><span id="KiteConnect-50"><a href="#KiteConnect-50"><span class="linenos"> 50</span></a>
</span><span id="KiteConnect-51"><a href="#KiteConnect-51"><span class="linenos"> 51</span></a>    <span class="c1"># Order types</span>
</span><span id="KiteConnect-52"><a href="#KiteConnect-52"><span class="linenos"> 52</span></a>    <span class="n">ORDER_TYPE_MARKET</span> <span class="o">=</span> <span class="s2">&quot;MARKET&quot;</span>
</span><span id="KiteConnect-53"><a href="#KiteConnect-53"><span class="linenos"> 53</span></a>    <span class="n">ORDER_TYPE_LIMIT</span> <span class="o">=</span> <span class="s2">&quot;LIMIT&quot;</span>
</span><span id="KiteConnect-54"><a href="#KiteConnect-54"><span class="linenos"> 54</span></a>    <span class="n">ORDER_TYPE_SLM</span> <span class="o">=</span> <span class="s2">&quot;SL-M&quot;</span>
</span><span id="KiteConnect-55"><a href="#KiteConnect-55"><span class="linenos"> 55</span></a>    <span class="n">ORDER_TYPE_SL</span> <span class="o">=</span> <span class="s2">&quot;SL&quot;</span>
</span><span id="KiteConnect-56"><a href="#KiteConnect-56"><span class="linenos"> 56</span></a>
</span><span id="KiteConnect-57"><a href="#KiteConnect-57"><span class="linenos"> 57</span></a>    <span class="c1"># Varities</span>
</span><span id="KiteConnect-58"><a href="#KiteConnect-58"><span class="linenos"> 58</span></a>    <span class="n">VARIETY_REGULAR</span> <span class="o">=</span> <span class="s2">&quot;regular&quot;</span>
</span><span id="KiteConnect-59"><a href="#KiteConnect-59"><span class="linenos"> 59</span></a>    <span class="n">VARIETY_CO</span> <span class="o">=</span> <span class="s2">&quot;co&quot;</span>
</span><span id="KiteConnect-60"><a href="#KiteConnect-60"><span class="linenos"> 60</span></a>    <span class="n">VARIETY_AMO</span> <span class="o">=</span> <span class="s2">&quot;amo&quot;</span>
</span><span id="KiteConnect-61"><a href="#KiteConnect-61"><span class="linenos"> 61</span></a>    <span class="n">VARIETY_ICEBERG</span> <span class="o">=</span> <span class="s2">&quot;iceberg&quot;</span>
</span><span id="KiteConnect-62"><a href="#KiteConnect-62"><span class="linenos"> 62</span></a>    <span class="n">VARIETY_AUCTION</span> <span class="o">=</span> <span class="s2">&quot;auction&quot;</span>
</span><span id="KiteConnect-63"><a href="#KiteConnect-63"><span class="linenos"> 63</span></a>
</span><span id="KiteConnect-64"><a href="#KiteConnect-64"><span class="linenos"> 64</span></a>    <span class="c1"># Transaction type</span>
</span><span id="KiteConnect-65"><a href="#KiteConnect-65"><span class="linenos"> 65</span></a>    <span class="n">TRANSACTION_TYPE_BUY</span> <span class="o">=</span> <span class="s2">&quot;BUY&quot;</span>
</span><span id="KiteConnect-66"><a href="#KiteConnect-66"><span class="linenos"> 66</span></a>    <span class="n">TRANSACTION_TYPE_SELL</span> <span class="o">=</span> <span class="s2">&quot;SELL&quot;</span>
</span><span id="KiteConnect-67"><a href="#KiteConnect-67"><span class="linenos"> 67</span></a>
</span><span id="KiteConnect-68"><a href="#KiteConnect-68"><span class="linenos"> 68</span></a>    <span class="c1"># Validity</span>
</span><span id="KiteConnect-69"><a href="#KiteConnect-69"><span class="linenos"> 69</span></a>    <span class="n">VALIDITY_DAY</span> <span class="o">=</span> <span class="s2">&quot;DAY&quot;</span>
</span><span id="KiteConnect-70"><a href="#KiteConnect-70"><span class="linenos"> 70</span></a>    <span class="n">VALIDITY_IOC</span> <span class="o">=</span> <span class="s2">&quot;IOC&quot;</span>
</span><span id="KiteConnect-71"><a href="#KiteConnect-71"><span class="linenos"> 71</span></a>    <span class="n">VALIDITY_TTL</span> <span class="o">=</span> <span class="s2">&quot;TTL&quot;</span>
</span><span id="KiteConnect-72"><a href="#KiteConnect-72"><span class="linenos"> 72</span></a>
</span><span id="KiteConnect-73"><a href="#KiteConnect-73"><span class="linenos"> 73</span></a>    <span class="c1"># Position Type</span>
</span><span id="KiteConnect-74"><a href="#KiteConnect-74"><span class="linenos"> 74</span></a>    <span class="n">POSITION_TYPE_DAY</span> <span class="o">=</span> <span class="s2">&quot;day&quot;</span>
</span><span id="KiteConnect-75"><a href="#KiteConnect-75"><span class="linenos"> 75</span></a>    <span class="n">POSITION_TYPE_OVERNIGHT</span> <span class="o">=</span> <span class="s2">&quot;overnight&quot;</span>
</span><span id="KiteConnect-76"><a href="#KiteConnect-76"><span class="linenos"> 76</span></a>
</span><span id="KiteConnect-77"><a href="#KiteConnect-77"><span class="linenos"> 77</span></a>    <span class="c1"># Exchanges</span>
</span><span id="KiteConnect-78"><a href="#KiteConnect-78"><span class="linenos"> 78</span></a>    <span class="n">EXCHANGE_NSE</span> <span class="o">=</span> <span class="s2">&quot;NSE&quot;</span>
</span><span id="KiteConnect-79"><a href="#KiteConnect-79"><span class="linenos"> 79</span></a>    <span class="n">EXCHANGE_BSE</span> <span class="o">=</span> <span class="s2">&quot;BSE&quot;</span>
</span><span id="KiteConnect-80"><a href="#KiteConnect-80"><span class="linenos"> 80</span></a>    <span class="n">EXCHANGE_NFO</span> <span class="o">=</span> <span class="s2">&quot;NFO&quot;</span>
</span><span id="KiteConnect-81"><a href="#KiteConnect-81"><span class="linenos"> 81</span></a>    <span class="n">EXCHANGE_CDS</span> <span class="o">=</span> <span class="s2">&quot;CDS&quot;</span>
</span><span id="KiteConnect-82"><a href="#KiteConnect-82"><span class="linenos"> 82</span></a>    <span class="n">EXCHANGE_BFO</span> <span class="o">=</span> <span class="s2">&quot;BFO&quot;</span>
</span><span id="KiteConnect-83"><a href="#KiteConnect-83"><span class="linenos"> 83</span></a>    <span class="n">EXCHANGE_MCX</span> <span class="o">=</span> <span class="s2">&quot;MCX&quot;</span>
</span><span id="KiteConnect-84"><a href="#KiteConnect-84"><span class="linenos"> 84</span></a>    <span class="n">EXCHANGE_BCD</span> <span class="o">=</span> <span class="s2">&quot;BCD&quot;</span>
</span><span id="KiteConnect-85"><a href="#KiteConnect-85"><span class="linenos"> 85</span></a>
</span><span id="KiteConnect-86"><a href="#KiteConnect-86"><span class="linenos"> 86</span></a>    <span class="c1"># Margins segments</span>
</span><span id="KiteConnect-87"><a href="#KiteConnect-87"><span class="linenos"> 87</span></a>    <span class="n">MARGIN_EQUITY</span> <span class="o">=</span> <span class="s2">&quot;equity&quot;</span>
</span><span id="KiteConnect-88"><a href="#KiteConnect-88"><span class="linenos"> 88</span></a>    <span class="n">MARGIN_COMMODITY</span> <span class="o">=</span> <span class="s2">&quot;commodity&quot;</span>
</span><span id="KiteConnect-89"><a href="#KiteConnect-89"><span class="linenos"> 89</span></a>
</span><span id="KiteConnect-90"><a href="#KiteConnect-90"><span class="linenos"> 90</span></a>    <span class="c1"># Status constants</span>
</span><span id="KiteConnect-91"><a href="#KiteConnect-91"><span class="linenos"> 91</span></a>    <span class="n">STATUS_COMPLETE</span> <span class="o">=</span> <span class="s2">&quot;COMPLETE&quot;</span>
</span><span id="KiteConnect-92"><a href="#KiteConnect-92"><span class="linenos"> 92</span></a>    <span class="n">STATUS_REJECTED</span> <span class="o">=</span> <span class="s2">&quot;REJECTED&quot;</span>
</span><span id="KiteConnect-93"><a href="#KiteConnect-93"><span class="linenos"> 93</span></a>    <span class="n">STATUS_CANCELLED</span> <span class="o">=</span> <span class="s2">&quot;CANCELLED&quot;</span>
</span><span id="KiteConnect-94"><a href="#KiteConnect-94"><span class="linenos"> 94</span></a>
</span><span id="KiteConnect-95"><a href="#KiteConnect-95"><span class="linenos"> 95</span></a>    <span class="c1"># GTT order type</span>
</span><span id="KiteConnect-96"><a href="#KiteConnect-96"><span class="linenos"> 96</span></a>    <span class="n">GTT_TYPE_OCO</span> <span class="o">=</span> <span class="s2">&quot;two-leg&quot;</span>
</span><span id="KiteConnect-97"><a href="#KiteConnect-97"><span class="linenos"> 97</span></a>    <span class="n">GTT_TYPE_SINGLE</span> <span class="o">=</span> <span class="s2">&quot;single&quot;</span>
</span><span id="KiteConnect-98"><a href="#KiteConnect-98"><span class="linenos"> 98</span></a>
</span><span id="KiteConnect-99"><a href="#KiteConnect-99"><span class="linenos"> 99</span></a>    <span class="c1"># GTT order status</span>
</span><span id="KiteConnect-100"><a href="#KiteConnect-100"><span class="linenos">100</span></a>    <span class="n">GTT_STATUS_ACTIVE</span> <span class="o">=</span> <span class="s2">&quot;active&quot;</span>
</span><span id="KiteConnect-101"><a href="#KiteConnect-101"><span class="linenos">101</span></a>    <span class="n">GTT_STATUS_TRIGGERED</span> <span class="o">=</span> <span class="s2">&quot;triggered&quot;</span>
</span><span id="KiteConnect-102"><a href="#KiteConnect-102"><span class="linenos">102</span></a>    <span class="n">GTT_STATUS_DISABLED</span> <span class="o">=</span> <span class="s2">&quot;disabled&quot;</span>
</span><span id="KiteConnect-103"><a href="#KiteConnect-103"><span class="linenos">103</span></a>    <span class="n">GTT_STATUS_EXPIRED</span> <span class="o">=</span> <span class="s2">&quot;expired&quot;</span>
</span><span id="KiteConnect-104"><a href="#KiteConnect-104"><span class="linenos">104</span></a>    <span class="n">GTT_STATUS_CANCELLED</span> <span class="o">=</span> <span class="s2">&quot;cancelled&quot;</span>
</span><span id="KiteConnect-105"><a href="#KiteConnect-105"><span class="linenos">105</span></a>    <span class="n">GTT_STATUS_REJECTED</span> <span class="o">=</span> <span class="s2">&quot;rejected&quot;</span>
</span><span id="KiteConnect-106"><a href="#KiteConnect-106"><span class="linenos">106</span></a>    <span class="n">GTT_STATUS_DELETED</span> <span class="o">=</span> <span class="s2">&quot;deleted&quot;</span>
</span><span id="KiteConnect-107"><a href="#KiteConnect-107"><span class="linenos">107</span></a>
</span><span id="KiteConnect-108"><a href="#KiteConnect-108"><span class="linenos">108</span></a>    <span class="c1"># URIs to various calls</span>
</span><span id="KiteConnect-109"><a href="#KiteConnect-109"><span class="linenos">109</span></a>    <span class="n">_routes</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteConnect-110"><a href="#KiteConnect-110"><span class="linenos">110</span></a>        <span class="s2">&quot;api.token&quot;</span><span class="p">:</span> <span class="s2">&quot;/session/token&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-111"><a href="#KiteConnect-111"><span class="linenos">111</span></a>        <span class="s2">&quot;api.token.invalidate&quot;</span><span class="p">:</span> <span class="s2">&quot;/session/token&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-112"><a href="#KiteConnect-112"><span class="linenos">112</span></a>        <span class="s2">&quot;api.token.renew&quot;</span><span class="p">:</span> <span class="s2">&quot;/session/refresh_token&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-113"><a href="#KiteConnect-113"><span class="linenos">113</span></a>        <span class="s2">&quot;user.profile&quot;</span><span class="p">:</span> <span class="s2">&quot;/user/profile&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-114"><a href="#KiteConnect-114"><span class="linenos">114</span></a>        <span class="s2">&quot;user.margins&quot;</span><span class="p">:</span> <span class="s2">&quot;/user/margins&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-115"><a href="#KiteConnect-115"><span class="linenos">115</span></a>        <span class="s2">&quot;user.margins.segment&quot;</span><span class="p">:</span> <span class="s2">&quot;/user/margins/</span><span class="si">{segment}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-116"><a href="#KiteConnect-116"><span class="linenos">116</span></a>
</span><span id="KiteConnect-117"><a href="#KiteConnect-117"><span class="linenos">117</span></a>        <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="s2">&quot;/orders&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-118"><a href="#KiteConnect-118"><span class="linenos">118</span></a>        <span class="s2">&quot;trades&quot;</span><span class="p">:</span> <span class="s2">&quot;/trades&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-119"><a href="#KiteConnect-119"><span class="linenos">119</span></a>
</span><span id="KiteConnect-120"><a href="#KiteConnect-120"><span class="linenos">120</span></a>        <span class="s2">&quot;order.info&quot;</span><span class="p">:</span> <span class="s2">&quot;/orders/</span><span class="si">{order_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-121"><a href="#KiteConnect-121"><span class="linenos">121</span></a>        <span class="s2">&quot;order.place&quot;</span><span class="p">:</span> <span class="s2">&quot;/orders/</span><span class="si">{variety}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-122"><a href="#KiteConnect-122"><span class="linenos">122</span></a>        <span class="s2">&quot;order.modify&quot;</span><span class="p">:</span> <span class="s2">&quot;/orders/</span><span class="si">{variety}</span><span class="s2">/</span><span class="si">{order_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-123"><a href="#KiteConnect-123"><span class="linenos">123</span></a>        <span class="s2">&quot;order.cancel&quot;</span><span class="p">:</span> <span class="s2">&quot;/orders/</span><span class="si">{variety}</span><span class="s2">/</span><span class="si">{order_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-124"><a href="#KiteConnect-124"><span class="linenos">124</span></a>        <span class="s2">&quot;order.trades&quot;</span><span class="p">:</span> <span class="s2">&quot;/orders/</span><span class="si">{order_id}</span><span class="s2">/trades&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-125"><a href="#KiteConnect-125"><span class="linenos">125</span></a>
</span><span id="KiteConnect-126"><a href="#KiteConnect-126"><span class="linenos">126</span></a>        <span class="s2">&quot;portfolio.positions&quot;</span><span class="p">:</span> <span class="s2">&quot;/portfolio/positions&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-127"><a href="#KiteConnect-127"><span class="linenos">127</span></a>        <span class="s2">&quot;portfolio.holdings&quot;</span><span class="p">:</span> <span class="s2">&quot;/portfolio/holdings&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-128"><a href="#KiteConnect-128"><span class="linenos">128</span></a>        <span class="s2">&quot;portfolio.holdings.auction&quot;</span><span class="p">:</span> <span class="s2">&quot;/portfolio/holdings/auctions&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-129"><a href="#KiteConnect-129"><span class="linenos">129</span></a>        <span class="s2">&quot;portfolio.positions.convert&quot;</span><span class="p">:</span> <span class="s2">&quot;/portfolio/positions&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-130"><a href="#KiteConnect-130"><span class="linenos">130</span></a>
</span><span id="KiteConnect-131"><a href="#KiteConnect-131"><span class="linenos">131</span></a>        <span class="c1"># MF api endpoints</span>
</span><span id="KiteConnect-132"><a href="#KiteConnect-132"><span class="linenos">132</span></a>        <span class="s2">&quot;mf.orders&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/orders&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-133"><a href="#KiteConnect-133"><span class="linenos">133</span></a>        <span class="s2">&quot;mf.order.info&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/orders/</span><span class="si">{order_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-134"><a href="#KiteConnect-134"><span class="linenos">134</span></a>        <span class="s2">&quot;mf.order.place&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/orders&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-135"><a href="#KiteConnect-135"><span class="linenos">135</span></a>        <span class="s2">&quot;mf.order.cancel&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/orders/</span><span class="si">{order_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-136"><a href="#KiteConnect-136"><span class="linenos">136</span></a>
</span><span id="KiteConnect-137"><a href="#KiteConnect-137"><span class="linenos">137</span></a>        <span class="s2">&quot;mf.sips&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/sips&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-138"><a href="#KiteConnect-138"><span class="linenos">138</span></a>        <span class="s2">&quot;mf.sip.info&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/sips/</span><span class="si">{sip_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-139"><a href="#KiteConnect-139"><span class="linenos">139</span></a>        <span class="s2">&quot;mf.sip.place&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/sips&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-140"><a href="#KiteConnect-140"><span class="linenos">140</span></a>        <span class="s2">&quot;mf.sip.modify&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/sips/</span><span class="si">{sip_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-141"><a href="#KiteConnect-141"><span class="linenos">141</span></a>        <span class="s2">&quot;mf.sip.cancel&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/sips/</span><span class="si">{sip_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-142"><a href="#KiteConnect-142"><span class="linenos">142</span></a>
</span><span id="KiteConnect-143"><a href="#KiteConnect-143"><span class="linenos">143</span></a>        <span class="s2">&quot;mf.holdings&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/holdings&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-144"><a href="#KiteConnect-144"><span class="linenos">144</span></a>        <span class="s2">&quot;mf.instruments&quot;</span><span class="p">:</span> <span class="s2">&quot;/mf/instruments&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-145"><a href="#KiteConnect-145"><span class="linenos">145</span></a>
</span><span id="KiteConnect-146"><a href="#KiteConnect-146"><span class="linenos">146</span></a>        <span class="s2">&quot;market.instruments.all&quot;</span><span class="p">:</span> <span class="s2">&quot;/instruments&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-147"><a href="#KiteConnect-147"><span class="linenos">147</span></a>        <span class="s2">&quot;market.instruments&quot;</span><span class="p">:</span> <span class="s2">&quot;/instruments/</span><span class="si">{exchange}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-148"><a href="#KiteConnect-148"><span class="linenos">148</span></a>        <span class="s2">&quot;market.margins&quot;</span><span class="p">:</span> <span class="s2">&quot;/margins/</span><span class="si">{segment}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-149"><a href="#KiteConnect-149"><span class="linenos">149</span></a>        <span class="s2">&quot;market.historical&quot;</span><span class="p">:</span> <span class="s2">&quot;/instruments/historical/</span><span class="si">{instrument_token}</span><span class="s2">/</span><span class="si">{interval}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-150"><a href="#KiteConnect-150"><span class="linenos">150</span></a>        <span class="s2">&quot;market.trigger_range&quot;</span><span class="p">:</span> <span class="s2">&quot;/instruments/trigger_range/</span><span class="si">{transaction_type}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-151"><a href="#KiteConnect-151"><span class="linenos">151</span></a>
</span><span id="KiteConnect-152"><a href="#KiteConnect-152"><span class="linenos">152</span></a>        <span class="s2">&quot;market.quote&quot;</span><span class="p">:</span> <span class="s2">&quot;/quote&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-153"><a href="#KiteConnect-153"><span class="linenos">153</span></a>        <span class="s2">&quot;market.quote.ohlc&quot;</span><span class="p">:</span> <span class="s2">&quot;/quote/ohlc&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-154"><a href="#KiteConnect-154"><span class="linenos">154</span></a>        <span class="s2">&quot;market.quote.ltp&quot;</span><span class="p">:</span> <span class="s2">&quot;/quote/ltp&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-155"><a href="#KiteConnect-155"><span class="linenos">155</span></a>
</span><span id="KiteConnect-156"><a href="#KiteConnect-156"><span class="linenos">156</span></a>        <span class="c1"># GTT endpoints</span>
</span><span id="KiteConnect-157"><a href="#KiteConnect-157"><span class="linenos">157</span></a>        <span class="s2">&quot;gtt&quot;</span><span class="p">:</span> <span class="s2">&quot;/gtt/triggers&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-158"><a href="#KiteConnect-158"><span class="linenos">158</span></a>        <span class="s2">&quot;gtt.place&quot;</span><span class="p">:</span> <span class="s2">&quot;/gtt/triggers&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-159"><a href="#KiteConnect-159"><span class="linenos">159</span></a>        <span class="s2">&quot;gtt.info&quot;</span><span class="p">:</span> <span class="s2">&quot;/gtt/triggers/</span><span class="si">{trigger_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-160"><a href="#KiteConnect-160"><span class="linenos">160</span></a>        <span class="s2">&quot;gtt.modify&quot;</span><span class="p">:</span> <span class="s2">&quot;/gtt/triggers/</span><span class="si">{trigger_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-161"><a href="#KiteConnect-161"><span class="linenos">161</span></a>        <span class="s2">&quot;gtt.delete&quot;</span><span class="p">:</span> <span class="s2">&quot;/gtt/triggers/</span><span class="si">{trigger_id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-162"><a href="#KiteConnect-162"><span class="linenos">162</span></a>
</span><span id="KiteConnect-163"><a href="#KiteConnect-163"><span class="linenos">163</span></a>        <span class="c1"># Margin computation endpoints</span>
</span><span id="KiteConnect-164"><a href="#KiteConnect-164"><span class="linenos">164</span></a>        <span class="s2">&quot;order.margins&quot;</span><span class="p">:</span> <span class="s2">&quot;/margins/orders&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-165"><a href="#KiteConnect-165"><span class="linenos">165</span></a>        <span class="s2">&quot;order.margins.basket&quot;</span><span class="p">:</span> <span class="s2">&quot;/margins/basket&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-166"><a href="#KiteConnect-166"><span class="linenos">166</span></a>        <span class="s2">&quot;order.contract_note&quot;</span><span class="p">:</span> <span class="s2">&quot;/charges/orders&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-167"><a href="#KiteConnect-167"><span class="linenos">167</span></a>    <span class="p">}</span>
</span><span id="KiteConnect-168"><a href="#KiteConnect-168"><span class="linenos">168</span></a>
</span><span id="KiteConnect-169"><a href="#KiteConnect-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect-170"><a href="#KiteConnect-170"><span class="linenos">170</span></a>                 <span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect-171"><a href="#KiteConnect-171"><span class="linenos">171</span></a>                 <span class="n">access_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-172"><a href="#KiteConnect-172"><span class="linenos">172</span></a>                 <span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-173"><a href="#KiteConnect-173"><span class="linenos">173</span></a>                 <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="KiteConnect-174"><a href="#KiteConnect-174"><span class="linenos">174</span></a>                 <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-175"><a href="#KiteConnect-175"><span class="linenos">175</span></a>                 <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-176"><a href="#KiteConnect-176"><span class="linenos">176</span></a>                 <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-177"><a href="#KiteConnect-177"><span class="linenos">177</span></a>                 <span class="n">disable_ssl</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="KiteConnect-178"><a href="#KiteConnect-178"><span class="linenos">178</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-179"><a href="#KiteConnect-179"><span class="linenos">179</span></a><span class="sd">        Initialise a new Kite Connect client instance.</span>
</span><span id="KiteConnect-180"><a href="#KiteConnect-180"><span class="linenos">180</span></a>
</span><span id="KiteConnect-181"><a href="#KiteConnect-181"><span class="linenos">181</span></a><span class="sd">        - `api_key` is the key issued to you</span>
</span><span id="KiteConnect-182"><a href="#KiteConnect-182"><span class="linenos">182</span></a><span class="sd">        - `access_token` is the token obtained after the login flow in</span>
</span><span id="KiteConnect-183"><a href="#KiteConnect-183"><span class="linenos">183</span></a><span class="sd">            exchange for the `request_token` . Pre-login, this will default to None,</span>
</span><span id="KiteConnect-184"><a href="#KiteConnect-184"><span class="linenos">184</span></a><span class="sd">        but once you have obtained it, you should</span>
</span><span id="KiteConnect-185"><a href="#KiteConnect-185"><span class="linenos">185</span></a><span class="sd">        persist it in a database or session to pass</span>
</span><span id="KiteConnect-186"><a href="#KiteConnect-186"><span class="linenos">186</span></a><span class="sd">        to the Kite Connect class initialisation for subsequent requests.</span>
</span><span id="KiteConnect-187"><a href="#KiteConnect-187"><span class="linenos">187</span></a><span class="sd">        - `root` is the API end point root. Unless you explicitly</span>
</span><span id="KiteConnect-188"><a href="#KiteConnect-188"><span class="linenos">188</span></a><span class="sd">        want to send API requests to a non-default endpoint, this</span>
</span><span id="KiteConnect-189"><a href="#KiteConnect-189"><span class="linenos">189</span></a><span class="sd">        can be ignored.</span>
</span><span id="KiteConnect-190"><a href="#KiteConnect-190"><span class="linenos">190</span></a><span class="sd">        - `debug`, if set to True, will serialise and print requests</span>
</span><span id="KiteConnect-191"><a href="#KiteConnect-191"><span class="linenos">191</span></a><span class="sd">        and responses to stdout.</span>
</span><span id="KiteConnect-192"><a href="#KiteConnect-192"><span class="linenos">192</span></a><span class="sd">        - `timeout` is the time (seconds) for which the API client will wait for</span>
</span><span id="KiteConnect-193"><a href="#KiteConnect-193"><span class="linenos">193</span></a><span class="sd">        a request to complete before it fails. Defaults to 7 seconds</span>
</span><span id="KiteConnect-194"><a href="#KiteConnect-194"><span class="linenos">194</span></a><span class="sd">        - `proxies` to set requests proxy.</span>
</span><span id="KiteConnect-195"><a href="#KiteConnect-195"><span class="linenos">195</span></a><span class="sd">        Check [python requests documentation](http://docs.python-requests.org/en/master/user/advanced/#proxies) for usage and examples.</span>
</span><span id="KiteConnect-196"><a href="#KiteConnect-196"><span class="linenos">196</span></a><span class="sd">        - `pool` is manages request pools. It takes a dict of params accepted by HTTPAdapter as described here in [python requests documentation](http://docs.python-requests.org/en/master/api/#requests.adapters.HTTPAdapter)</span>
</span><span id="KiteConnect-197"><a href="#KiteConnect-197"><span class="linenos">197</span></a><span class="sd">        - `disable_ssl` disables the SSL verification while making a request.</span>
</span><span id="KiteConnect-198"><a href="#KiteConnect-198"><span class="linenos">198</span></a><span class="sd">        If set requests won&#39;t throw SSLError if its set to custom `root` url without SSL.</span>
</span><span id="KiteConnect-199"><a href="#KiteConnect-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-200"><a href="#KiteConnect-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
</span><span id="KiteConnect-201"><a href="#KiteConnect-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>
</span><span id="KiteConnect-202"><a href="#KiteConnect-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session_expiry_hook</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteConnect-203"><a href="#KiteConnect-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">disable_ssl</span> <span class="o">=</span> <span class="n">disable_ssl</span>
</span><span id="KiteConnect-204"><a href="#KiteConnect-204"><span class="linenos">204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
</span><span id="KiteConnect-205"><a href="#KiteConnect-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">proxies</span> <span class="o">=</span> <span class="n">proxies</span> <span class="k">if</span> <span class="n">proxies</span> <span class="k">else</span> <span class="p">{}</span>
</span><span id="KiteConnect-206"><a href="#KiteConnect-206"><span class="linenos">206</span></a>
</span><span id="KiteConnect-207"><a href="#KiteConnect-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_root_uri</span>
</span><span id="KiteConnect-208"><a href="#KiteConnect-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_timeout</span>
</span><span id="KiteConnect-209"><a href="#KiteConnect-209"><span class="linenos">209</span></a>
</span><span id="KiteConnect-210"><a href="#KiteConnect-210"><span class="linenos">210</span></a>        <span class="c1"># Create requests session by default</span>
</span><span id="KiteConnect-211"><a href="#KiteConnect-211"><span class="linenos">211</span></a>        <span class="c1"># Same session to be used by pool connections</span>
</span><span id="KiteConnect-212"><a href="#KiteConnect-212"><span class="linenos">212</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reqsession</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
</span><span id="KiteConnect-213"><a href="#KiteConnect-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="n">pool</span><span class="p">:</span>
</span><span id="KiteConnect-214"><a href="#KiteConnect-214"><span class="linenos">214</span></a>            <span class="n">reqadapter</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">adapters</span><span class="o">.</span><span class="n">HTTPAdapter</span><span class="p">(</span><span class="o">**</span><span class="n">pool</span><span class="p">)</span>
</span><span id="KiteConnect-215"><a href="#KiteConnect-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reqsession</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">reqadapter</span><span class="p">)</span>
</span><span id="KiteConnect-216"><a href="#KiteConnect-216"><span class="linenos">216</span></a>
</span><span id="KiteConnect-217"><a href="#KiteConnect-217"><span class="linenos">217</span></a>        <span class="c1"># disable requests SSL warning</span>
</span><span id="KiteConnect-218"><a href="#KiteConnect-218"><span class="linenos">218</span></a>        <span class="n">requests</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">urllib3</span><span class="o">.</span><span class="n">disable_warnings</span><span class="p">()</span>
</span><span id="KiteConnect-219"><a href="#KiteConnect-219"><span class="linenos">219</span></a>
</span><span id="KiteConnect-220"><a href="#KiteConnect-220"><span class="linenos">220</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_session_expiry_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
</span><span id="KiteConnect-221"><a href="#KiteConnect-221"><span class="linenos">221</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-222"><a href="#KiteConnect-222"><span class="linenos">222</span></a><span class="sd">        Set a callback hook for session (`TokenError` -- timeout, expiry etc.) errors.</span>
</span><span id="KiteConnect-223"><a href="#KiteConnect-223"><span class="linenos">223</span></a>
</span><span id="KiteConnect-224"><a href="#KiteConnect-224"><span class="linenos">224</span></a><span class="sd">        An `access_token` (login session) can become invalid for a number of</span>
</span><span id="KiteConnect-225"><a href="#KiteConnect-225"><span class="linenos">225</span></a><span class="sd">        reasons, but it doesn&#39;t make sense for the client to</span>
</span><span id="KiteConnect-226"><a href="#KiteConnect-226"><span class="linenos">226</span></a><span class="sd">        try and catch it during every API call.</span>
</span><span id="KiteConnect-227"><a href="#KiteConnect-227"><span class="linenos">227</span></a>
</span><span id="KiteConnect-228"><a href="#KiteConnect-228"><span class="linenos">228</span></a><span class="sd">        A callback method that handles session errors</span>
</span><span id="KiteConnect-229"><a href="#KiteConnect-229"><span class="linenos">229</span></a><span class="sd">        can be set here and when the client encounters</span>
</span><span id="KiteConnect-230"><a href="#KiteConnect-230"><span class="linenos">230</span></a><span class="sd">        a token error at any point, it&#39;ll be called.</span>
</span><span id="KiteConnect-231"><a href="#KiteConnect-231"><span class="linenos">231</span></a>
</span><span id="KiteConnect-232"><a href="#KiteConnect-232"><span class="linenos">232</span></a><span class="sd">        This callback, for instance, can log the user out of the UI,</span>
</span><span id="KiteConnect-233"><a href="#KiteConnect-233"><span class="linenos">233</span></a><span class="sd">        clear session cookies, or initiate a fresh login.</span>
</span><span id="KiteConnect-234"><a href="#KiteConnect-234"><span class="linenos">234</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-235"><a href="#KiteConnect-235"><span class="linenos">235</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">method</span><span class="p">):</span>
</span><span id="KiteConnect-236"><a href="#KiteConnect-236"><span class="linenos">236</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid input type. Only functions are accepted.&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-237"><a href="#KiteConnect-237"><span class="linenos">237</span></a>
</span><span id="KiteConnect-238"><a href="#KiteConnect-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session_expiry_hook</span> <span class="o">=</span> <span class="n">method</span>
</span><span id="KiteConnect-239"><a href="#KiteConnect-239"><span class="linenos">239</span></a>
</span><span id="KiteConnect-240"><a href="#KiteConnect-240"><span class="linenos">240</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_access_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">access_token</span><span class="p">):</span>
</span><span id="KiteConnect-241"><a href="#KiteConnect-241"><span class="linenos">241</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the `access_token` received after a successful authentication.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-242"><a href="#KiteConnect-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
</span><span id="KiteConnect-243"><a href="#KiteConnect-243"><span class="linenos">243</span></a>
</span><span id="KiteConnect-244"><a href="#KiteConnect-244"><span class="linenos">244</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">login_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-245"><a href="#KiteConnect-245"><span class="linenos">245</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the remote login url to which a user should be redirected to initiate the login flow.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-246"><a href="#KiteConnect-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">?api_key=</span><span class="si">%s</span><span class="s2">&amp;v=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_login_uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kite_header_version</span><span class="p">)</span>
</span><span id="KiteConnect-247"><a href="#KiteConnect-247"><span class="linenos">247</span></a>
</span><span id="KiteConnect-248"><a href="#KiteConnect-248"><span class="linenos">248</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_token</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">):</span>
</span><span id="KiteConnect-249"><a href="#KiteConnect-249"><span class="linenos">249</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-250"><a href="#KiteConnect-250"><span class="linenos">250</span></a><span class="sd">        Generate user session details like `access_token` etc by exchanging `request_token`.</span>
</span><span id="KiteConnect-251"><a href="#KiteConnect-251"><span class="linenos">251</span></a><span class="sd">        Access token is automatically set if the session is retrieved successfully.</span>
</span><span id="KiteConnect-252"><a href="#KiteConnect-252"><span class="linenos">252</span></a>
</span><span id="KiteConnect-253"><a href="#KiteConnect-253"><span class="linenos">253</span></a><span class="sd">        Do the token exchange with the `request_token` obtained after the login flow,</span>
</span><span id="KiteConnect-254"><a href="#KiteConnect-254"><span class="linenos">254</span></a><span class="sd">        and retrieve the `access_token` required for all subsequent requests. The</span>
</span><span id="KiteConnect-255"><a href="#KiteConnect-255"><span class="linenos">255</span></a><span class="sd">        response contains not just the `access_token`, but metadata for</span>
</span><span id="KiteConnect-256"><a href="#KiteConnect-256"><span class="linenos">256</span></a><span class="sd">        the user who has authenticated.</span>
</span><span id="KiteConnect-257"><a href="#KiteConnect-257"><span class="linenos">257</span></a>
</span><span id="KiteConnect-258"><a href="#KiteConnect-258"><span class="linenos">258</span></a><span class="sd">        - `request_token` is the token obtained from the GET paramers after a successful login redirect.</span>
</span><span id="KiteConnect-259"><a href="#KiteConnect-259"><span class="linenos">259</span></a><span class="sd">        - `api_secret` is the API api_secret issued with the API key.</span>
</span><span id="KiteConnect-260"><a href="#KiteConnect-260"><span class="linenos">260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-261"><a href="#KiteConnect-261"><span class="linenos">261</span></a>        <span class="n">h</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">request_token</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">api_secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-262"><a href="#KiteConnect-262"><span class="linenos">262</span></a>        <span class="n">checksum</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="KiteConnect-263"><a href="#KiteConnect-263"><span class="linenos">263</span></a>
</span><span id="KiteConnect-264"><a href="#KiteConnect-264"><span class="linenos">264</span></a>        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;api.token&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-265"><a href="#KiteConnect-265"><span class="linenos">265</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect-266"><a href="#KiteConnect-266"><span class="linenos">266</span></a>            <span class="s2">&quot;request_token&quot;</span><span class="p">:</span> <span class="n">request_token</span><span class="p">,</span>
</span><span id="KiteConnect-267"><a href="#KiteConnect-267"><span class="linenos">267</span></a>            <span class="s2">&quot;checksum&quot;</span><span class="p">:</span> <span class="n">checksum</span>
</span><span id="KiteConnect-268"><a href="#KiteConnect-268"><span class="linenos">268</span></a>        <span class="p">})</span>
</span><span id="KiteConnect-269"><a href="#KiteConnect-269"><span class="linenos">269</span></a>
</span><span id="KiteConnect-270"><a href="#KiteConnect-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">:</span>
</span><span id="KiteConnect-271"><a href="#KiteConnect-271"><span class="linenos">271</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-272"><a href="#KiteConnect-272"><span class="linenos">272</span></a>
</span><span id="KiteConnect-273"><a href="#KiteConnect-273"><span class="linenos">273</span></a>        <span class="k">if</span> <span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span>
</span><span id="KiteConnect-274"><a href="#KiteConnect-274"><span class="linenos">274</span></a>            <span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-275"><a href="#KiteConnect-275"><span class="linenos">275</span></a>
</span><span id="KiteConnect-276"><a href="#KiteConnect-276"><span class="linenos">276</span></a>        <span class="k">return</span> <span class="n">resp</span>
</span><span id="KiteConnect-277"><a href="#KiteConnect-277"><span class="linenos">277</span></a>
</span><span id="KiteConnect-278"><a href="#KiteConnect-278"><span class="linenos">278</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">invalidate_access_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">access_token</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-279"><a href="#KiteConnect-279"><span class="linenos">279</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-280"><a href="#KiteConnect-280"><span class="linenos">280</span></a><span class="sd">        Kill the session by invalidating the access token.</span>
</span><span id="KiteConnect-281"><a href="#KiteConnect-281"><span class="linenos">281</span></a>
</span><span id="KiteConnect-282"><a href="#KiteConnect-282"><span class="linenos">282</span></a><span class="sd">        - `access_token` to invalidate. Default is the active `access_token`.</span>
</span><span id="KiteConnect-283"><a href="#KiteConnect-283"><span class="linenos">283</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-284"><a href="#KiteConnect-284"><span class="linenos">284</span></a>        <span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span>
</span><span id="KiteConnect-285"><a href="#KiteConnect-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;api.token.invalidate&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-286"><a href="#KiteConnect-286"><span class="linenos">286</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect-287"><a href="#KiteConnect-287"><span class="linenos">287</span></a>            <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">access_token</span>
</span><span id="KiteConnect-288"><a href="#KiteConnect-288"><span class="linenos">288</span></a>        <span class="p">})</span>
</span><span id="KiteConnect-289"><a href="#KiteConnect-289"><span class="linenos">289</span></a>
</span><span id="KiteConnect-290"><a href="#KiteConnect-290"><span class="linenos">290</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">renew_access_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refresh_token</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">):</span>
</span><span id="KiteConnect-291"><a href="#KiteConnect-291"><span class="linenos">291</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-292"><a href="#KiteConnect-292"><span class="linenos">292</span></a><span class="sd">        Renew expired `refresh_token` using valid `refresh_token`.</span>
</span><span id="KiteConnect-293"><a href="#KiteConnect-293"><span class="linenos">293</span></a>
</span><span id="KiteConnect-294"><a href="#KiteConnect-294"><span class="linenos">294</span></a><span class="sd">        - `refresh_token` is the token obtained from previous successful login flow.</span>
</span><span id="KiteConnect-295"><a href="#KiteConnect-295"><span class="linenos">295</span></a><span class="sd">        - `api_secret` is the API api_secret issued with the API key.</span>
</span><span id="KiteConnect-296"><a href="#KiteConnect-296"><span class="linenos">296</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-297"><a href="#KiteConnect-297"><span class="linenos">297</span></a>        <span class="n">h</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">refresh_token</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">api_secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-298"><a href="#KiteConnect-298"><span class="linenos">298</span></a>        <span class="n">checksum</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="KiteConnect-299"><a href="#KiteConnect-299"><span class="linenos">299</span></a>
</span><span id="KiteConnect-300"><a href="#KiteConnect-300"><span class="linenos">300</span></a>        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;api.token.renew&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-301"><a href="#KiteConnect-301"><span class="linenos">301</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect-302"><a href="#KiteConnect-302"><span class="linenos">302</span></a>            <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="n">refresh_token</span><span class="p">,</span>
</span><span id="KiteConnect-303"><a href="#KiteConnect-303"><span class="linenos">303</span></a>            <span class="s2">&quot;checksum&quot;</span><span class="p">:</span> <span class="n">checksum</span>
</span><span id="KiteConnect-304"><a href="#KiteConnect-304"><span class="linenos">304</span></a>        <span class="p">})</span>
</span><span id="KiteConnect-305"><a href="#KiteConnect-305"><span class="linenos">305</span></a>
</span><span id="KiteConnect-306"><a href="#KiteConnect-306"><span class="linenos">306</span></a>        <span class="k">if</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">:</span>
</span><span id="KiteConnect-307"><a href="#KiteConnect-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-308"><a href="#KiteConnect-308"><span class="linenos">308</span></a>
</span><span id="KiteConnect-309"><a href="#KiteConnect-309"><span class="linenos">309</span></a>        <span class="k">return</span> <span class="n">resp</span>
</span><span id="KiteConnect-310"><a href="#KiteConnect-310"><span class="linenos">310</span></a>
</span><span id="KiteConnect-311"><a href="#KiteConnect-311"><span class="linenos">311</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">invalidate_refresh_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refresh_token</span><span class="p">):</span>
</span><span id="KiteConnect-312"><a href="#KiteConnect-312"><span class="linenos">312</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-313"><a href="#KiteConnect-313"><span class="linenos">313</span></a><span class="sd">        Invalidate refresh token.</span>
</span><span id="KiteConnect-314"><a href="#KiteConnect-314"><span class="linenos">314</span></a>
</span><span id="KiteConnect-315"><a href="#KiteConnect-315"><span class="linenos">315</span></a><span class="sd">        - `refresh_token` is the token which is used to renew access token.</span>
</span><span id="KiteConnect-316"><a href="#KiteConnect-316"><span class="linenos">316</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-317"><a href="#KiteConnect-317"><span class="linenos">317</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;api.token.invalidate&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-318"><a href="#KiteConnect-318"><span class="linenos">318</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect-319"><a href="#KiteConnect-319"><span class="linenos">319</span></a>            <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="n">refresh_token</span>
</span><span id="KiteConnect-320"><a href="#KiteConnect-320"><span class="linenos">320</span></a>        <span class="p">})</span>
</span><span id="KiteConnect-321"><a href="#KiteConnect-321"><span class="linenos">321</span></a>
</span><span id="KiteConnect-322"><a href="#KiteConnect-322"><span class="linenos">322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-323"><a href="#KiteConnect-323"><span class="linenos">323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get account balance and cash margin details for a particular segment.</span>
</span><span id="KiteConnect-324"><a href="#KiteConnect-324"><span class="linenos">324</span></a>
</span><span id="KiteConnect-325"><a href="#KiteConnect-325"><span class="linenos">325</span></a><span class="sd">        - `segment` is the trading segment (eg: equity or commodity)</span>
</span><span id="KiteConnect-326"><a href="#KiteConnect-326"><span class="linenos">326</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-327"><a href="#KiteConnect-327"><span class="linenos">327</span></a>        <span class="k">if</span> <span class="n">segment</span><span class="p">:</span>
</span><span id="KiteConnect-328"><a href="#KiteConnect-328"><span class="linenos">328</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;user.margins.segment&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;segment&quot;</span><span class="p">:</span> <span class="n">segment</span><span class="p">})</span>
</span><span id="KiteConnect-329"><a href="#KiteConnect-329"><span class="linenos">329</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect-330"><a href="#KiteConnect-330"><span class="linenos">330</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;user.margins&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-331"><a href="#KiteConnect-331"><span class="linenos">331</span></a>
</span><span id="KiteConnect-332"><a href="#KiteConnect-332"><span class="linenos">332</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-333"><a href="#KiteConnect-333"><span class="linenos">333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user profile details.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-334"><a href="#KiteConnect-334"><span class="linenos">334</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;user.profile&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-335"><a href="#KiteConnect-335"><span class="linenos">335</span></a>
</span><span id="KiteConnect-336"><a href="#KiteConnect-336"><span class="linenos">336</span></a>    <span class="c1"># orders</span>
</span><span id="KiteConnect-337"><a href="#KiteConnect-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect-338"><a href="#KiteConnect-338"><span class="linenos">338</span></a>                    <span class="n">variety</span><span class="p">,</span>
</span><span id="KiteConnect-339"><a href="#KiteConnect-339"><span class="linenos">339</span></a>                    <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect-340"><a href="#KiteConnect-340"><span class="linenos">340</span></a>                    <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-341"><a href="#KiteConnect-341"><span class="linenos">341</span></a>                    <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect-342"><a href="#KiteConnect-342"><span class="linenos">342</span></a>                    <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect-343"><a href="#KiteConnect-343"><span class="linenos">343</span></a>                    <span class="n">product</span><span class="p">,</span>
</span><span id="KiteConnect-344"><a href="#KiteConnect-344"><span class="linenos">344</span></a>                    <span class="n">order_type</span><span class="p">,</span>
</span><span id="KiteConnect-345"><a href="#KiteConnect-345"><span class="linenos">345</span></a>                    <span class="n">price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-346"><a href="#KiteConnect-346"><span class="linenos">346</span></a>                    <span class="n">validity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-347"><a href="#KiteConnect-347"><span class="linenos">347</span></a>                    <span class="n">validity_ttl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-348"><a href="#KiteConnect-348"><span class="linenos">348</span></a>                    <span class="n">disclosed_quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-349"><a href="#KiteConnect-349"><span class="linenos">349</span></a>                    <span class="n">trigger_price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-350"><a href="#KiteConnect-350"><span class="linenos">350</span></a>                    <span class="n">iceberg_legs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-351"><a href="#KiteConnect-351"><span class="linenos">351</span></a>                    <span class="n">iceberg_quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-352"><a href="#KiteConnect-352"><span class="linenos">352</span></a>                    <span class="n">auction_number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-353"><a href="#KiteConnect-353"><span class="linenos">353</span></a>                    <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-354"><a href="#KiteConnect-354"><span class="linenos">354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Place an order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-355"><a href="#KiteConnect-355"><span class="linenos">355</span></a>        <span class="n">params</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
</span><span id="KiteConnect-356"><a href="#KiteConnect-356"><span class="linenos">356</span></a>        <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;self&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-357"><a href="#KiteConnect-357"><span class="linenos">357</span></a>
</span><span id="KiteConnect-358"><a href="#KiteConnect-358"><span class="linenos">358</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="KiteConnect-359"><a href="#KiteConnect-359"><span class="linenos">359</span></a>            <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="KiteConnect-360"><a href="#KiteConnect-360"><span class="linenos">360</span></a>                <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="KiteConnect-361"><a href="#KiteConnect-361"><span class="linenos">361</span></a>
</span><span id="KiteConnect-362"><a href="#KiteConnect-362"><span class="linenos">362</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.place&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-363"><a href="#KiteConnect-363"><span class="linenos">363</span></a>                          <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;variety&quot;</span><span class="p">:</span> <span class="n">variety</span><span class="p">},</span>
</span><span id="KiteConnect-364"><a href="#KiteConnect-364"><span class="linenos">364</span></a>                          <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)[</span><span class="s2">&quot;order_id&quot;</span><span class="p">]</span>
</span><span id="KiteConnect-365"><a href="#KiteConnect-365"><span class="linenos">365</span></a>
</span><span id="KiteConnect-366"><a href="#KiteConnect-366"><span class="linenos">366</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modify_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect-367"><a href="#KiteConnect-367"><span class="linenos">367</span></a>                     <span class="n">variety</span><span class="p">,</span>
</span><span id="KiteConnect-368"><a href="#KiteConnect-368"><span class="linenos">368</span></a>                     <span class="n">order_id</span><span class="p">,</span>
</span><span id="KiteConnect-369"><a href="#KiteConnect-369"><span class="linenos">369</span></a>                     <span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-370"><a href="#KiteConnect-370"><span class="linenos">370</span></a>                     <span class="n">quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-371"><a href="#KiteConnect-371"><span class="linenos">371</span></a>                     <span class="n">price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-372"><a href="#KiteConnect-372"><span class="linenos">372</span></a>                     <span class="n">order_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-373"><a href="#KiteConnect-373"><span class="linenos">373</span></a>                     <span class="n">trigger_price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-374"><a href="#KiteConnect-374"><span class="linenos">374</span></a>                     <span class="n">validity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-375"><a href="#KiteConnect-375"><span class="linenos">375</span></a>                     <span class="n">disclosed_quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-376"><a href="#KiteConnect-376"><span class="linenos">376</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modify an open order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-377"><a href="#KiteConnect-377"><span class="linenos">377</span></a>        <span class="n">params</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
</span><span id="KiteConnect-378"><a href="#KiteConnect-378"><span class="linenos">378</span></a>        <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;self&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-379"><a href="#KiteConnect-379"><span class="linenos">379</span></a>
</span><span id="KiteConnect-380"><a href="#KiteConnect-380"><span class="linenos">380</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="KiteConnect-381"><a href="#KiteConnect-381"><span class="linenos">381</span></a>            <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="KiteConnect-382"><a href="#KiteConnect-382"><span class="linenos">382</span></a>                <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="KiteConnect-383"><a href="#KiteConnect-383"><span class="linenos">383</span></a>
</span><span id="KiteConnect-384"><a href="#KiteConnect-384"><span class="linenos">384</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;order.modify&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-385"><a href="#KiteConnect-385"><span class="linenos">385</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;variety&quot;</span><span class="p">:</span> <span class="n">variety</span><span class="p">,</span> <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">},</span>
</span><span id="KiteConnect-386"><a href="#KiteConnect-386"><span class="linenos">386</span></a>                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)[</span><span class="s2">&quot;order_id&quot;</span><span class="p">]</span>
</span><span id="KiteConnect-387"><a href="#KiteConnect-387"><span class="linenos">387</span></a>
</span><span id="KiteConnect-388"><a href="#KiteConnect-388"><span class="linenos">388</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variety</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-389"><a href="#KiteConnect-389"><span class="linenos">389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel an order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-390"><a href="#KiteConnect-390"><span class="linenos">390</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;order.cancel&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-391"><a href="#KiteConnect-391"><span class="linenos">391</span></a>                            <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;variety&quot;</span><span class="p">:</span> <span class="n">variety</span><span class="p">,</span> <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">},</span>
</span><span id="KiteConnect-392"><a href="#KiteConnect-392"><span class="linenos">392</span></a>                            <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;parent_order_id&quot;</span><span class="p">:</span> <span class="n">parent_order_id</span><span class="p">})[</span><span class="s2">&quot;order_id&quot;</span><span class="p">]</span>
</span><span id="KiteConnect-393"><a href="#KiteConnect-393"><span class="linenos">393</span></a>
</span><span id="KiteConnect-394"><a href="#KiteConnect-394"><span class="linenos">394</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">exit_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variety</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-395"><a href="#KiteConnect-395"><span class="linenos">395</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Exit a CO order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-396"><a href="#KiteConnect-396"><span class="linenos">396</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancel_order</span><span class="p">(</span><span class="n">variety</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">parent_order_id</span><span class="o">=</span><span class="n">parent_order_id</span><span class="p">)</span>
</span><span id="KiteConnect-397"><a href="#KiteConnect-397"><span class="linenos">397</span></a>
</span><span id="KiteConnect-398"><a href="#KiteConnect-398"><span class="linenos">398</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="KiteConnect-399"><a href="#KiteConnect-399"><span class="linenos">399</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse and format responses.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-400"><a href="#KiteConnect-400"><span class="linenos">400</span></a>
</span><span id="KiteConnect-401"><a href="#KiteConnect-401"><span class="linenos">401</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect-402"><a href="#KiteConnect-402"><span class="linenos">402</span></a>            <span class="n">_list</span> <span class="o">=</span> <span class="n">data</span>
</span><span id="KiteConnect-403"><a href="#KiteConnect-403"><span class="linenos">403</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="KiteConnect-404"><a href="#KiteConnect-404"><span class="linenos">404</span></a>            <span class="n">_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>
</span><span id="KiteConnect-405"><a href="#KiteConnect-405"><span class="linenos">405</span></a>
</span><span id="KiteConnect-406"><a href="#KiteConnect-406"><span class="linenos">406</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">_list</span><span class="p">:</span>
</span><span id="KiteConnect-407"><a href="#KiteConnect-407"><span class="linenos">407</span></a>            <span class="c1"># Convert date time string to datetime object</span>
</span><span id="KiteConnect-408"><a href="#KiteConnect-408"><span class="linenos">408</span></a>            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;order_timestamp&quot;</span><span class="p">,</span> <span class="s2">&quot;exchange_timestamp&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">,</span> <span class="s2">&quot;last_instalment&quot;</span><span class="p">,</span> <span class="s2">&quot;fill_timestamp&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="s2">&quot;last_trade_time&quot;</span><span class="p">]:</span>
</span><span id="KiteConnect-409"><a href="#KiteConnect-409"><span class="linenos">409</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="n">field</span><span class="p">])</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span>
</span><span id="KiteConnect-410"><a href="#KiteConnect-410"><span class="linenos">410</span></a>                    <span class="n">item</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="n">field</span><span class="p">])</span>
</span><span id="KiteConnect-411"><a href="#KiteConnect-411"><span class="linenos">411</span></a>
</span><span id="KiteConnect-412"><a href="#KiteConnect-412"><span class="linenos">412</span></a>        <span class="k">return</span> <span class="n">_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span> <span class="k">else</span> <span class="n">_list</span>
</span><span id="KiteConnect-413"><a href="#KiteConnect-413"><span class="linenos">413</span></a>
</span><span id="KiteConnect-414"><a href="#KiteConnect-414"><span class="linenos">414</span></a>    <span class="c1"># orderbook and tradebook</span>
</span><span id="KiteConnect-415"><a href="#KiteConnect-415"><span class="linenos">415</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">orders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-416"><a href="#KiteConnect-416"><span class="linenos">416</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of orders.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-417"><a href="#KiteConnect-417"><span class="linenos">417</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;orders&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-418"><a href="#KiteConnect-418"><span class="linenos">418</span></a>
</span><span id="KiteConnect-419"><a href="#KiteConnect-419"><span class="linenos">419</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">order_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">):</span>
</span><span id="KiteConnect-420"><a href="#KiteConnect-420"><span class="linenos">420</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-421"><a href="#KiteConnect-421"><span class="linenos">421</span></a><span class="sd">        Get history of individual order.</span>
</span><span id="KiteConnect-422"><a href="#KiteConnect-422"><span class="linenos">422</span></a>
</span><span id="KiteConnect-423"><a href="#KiteConnect-423"><span class="linenos">423</span></a><span class="sd">        - `order_id` is the ID of the order to retrieve order history.</span>
</span><span id="KiteConnect-424"><a href="#KiteConnect-424"><span class="linenos">424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-425"><a href="#KiteConnect-425"><span class="linenos">425</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;order.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">}))</span>
</span><span id="KiteConnect-426"><a href="#KiteConnect-426"><span class="linenos">426</span></a>
</span><span id="KiteConnect-427"><a href="#KiteConnect-427"><span class="linenos">427</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">trades</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-428"><a href="#KiteConnect-428"><span class="linenos">428</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-429"><a href="#KiteConnect-429"><span class="linenos">429</span></a><span class="sd">        Retrieve the list of trades executed (all or ones under a particular order).</span>
</span><span id="KiteConnect-430"><a href="#KiteConnect-430"><span class="linenos">430</span></a>
</span><span id="KiteConnect-431"><a href="#KiteConnect-431"><span class="linenos">431</span></a><span class="sd">        An order can be executed in tranches based on market conditions.</span>
</span><span id="KiteConnect-432"><a href="#KiteConnect-432"><span class="linenos">432</span></a><span class="sd">        These trades are individually recorded under an order.</span>
</span><span id="KiteConnect-433"><a href="#KiteConnect-433"><span class="linenos">433</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-434"><a href="#KiteConnect-434"><span class="linenos">434</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;trades&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-435"><a href="#KiteConnect-435"><span class="linenos">435</span></a>
</span><span id="KiteConnect-436"><a href="#KiteConnect-436"><span class="linenos">436</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">order_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">):</span>
</span><span id="KiteConnect-437"><a href="#KiteConnect-437"><span class="linenos">437</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-438"><a href="#KiteConnect-438"><span class="linenos">438</span></a><span class="sd">        Retrieve the list of trades executed for a particular order.</span>
</span><span id="KiteConnect-439"><a href="#KiteConnect-439"><span class="linenos">439</span></a>
</span><span id="KiteConnect-440"><a href="#KiteConnect-440"><span class="linenos">440</span></a><span class="sd">        - `order_id` is the ID of the order to retrieve trade history.</span>
</span><span id="KiteConnect-441"><a href="#KiteConnect-441"><span class="linenos">441</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-442"><a href="#KiteConnect-442"><span class="linenos">442</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;order.trades&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">}))</span>
</span><span id="KiteConnect-443"><a href="#KiteConnect-443"><span class="linenos">443</span></a>
</span><span id="KiteConnect-444"><a href="#KiteConnect-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">positions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-445"><a href="#KiteConnect-445"><span class="linenos">445</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the list of positions.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-446"><a href="#KiteConnect-446"><span class="linenos">446</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;portfolio.positions&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-447"><a href="#KiteConnect-447"><span class="linenos">447</span></a>
</span><span id="KiteConnect-448"><a href="#KiteConnect-448"><span class="linenos">448</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">holdings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-449"><a href="#KiteConnect-449"><span class="linenos">449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the list of equity holdings.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-450"><a href="#KiteConnect-450"><span class="linenos">450</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;portfolio.holdings&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-451"><a href="#KiteConnect-451"><span class="linenos">451</span></a>
</span><span id="KiteConnect-452"><a href="#KiteConnect-452"><span class="linenos">452</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_auction_instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-453"><a href="#KiteConnect-453"><span class="linenos">453</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; Retrieves list of available instruments for a auction session &quot;&quot;&quot;</span>
</span><span id="KiteConnect-454"><a href="#KiteConnect-454"><span class="linenos">454</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;portfolio.holdings.auction&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-455"><a href="#KiteConnect-455"><span class="linenos">455</span></a>
</span><span id="KiteConnect-456"><a href="#KiteConnect-456"><span class="linenos">456</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">convert_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect-457"><a href="#KiteConnect-457"><span class="linenos">457</span></a>                         <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect-458"><a href="#KiteConnect-458"><span class="linenos">458</span></a>                         <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-459"><a href="#KiteConnect-459"><span class="linenos">459</span></a>                         <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect-460"><a href="#KiteConnect-460"><span class="linenos">460</span></a>                         <span class="n">position_type</span><span class="p">,</span>
</span><span id="KiteConnect-461"><a href="#KiteConnect-461"><span class="linenos">461</span></a>                         <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect-462"><a href="#KiteConnect-462"><span class="linenos">462</span></a>                         <span class="n">old_product</span><span class="p">,</span>
</span><span id="KiteConnect-463"><a href="#KiteConnect-463"><span class="linenos">463</span></a>                         <span class="n">new_product</span><span class="p">):</span>
</span><span id="KiteConnect-464"><a href="#KiteConnect-464"><span class="linenos">464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modify an open position&#39;s product type.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-465"><a href="#KiteConnect-465"><span class="linenos">465</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;portfolio.positions.convert&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-466"><a href="#KiteConnect-466"><span class="linenos">466</span></a>            <span class="s2">&quot;exchange&quot;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect-467"><a href="#KiteConnect-467"><span class="linenos">467</span></a>            <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-468"><a href="#KiteConnect-468"><span class="linenos">468</span></a>            <span class="s2">&quot;transaction_type&quot;</span><span class="p">:</span> <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect-469"><a href="#KiteConnect-469"><span class="linenos">469</span></a>            <span class="s2">&quot;position_type&quot;</span><span class="p">:</span> <span class="n">position_type</span><span class="p">,</span>
</span><span id="KiteConnect-470"><a href="#KiteConnect-470"><span class="linenos">470</span></a>            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect-471"><a href="#KiteConnect-471"><span class="linenos">471</span></a>            <span class="s2">&quot;old_product&quot;</span><span class="p">:</span> <span class="n">old_product</span><span class="p">,</span>
</span><span id="KiteConnect-472"><a href="#KiteConnect-472"><span class="linenos">472</span></a>            <span class="s2">&quot;new_product&quot;</span><span class="p">:</span> <span class="n">new_product</span>
</span><span id="KiteConnect-473"><a href="#KiteConnect-473"><span class="linenos">473</span></a>        <span class="p">})</span>
</span><span id="KiteConnect-474"><a href="#KiteConnect-474"><span class="linenos">474</span></a>
</span><span id="KiteConnect-475"><a href="#KiteConnect-475"><span class="linenos">475</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-476"><a href="#KiteConnect-476"><span class="linenos">476</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all mutual fund orders or individual order info.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-477"><a href="#KiteConnect-477"><span class="linenos">477</span></a>        <span class="k">if</span> <span class="n">order_id</span><span class="p">:</span>
</span><span id="KiteConnect-478"><a href="#KiteConnect-478"><span class="linenos">478</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.order.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">}))</span>
</span><span id="KiteConnect-479"><a href="#KiteConnect-479"><span class="linenos">479</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect-480"><a href="#KiteConnect-480"><span class="linenos">480</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.orders&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-481"><a href="#KiteConnect-481"><span class="linenos">481</span></a>
</span><span id="KiteConnect-482"><a href="#KiteConnect-482"><span class="linenos">482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_mf_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect-483"><a href="#KiteConnect-483"><span class="linenos">483</span></a>                       <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-484"><a href="#KiteConnect-484"><span class="linenos">484</span></a>                       <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect-485"><a href="#KiteConnect-485"><span class="linenos">485</span></a>                       <span class="n">quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-486"><a href="#KiteConnect-486"><span class="linenos">486</span></a>                       <span class="n">amount</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-487"><a href="#KiteConnect-487"><span class="linenos">487</span></a>                       <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-488"><a href="#KiteConnect-488"><span class="linenos">488</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Place a mutual fund order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-489"><a href="#KiteConnect-489"><span class="linenos">489</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;mf.order.place&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-490"><a href="#KiteConnect-490"><span class="linenos">490</span></a>            <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-491"><a href="#KiteConnect-491"><span class="linenos">491</span></a>            <span class="s2">&quot;transaction_type&quot;</span><span class="p">:</span> <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect-492"><a href="#KiteConnect-492"><span class="linenos">492</span></a>            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect-493"><a href="#KiteConnect-493"><span class="linenos">493</span></a>            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect-494"><a href="#KiteConnect-494"><span class="linenos">494</span></a>            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span>
</span><span id="KiteConnect-495"><a href="#KiteConnect-495"><span class="linenos">495</span></a>        <span class="p">})</span>
</span><span id="KiteConnect-496"><a href="#KiteConnect-496"><span class="linenos">496</span></a>
</span><span id="KiteConnect-497"><a href="#KiteConnect-497"><span class="linenos">497</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_mf_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">):</span>
</span><span id="KiteConnect-498"><a href="#KiteConnect-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel a mutual fund order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-499"><a href="#KiteConnect-499"><span class="linenos">499</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;mf.order.cancel&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">})</span>
</span><span id="KiteConnect-500"><a href="#KiteConnect-500"><span class="linenos">500</span></a>
</span><span id="KiteConnect-501"><a href="#KiteConnect-501"><span class="linenos">501</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_sips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sip_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-502"><a href="#KiteConnect-502"><span class="linenos">502</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of all mutual fund SIP&#39;s or individual SIP info.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-503"><a href="#KiteConnect-503"><span class="linenos">503</span></a>        <span class="k">if</span> <span class="n">sip_id</span><span class="p">:</span>
</span><span id="KiteConnect-504"><a href="#KiteConnect-504"><span class="linenos">504</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.sip.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sip_id&quot;</span><span class="p">:</span> <span class="n">sip_id</span><span class="p">}))</span>
</span><span id="KiteConnect-505"><a href="#KiteConnect-505"><span class="linenos">505</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect-506"><a href="#KiteConnect-506"><span class="linenos">506</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.sips&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-507"><a href="#KiteConnect-507"><span class="linenos">507</span></a>
</span><span id="KiteConnect-508"><a href="#KiteConnect-508"><span class="linenos">508</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_mf_sip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect-509"><a href="#KiteConnect-509"><span class="linenos">509</span></a>                     <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-510"><a href="#KiteConnect-510"><span class="linenos">510</span></a>                     <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect-511"><a href="#KiteConnect-511"><span class="linenos">511</span></a>                     <span class="n">instalments</span><span class="p">,</span>
</span><span id="KiteConnect-512"><a href="#KiteConnect-512"><span class="linenos">512</span></a>                     <span class="n">frequency</span><span class="p">,</span>
</span><span id="KiteConnect-513"><a href="#KiteConnect-513"><span class="linenos">513</span></a>                     <span class="n">initial_amount</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-514"><a href="#KiteConnect-514"><span class="linenos">514</span></a>                     <span class="n">instalment_day</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-515"><a href="#KiteConnect-515"><span class="linenos">515</span></a>                     <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-516"><a href="#KiteConnect-516"><span class="linenos">516</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Place a mutual fund SIP.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-517"><a href="#KiteConnect-517"><span class="linenos">517</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;mf.sip.place&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-518"><a href="#KiteConnect-518"><span class="linenos">518</span></a>            <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-519"><a href="#KiteConnect-519"><span class="linenos">519</span></a>            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect-520"><a href="#KiteConnect-520"><span class="linenos">520</span></a>            <span class="s2">&quot;initial_amount&quot;</span><span class="p">:</span> <span class="n">initial_amount</span><span class="p">,</span>
</span><span id="KiteConnect-521"><a href="#KiteConnect-521"><span class="linenos">521</span></a>            <span class="s2">&quot;instalments&quot;</span><span class="p">:</span> <span class="n">instalments</span><span class="p">,</span>
</span><span id="KiteConnect-522"><a href="#KiteConnect-522"><span class="linenos">522</span></a>            <span class="s2">&quot;frequency&quot;</span><span class="p">:</span> <span class="n">frequency</span><span class="p">,</span>
</span><span id="KiteConnect-523"><a href="#KiteConnect-523"><span class="linenos">523</span></a>            <span class="s2">&quot;instalment_day&quot;</span><span class="p">:</span> <span class="n">instalment_day</span><span class="p">,</span>
</span><span id="KiteConnect-524"><a href="#KiteConnect-524"><span class="linenos">524</span></a>            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span>
</span><span id="KiteConnect-525"><a href="#KiteConnect-525"><span class="linenos">525</span></a>        <span class="p">})</span>
</span><span id="KiteConnect-526"><a href="#KiteConnect-526"><span class="linenos">526</span></a>
</span><span id="KiteConnect-527"><a href="#KiteConnect-527"><span class="linenos">527</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modify_mf_sip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect-528"><a href="#KiteConnect-528"><span class="linenos">528</span></a>                      <span class="n">sip_id</span><span class="p">,</span>
</span><span id="KiteConnect-529"><a href="#KiteConnect-529"><span class="linenos">529</span></a>                      <span class="n">amount</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-530"><a href="#KiteConnect-530"><span class="linenos">530</span></a>                      <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-531"><a href="#KiteConnect-531"><span class="linenos">531</span></a>                      <span class="n">instalments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-532"><a href="#KiteConnect-532"><span class="linenos">532</span></a>                      <span class="n">frequency</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-533"><a href="#KiteConnect-533"><span class="linenos">533</span></a>                      <span class="n">instalment_day</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-534"><a href="#KiteConnect-534"><span class="linenos">534</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modify a mutual fund SIP.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-535"><a href="#KiteConnect-535"><span class="linenos">535</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;mf.sip.modify&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-536"><a href="#KiteConnect-536"><span class="linenos">536</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sip_id&quot;</span><span class="p">:</span> <span class="n">sip_id</span><span class="p">},</span>
</span><span id="KiteConnect-537"><a href="#KiteConnect-537"><span class="linenos">537</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-538"><a href="#KiteConnect-538"><span class="linenos">538</span></a>                             <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect-539"><a href="#KiteConnect-539"><span class="linenos">539</span></a>                             <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">status</span><span class="p">,</span>
</span><span id="KiteConnect-540"><a href="#KiteConnect-540"><span class="linenos">540</span></a>                             <span class="s2">&quot;instalments&quot;</span><span class="p">:</span> <span class="n">instalments</span><span class="p">,</span>
</span><span id="KiteConnect-541"><a href="#KiteConnect-541"><span class="linenos">541</span></a>                             <span class="s2">&quot;frequency&quot;</span><span class="p">:</span> <span class="n">frequency</span><span class="p">,</span>
</span><span id="KiteConnect-542"><a href="#KiteConnect-542"><span class="linenos">542</span></a>                             <span class="s2">&quot;instalment_day&quot;</span><span class="p">:</span> <span class="n">instalment_day</span>
</span><span id="KiteConnect-543"><a href="#KiteConnect-543"><span class="linenos">543</span></a>                         <span class="p">})</span>
</span><span id="KiteConnect-544"><a href="#KiteConnect-544"><span class="linenos">544</span></a>
</span><span id="KiteConnect-545"><a href="#KiteConnect-545"><span class="linenos">545</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_mf_sip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sip_id</span><span class="p">):</span>
</span><span id="KiteConnect-546"><a href="#KiteConnect-546"><span class="linenos">546</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel a mutual fund SIP.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-547"><a href="#KiteConnect-547"><span class="linenos">547</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;mf.sip.cancel&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sip_id&quot;</span><span class="p">:</span> <span class="n">sip_id</span><span class="p">})</span>
</span><span id="KiteConnect-548"><a href="#KiteConnect-548"><span class="linenos">548</span></a>
</span><span id="KiteConnect-549"><a href="#KiteConnect-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_holdings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-550"><a href="#KiteConnect-550"><span class="linenos">550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of mutual fund holdings.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-551"><a href="#KiteConnect-551"><span class="linenos">551</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.holdings&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-552"><a href="#KiteConnect-552"><span class="linenos">552</span></a>
</span><span id="KiteConnect-553"><a href="#KiteConnect-553"><span class="linenos">553</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-554"><a href="#KiteConnect-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of mutual fund instruments.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-555"><a href="#KiteConnect-555"><span class="linenos">555</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_mf_instruments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.instruments&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-556"><a href="#KiteConnect-556"><span class="linenos">556</span></a>
</span><span id="KiteConnect-557"><a href="#KiteConnect-557"><span class="linenos">557</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-558"><a href="#KiteConnect-558"><span class="linenos">558</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-559"><a href="#KiteConnect-559"><span class="linenos">559</span></a><span class="sd">        Retrieve the list of market instruments available to trade.</span>
</span><span id="KiteConnect-560"><a href="#KiteConnect-560"><span class="linenos">560</span></a>
</span><span id="KiteConnect-561"><a href="#KiteConnect-561"><span class="linenos">561</span></a><span class="sd">        Note that the results could be large, several hundred KBs in size,</span>
</span><span id="KiteConnect-562"><a href="#KiteConnect-562"><span class="linenos">562</span></a><span class="sd">        with tens of thousands of entries in the list.</span>
</span><span id="KiteConnect-563"><a href="#KiteConnect-563"><span class="linenos">563</span></a>
</span><span id="KiteConnect-564"><a href="#KiteConnect-564"><span class="linenos">564</span></a><span class="sd">        - `exchange` is specific exchange to fetch (Optional)</span>
</span><span id="KiteConnect-565"><a href="#KiteConnect-565"><span class="linenos">565</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-566"><a href="#KiteConnect-566"><span class="linenos">566</span></a>        <span class="k">if</span> <span class="n">exchange</span><span class="p">:</span>
</span><span id="KiteConnect-567"><a href="#KiteConnect-567"><span class="linenos">567</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_instruments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.instruments&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;exchange&quot;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">}))</span>
</span><span id="KiteConnect-568"><a href="#KiteConnect-568"><span class="linenos">568</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect-569"><a href="#KiteConnect-569"><span class="linenos">569</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_instruments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.instruments.all&quot;</span><span class="p">))</span>
</span><span id="KiteConnect-570"><a href="#KiteConnect-570"><span class="linenos">570</span></a>
</span><span id="KiteConnect-571"><a href="#KiteConnect-571"><span class="linenos">571</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">quote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect-572"><a href="#KiteConnect-572"><span class="linenos">572</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-573"><a href="#KiteConnect-573"><span class="linenos">573</span></a><span class="sd">        Retrieve quote for list of instruments.</span>
</span><span id="KiteConnect-574"><a href="#KiteConnect-574"><span class="linenos">574</span></a>
</span><span id="KiteConnect-575"><a href="#KiteConnect-575"><span class="linenos">575</span></a><span class="sd">        - `instruments` is a list of instruments, Instrument are in the format of `exchange:tradingsymbol`. For example NSE:INFY</span>
</span><span id="KiteConnect-576"><a href="#KiteConnect-576"><span class="linenos">576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-577"><a href="#KiteConnect-577"><span class="linenos">577</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect-578"><a href="#KiteConnect-578"><span class="linenos">578</span></a>
</span><span id="KiteConnect-579"><a href="#KiteConnect-579"><span class="linenos">579</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect-580"><a href="#KiteConnect-580"><span class="linenos">580</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect-581"><a href="#KiteConnect-581"><span class="linenos">581</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect-582"><a href="#KiteConnect-582"><span class="linenos">582</span></a>
</span><span id="KiteConnect-583"><a href="#KiteConnect-583"><span class="linenos">583</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.quote&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span><span id="KiteConnect-584"><a href="#KiteConnect-584"><span class="linenos">584</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">}</span>
</span><span id="KiteConnect-585"><a href="#KiteConnect-585"><span class="linenos">585</span></a>
</span><span id="KiteConnect-586"><a href="#KiteConnect-586"><span class="linenos">586</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ohlc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect-587"><a href="#KiteConnect-587"><span class="linenos">587</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-588"><a href="#KiteConnect-588"><span class="linenos">588</span></a><span class="sd">        Retrieve OHLC and market depth for list of instruments.</span>
</span><span id="KiteConnect-589"><a href="#KiteConnect-589"><span class="linenos">589</span></a>
</span><span id="KiteConnect-590"><a href="#KiteConnect-590"><span class="linenos">590</span></a><span class="sd">        - `instruments` is a list of instruments, Instrument are in the format of `exchange:tradingsymbol`. For example NSE:INFY</span>
</span><span id="KiteConnect-591"><a href="#KiteConnect-591"><span class="linenos">591</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-592"><a href="#KiteConnect-592"><span class="linenos">592</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect-593"><a href="#KiteConnect-593"><span class="linenos">593</span></a>
</span><span id="KiteConnect-594"><a href="#KiteConnect-594"><span class="linenos">594</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect-595"><a href="#KiteConnect-595"><span class="linenos">595</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect-596"><a href="#KiteConnect-596"><span class="linenos">596</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect-597"><a href="#KiteConnect-597"><span class="linenos">597</span></a>
</span><span id="KiteConnect-598"><a href="#KiteConnect-598"><span class="linenos">598</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.quote.ohlc&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span><span id="KiteConnect-599"><a href="#KiteConnect-599"><span class="linenos">599</span></a>
</span><span id="KiteConnect-600"><a href="#KiteConnect-600"><span class="linenos">600</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ltp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect-601"><a href="#KiteConnect-601"><span class="linenos">601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-602"><a href="#KiteConnect-602"><span class="linenos">602</span></a><span class="sd">        Retrieve last price for list of instruments.</span>
</span><span id="KiteConnect-603"><a href="#KiteConnect-603"><span class="linenos">603</span></a>
</span><span id="KiteConnect-604"><a href="#KiteConnect-604"><span class="linenos">604</span></a><span class="sd">        - `instruments` is a list of instruments, Instrument are in the format of `exchange:tradingsymbol`. For example NSE:INFY</span>
</span><span id="KiteConnect-605"><a href="#KiteConnect-605"><span class="linenos">605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-606"><a href="#KiteConnect-606"><span class="linenos">606</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect-607"><a href="#KiteConnect-607"><span class="linenos">607</span></a>
</span><span id="KiteConnect-608"><a href="#KiteConnect-608"><span class="linenos">608</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect-609"><a href="#KiteConnect-609"><span class="linenos">609</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect-610"><a href="#KiteConnect-610"><span class="linenos">610</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect-611"><a href="#KiteConnect-611"><span class="linenos">611</span></a>
</span><span id="KiteConnect-612"><a href="#KiteConnect-612"><span class="linenos">612</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.quote.ltp&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span><span id="KiteConnect-613"><a href="#KiteConnect-613"><span class="linenos">613</span></a>
</span><span id="KiteConnect-614"><a href="#KiteConnect-614"><span class="linenos">614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">historical_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument_token</span><span class="p">,</span> <span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">continuous</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">oi</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="KiteConnect-615"><a href="#KiteConnect-615"><span class="linenos">615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-616"><a href="#KiteConnect-616"><span class="linenos">616</span></a><span class="sd">        Retrieve historical data (candles) for an instrument.</span>
</span><span id="KiteConnect-617"><a href="#KiteConnect-617"><span class="linenos">617</span></a>
</span><span id="KiteConnect-618"><a href="#KiteConnect-618"><span class="linenos">618</span></a><span class="sd">        Although the actual response JSON from the API does not have field</span>
</span><span id="KiteConnect-619"><a href="#KiteConnect-619"><span class="linenos">619</span></a><span class="sd">        names such has &#39;open&#39;, &#39;high&#39; etc., this function call structures</span>
</span><span id="KiteConnect-620"><a href="#KiteConnect-620"><span class="linenos">620</span></a><span class="sd">        the data into an array of objects with field names. For example:</span>
</span><span id="KiteConnect-621"><a href="#KiteConnect-621"><span class="linenos">621</span></a>
</span><span id="KiteConnect-622"><a href="#KiteConnect-622"><span class="linenos">622</span></a><span class="sd">        - `instrument_token` is the instrument identifier (retrieved from the instruments()) call.</span>
</span><span id="KiteConnect-623"><a href="#KiteConnect-623"><span class="linenos">623</span></a><span class="sd">        - `from_date` is the From date (datetime object or string in format of yyyy-mm-dd HH:MM:SS.</span>
</span><span id="KiteConnect-624"><a href="#KiteConnect-624"><span class="linenos">624</span></a><span class="sd">        - `to_date` is the To date (datetime object or string in format of yyyy-mm-dd HH:MM:SS).</span>
</span><span id="KiteConnect-625"><a href="#KiteConnect-625"><span class="linenos">625</span></a><span class="sd">        - `interval` is the candle interval (minute, day, 5 minute etc.).</span>
</span><span id="KiteConnect-626"><a href="#KiteConnect-626"><span class="linenos">626</span></a><span class="sd">        - `continuous` is a boolean flag to get continuous data for futures and options instruments.</span>
</span><span id="KiteConnect-627"><a href="#KiteConnect-627"><span class="linenos">627</span></a><span class="sd">        - `oi` is a boolean flag to get open interest.</span>
</span><span id="KiteConnect-628"><a href="#KiteConnect-628"><span class="linenos">628</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-629"><a href="#KiteConnect-629"><span class="linenos">629</span></a>        <span class="n">date_string_format</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span>
</span><span id="KiteConnect-630"><a href="#KiteConnect-630"><span class="linenos">630</span></a>        <span class="n">from_date_string</span> <span class="o">=</span> <span class="n">from_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_string_format</span><span class="p">)</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">from_date</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="k">else</span> <span class="n">from_date</span>
</span><span id="KiteConnect-631"><a href="#KiteConnect-631"><span class="linenos">631</span></a>        <span class="n">to_date_string</span> <span class="o">=</span> <span class="n">to_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_string_format</span><span class="p">)</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">to_date</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="k">else</span> <span class="n">to_date</span>
</span><span id="KiteConnect-632"><a href="#KiteConnect-632"><span class="linenos">632</span></a>
</span><span id="KiteConnect-633"><a href="#KiteConnect-633"><span class="linenos">633</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.historical&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-634"><a href="#KiteConnect-634"><span class="linenos">634</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;instrument_token&quot;</span><span class="p">:</span> <span class="n">instrument_token</span><span class="p">,</span> <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="n">interval</span><span class="p">},</span>
</span><span id="KiteConnect-635"><a href="#KiteConnect-635"><span class="linenos">635</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-636"><a href="#KiteConnect-636"><span class="linenos">636</span></a>                             <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">from_date_string</span><span class="p">,</span>
</span><span id="KiteConnect-637"><a href="#KiteConnect-637"><span class="linenos">637</span></a>                             <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">to_date_string</span><span class="p">,</span>
</span><span id="KiteConnect-638"><a href="#KiteConnect-638"><span class="linenos">638</span></a>                             <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="n">interval</span><span class="p">,</span>
</span><span id="KiteConnect-639"><a href="#KiteConnect-639"><span class="linenos">639</span></a>                             <span class="s2">&quot;continuous&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">continuous</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="KiteConnect-640"><a href="#KiteConnect-640"><span class="linenos">640</span></a>                             <span class="s2">&quot;oi&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">oi</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="KiteConnect-641"><a href="#KiteConnect-641"><span class="linenos">641</span></a>                         <span class="p">})</span>
</span><span id="KiteConnect-642"><a href="#KiteConnect-642"><span class="linenos">642</span></a>
</span><span id="KiteConnect-643"><a href="#KiteConnect-643"><span class="linenos">643</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_historical</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="KiteConnect-644"><a href="#KiteConnect-644"><span class="linenos">644</span></a>
</span><span id="KiteConnect-645"><a href="#KiteConnect-645"><span class="linenos">645</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_format_historical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="KiteConnect-646"><a href="#KiteConnect-646"><span class="linenos">646</span></a>        <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteConnect-647"><a href="#KiteConnect-647"><span class="linenos">647</span></a>        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;candles&quot;</span><span class="p">]:</span>
</span><span id="KiteConnect-648"><a href="#KiteConnect-648"><span class="linenos">648</span></a>            <span class="n">record</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteConnect-649"><a href="#KiteConnect-649"><span class="linenos">649</span></a>                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="KiteConnect-650"><a href="#KiteConnect-650"><span class="linenos">650</span></a>                <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="KiteConnect-651"><a href="#KiteConnect-651"><span class="linenos">651</span></a>                <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span id="KiteConnect-652"><a href="#KiteConnect-652"><span class="linenos">652</span></a>                <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span id="KiteConnect-653"><a href="#KiteConnect-653"><span class="linenos">653</span></a>                <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="KiteConnect-654"><a href="#KiteConnect-654"><span class="linenos">654</span></a>                <span class="s2">&quot;volume&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
</span><span id="KiteConnect-655"><a href="#KiteConnect-655"><span class="linenos">655</span></a>            <span class="p">}</span>
</span><span id="KiteConnect-656"><a href="#KiteConnect-656"><span class="linenos">656</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="KiteConnect-657"><a href="#KiteConnect-657"><span class="linenos">657</span></a>                <span class="n">record</span><span class="p">[</span><span class="s2">&quot;oi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
</span><span id="KiteConnect-658"><a href="#KiteConnect-658"><span class="linenos">658</span></a>            <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</span><span id="KiteConnect-659"><a href="#KiteConnect-659"><span class="linenos">659</span></a>
</span><span id="KiteConnect-660"><a href="#KiteConnect-660"><span class="linenos">660</span></a>        <span class="k">return</span> <span class="n">records</span>
</span><span id="KiteConnect-661"><a href="#KiteConnect-661"><span class="linenos">661</span></a>
</span><span id="KiteConnect-662"><a href="#KiteConnect-662"><span class="linenos">662</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">trigger_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect-663"><a href="#KiteConnect-663"><span class="linenos">663</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the buy/sell trigger range for Cover Orders.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-664"><a href="#KiteConnect-664"><span class="linenos">664</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect-665"><a href="#KiteConnect-665"><span class="linenos">665</span></a>
</span><span id="KiteConnect-666"><a href="#KiteConnect-666"><span class="linenos">666</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect-667"><a href="#KiteConnect-667"><span class="linenos">667</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect-668"><a href="#KiteConnect-668"><span class="linenos">668</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect-669"><a href="#KiteConnect-669"><span class="linenos">669</span></a>
</span><span id="KiteConnect-670"><a href="#KiteConnect-670"><span class="linenos">670</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.trigger_range&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-671"><a href="#KiteConnect-671"><span class="linenos">671</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;transaction_type&quot;</span><span class="p">:</span> <span class="n">transaction_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()},</span>
</span><span id="KiteConnect-672"><a href="#KiteConnect-672"><span class="linenos">672</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span><span id="KiteConnect-673"><a href="#KiteConnect-673"><span class="linenos">673</span></a>
</span><span id="KiteConnect-674"><a href="#KiteConnect-674"><span class="linenos">674</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_gtts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-675"><a href="#KiteConnect-675"><span class="linenos">675</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch list of gtt existing in an account&quot;&quot;&quot;</span>
</span><span id="KiteConnect-676"><a href="#KiteConnect-676"><span class="linenos">676</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;gtt&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-677"><a href="#KiteConnect-677"><span class="linenos">677</span></a>
</span><span id="KiteConnect-678"><a href="#KiteConnect-678"><span class="linenos">678</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_gtt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigger_id</span><span class="p">):</span>
</span><span id="KiteConnect-679"><a href="#KiteConnect-679"><span class="linenos">679</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch details of a GTT&quot;&quot;&quot;</span>
</span><span id="KiteConnect-680"><a href="#KiteConnect-680"><span class="linenos">680</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;gtt.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;trigger_id&quot;</span><span class="p">:</span> <span class="n">trigger_id</span><span class="p">})</span>
</span><span id="KiteConnect-681"><a href="#KiteConnect-681"><span class="linenos">681</span></a>
</span><span id="KiteConnect-682"><a href="#KiteConnect-682"><span class="linenos">682</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_gtt_payload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span><span class="p">):</span>
</span><span id="KiteConnect-683"><a href="#KiteConnect-683"><span class="linenos">683</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get GTT payload&quot;&quot;&quot;</span>
</span><span id="KiteConnect-684"><a href="#KiteConnect-684"><span class="linenos">684</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">trigger_values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect-685"><a href="#KiteConnect-685"><span class="linenos">685</span></a>            <span class="k">raise</span> <span class="n">ex</span><span class="o">.</span><span class="n">InputException</span><span class="p">(</span><span class="s2">&quot;invalid type for `trigger_values`&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-686"><a href="#KiteConnect-686"><span class="linenos">686</span></a>        <span class="k">if</span> <span class="n">trigger_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">GTT_TYPE_SINGLE</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">trigger_values</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="KiteConnect-687"><a href="#KiteConnect-687"><span class="linenos">687</span></a>            <span class="k">raise</span> <span class="n">ex</span><span class="o">.</span><span class="n">InputException</span><span class="p">(</span><span class="s2">&quot;invalid `trigger_values` for single leg order type&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-688"><a href="#KiteConnect-688"><span class="linenos">688</span></a>        <span class="k">elif</span> <span class="n">trigger_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">GTT_TYPE_OCO</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">trigger_values</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="KiteConnect-689"><a href="#KiteConnect-689"><span class="linenos">689</span></a>            <span class="k">raise</span> <span class="n">ex</span><span class="o">.</span><span class="n">InputException</span><span class="p">(</span><span class="s2">&quot;invalid `trigger_values` for OCO order type&quot;</span><span class="p">)</span>
</span><span id="KiteConnect-690"><a href="#KiteConnect-690"><span class="linenos">690</span></a>
</span><span id="KiteConnect-691"><a href="#KiteConnect-691"><span class="linenos">691</span></a>        <span class="n">condition</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteConnect-692"><a href="#KiteConnect-692"><span class="linenos">692</span></a>            <span class="s2">&quot;exchange&quot;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect-693"><a href="#KiteConnect-693"><span class="linenos">693</span></a>            <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-694"><a href="#KiteConnect-694"><span class="linenos">694</span></a>            <span class="s2">&quot;trigger_values&quot;</span><span class="p">:</span> <span class="n">trigger_values</span><span class="p">,</span>
</span><span id="KiteConnect-695"><a href="#KiteConnect-695"><span class="linenos">695</span></a>            <span class="s2">&quot;last_price&quot;</span><span class="p">:</span> <span class="n">last_price</span><span class="p">,</span>
</span><span id="KiteConnect-696"><a href="#KiteConnect-696"><span class="linenos">696</span></a>        <span class="p">}</span>
</span><span id="KiteConnect-697"><a href="#KiteConnect-697"><span class="linenos">697</span></a>
</span><span id="KiteConnect-698"><a href="#KiteConnect-698"><span class="linenos">698</span></a>        <span class="n">gtt_orders</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteConnect-699"><a href="#KiteConnect-699"><span class="linenos">699</span></a>        <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">:</span>
</span><span id="KiteConnect-700"><a href="#KiteConnect-700"><span class="linenos">700</span></a>            <span class="c1"># Assert required keys inside gtt order.</span>
</span><span id="KiteConnect-701"><a href="#KiteConnect-701"><span class="linenos">701</span></a>            <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;transaction_type&quot;</span><span class="p">,</span> <span class="s2">&quot;quantity&quot;</span><span class="p">,</span> <span class="s2">&quot;order_type&quot;</span><span class="p">,</span> <span class="s2">&quot;product&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">]:</span>
</span><span id="KiteConnect-702"><a href="#KiteConnect-702"><span class="linenos">702</span></a>                <span class="k">if</span> <span class="n">req</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">o</span><span class="p">:</span>
</span><span id="KiteConnect-703"><a href="#KiteConnect-703"><span class="linenos">703</span></a>                    <span class="k">raise</span> <span class="n">ex</span><span class="o">.</span><span class="n">InputException</span><span class="p">(</span><span class="s2">&quot;`</span><span class="si">{req}</span><span class="s2">` missing inside orders&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">req</span><span class="o">=</span><span class="n">req</span><span class="p">))</span>
</span><span id="KiteConnect-704"><a href="#KiteConnect-704"><span class="linenos">704</span></a>            <span class="n">gtt_orders</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="KiteConnect-705"><a href="#KiteConnect-705"><span class="linenos">705</span></a>                <span class="s2">&quot;exchange&quot;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect-706"><a href="#KiteConnect-706"><span class="linenos">706</span></a>                <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect-707"><a href="#KiteConnect-707"><span class="linenos">707</span></a>                <span class="s2">&quot;transaction_type&quot;</span><span class="p">:</span> <span class="n">o</span><span class="p">[</span><span class="s2">&quot;transaction_type&quot;</span><span class="p">],</span>
</span><span id="KiteConnect-708"><a href="#KiteConnect-708"><span class="linenos">708</span></a>                <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]),</span>
</span><span id="KiteConnect-709"><a href="#KiteConnect-709"><span class="linenos">709</span></a>                <span class="s2">&quot;order_type&quot;</span><span class="p">:</span> <span class="n">o</span><span class="p">[</span><span class="s2">&quot;order_type&quot;</span><span class="p">],</span>
</span><span id="KiteConnect-710"><a href="#KiteConnect-710"><span class="linenos">710</span></a>                <span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="n">o</span><span class="p">[</span><span class="s2">&quot;product&quot;</span><span class="p">],</span>
</span><span id="KiteConnect-711"><a href="#KiteConnect-711"><span class="linenos">711</span></a>                <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]),</span>
</span><span id="KiteConnect-712"><a href="#KiteConnect-712"><span class="linenos">712</span></a>            <span class="p">})</span>
</span><span id="KiteConnect-713"><a href="#KiteConnect-713"><span class="linenos">713</span></a>
</span><span id="KiteConnect-714"><a href="#KiteConnect-714"><span class="linenos">714</span></a>        <span class="k">return</span> <span class="n">condition</span><span class="p">,</span> <span class="n">gtt_orders</span>
</span><span id="KiteConnect-715"><a href="#KiteConnect-715"><span class="linenos">715</span></a>
</span><span id="KiteConnect-716"><a href="#KiteConnect-716"><span class="linenos">716</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_gtt</span><span class="p">(</span>
</span><span id="KiteConnect-717"><a href="#KiteConnect-717"><span class="linenos">717</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span>
</span><span id="KiteConnect-718"><a href="#KiteConnect-718"><span class="linenos">718</span></a>    <span class="p">):</span>
</span><span id="KiteConnect-719"><a href="#KiteConnect-719"><span class="linenos">719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-720"><a href="#KiteConnect-720"><span class="linenos">720</span></a><span class="sd">        Place GTT order</span>
</span><span id="KiteConnect-721"><a href="#KiteConnect-721"><span class="linenos">721</span></a>
</span><span id="KiteConnect-722"><a href="#KiteConnect-722"><span class="linenos">722</span></a><span class="sd">        - `trigger_type` The type of GTT order(single/two-leg).</span>
</span><span id="KiteConnect-723"><a href="#KiteConnect-723"><span class="linenos">723</span></a><span class="sd">        - `tradingsymbol` Trading symbol of the instrument.</span>
</span><span id="KiteConnect-724"><a href="#KiteConnect-724"><span class="linenos">724</span></a><span class="sd">        - `exchange` Name of the exchange.</span>
</span><span id="KiteConnect-725"><a href="#KiteConnect-725"><span class="linenos">725</span></a><span class="sd">        - `trigger_values` Trigger values (json array).</span>
</span><span id="KiteConnect-726"><a href="#KiteConnect-726"><span class="linenos">726</span></a><span class="sd">        - `last_price` Last price of the instrument at the time of order placement.</span>
</span><span id="KiteConnect-727"><a href="#KiteConnect-727"><span class="linenos">727</span></a><span class="sd">        - `orders` JSON order array containing following fields</span>
</span><span id="KiteConnect-728"><a href="#KiteConnect-728"><span class="linenos">728</span></a><span class="sd">            - `transaction_type` BUY or SELL</span>
</span><span id="KiteConnect-729"><a href="#KiteConnect-729"><span class="linenos">729</span></a><span class="sd">            - `quantity` Quantity to transact</span>
</span><span id="KiteConnect-730"><a href="#KiteConnect-730"><span class="linenos">730</span></a><span class="sd">            - `price` The min or max price to execute the order at (for LIMIT orders)</span>
</span><span id="KiteConnect-731"><a href="#KiteConnect-731"><span class="linenos">731</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-732"><a href="#KiteConnect-732"><span class="linenos">732</span></a>        <span class="c1"># Validations.</span>
</span><span id="KiteConnect-733"><a href="#KiteConnect-733"><span class="linenos">733</span></a>        <span class="k">assert</span> <span class="n">trigger_type</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GTT_TYPE_OCO</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GTT_TYPE_SINGLE</span><span class="p">]</span>
</span><span id="KiteConnect-734"><a href="#KiteConnect-734"><span class="linenos">734</span></a>        <span class="n">condition</span><span class="p">,</span> <span class="n">gtt_orders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_gtt_payload</span><span class="p">(</span><span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span><span class="p">)</span>
</span><span id="KiteConnect-735"><a href="#KiteConnect-735"><span class="linenos">735</span></a>
</span><span id="KiteConnect-736"><a href="#KiteConnect-736"><span class="linenos">736</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;gtt.place&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-737"><a href="#KiteConnect-737"><span class="linenos">737</span></a>            <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">condition</span><span class="p">),</span>
</span><span id="KiteConnect-738"><a href="#KiteConnect-738"><span class="linenos">738</span></a>            <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">gtt_orders</span><span class="p">),</span>
</span><span id="KiteConnect-739"><a href="#KiteConnect-739"><span class="linenos">739</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">trigger_type</span><span class="p">})</span>
</span><span id="KiteConnect-740"><a href="#KiteConnect-740"><span class="linenos">740</span></a>
</span><span id="KiteConnect-741"><a href="#KiteConnect-741"><span class="linenos">741</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modify_gtt</span><span class="p">(</span>
</span><span id="KiteConnect-742"><a href="#KiteConnect-742"><span class="linenos">742</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">trigger_id</span><span class="p">,</span> <span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span>
</span><span id="KiteConnect-743"><a href="#KiteConnect-743"><span class="linenos">743</span></a>    <span class="p">):</span>
</span><span id="KiteConnect-744"><a href="#KiteConnect-744"><span class="linenos">744</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-745"><a href="#KiteConnect-745"><span class="linenos">745</span></a><span class="sd">        Modify GTT order</span>
</span><span id="KiteConnect-746"><a href="#KiteConnect-746"><span class="linenos">746</span></a>
</span><span id="KiteConnect-747"><a href="#KiteConnect-747"><span class="linenos">747</span></a><span class="sd">        - `trigger_type` The type of GTT order(single/two-leg).</span>
</span><span id="KiteConnect-748"><a href="#KiteConnect-748"><span class="linenos">748</span></a><span class="sd">        - `tradingsymbol` Trading symbol of the instrument.</span>
</span><span id="KiteConnect-749"><a href="#KiteConnect-749"><span class="linenos">749</span></a><span class="sd">        - `exchange` Name of the exchange.</span>
</span><span id="KiteConnect-750"><a href="#KiteConnect-750"><span class="linenos">750</span></a><span class="sd">        - `trigger_values` Trigger values (json array).</span>
</span><span id="KiteConnect-751"><a href="#KiteConnect-751"><span class="linenos">751</span></a><span class="sd">        - `last_price` Last price of the instrument at the time of order placement.</span>
</span><span id="KiteConnect-752"><a href="#KiteConnect-752"><span class="linenos">752</span></a><span class="sd">        - `orders` JSON order array containing following fields</span>
</span><span id="KiteConnect-753"><a href="#KiteConnect-753"><span class="linenos">753</span></a><span class="sd">            - `transaction_type` BUY or SELL</span>
</span><span id="KiteConnect-754"><a href="#KiteConnect-754"><span class="linenos">754</span></a><span class="sd">            - `quantity` Quantity to transact</span>
</span><span id="KiteConnect-755"><a href="#KiteConnect-755"><span class="linenos">755</span></a><span class="sd">            - `price` The min or max price to execute the order at (for LIMIT orders)</span>
</span><span id="KiteConnect-756"><a href="#KiteConnect-756"><span class="linenos">756</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-757"><a href="#KiteConnect-757"><span class="linenos">757</span></a>        <span class="n">condition</span><span class="p">,</span> <span class="n">gtt_orders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_gtt_payload</span><span class="p">(</span><span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span><span class="p">)</span>
</span><span id="KiteConnect-758"><a href="#KiteConnect-758"><span class="linenos">758</span></a>
</span><span id="KiteConnect-759"><a href="#KiteConnect-759"><span class="linenos">759</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;gtt.modify&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-760"><a href="#KiteConnect-760"><span class="linenos">760</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;trigger_id&quot;</span><span class="p">:</span> <span class="n">trigger_id</span><span class="p">},</span>
</span><span id="KiteConnect-761"><a href="#KiteConnect-761"><span class="linenos">761</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect-762"><a href="#KiteConnect-762"><span class="linenos">762</span></a>                             <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">condition</span><span class="p">),</span>
</span><span id="KiteConnect-763"><a href="#KiteConnect-763"><span class="linenos">763</span></a>                             <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">gtt_orders</span><span class="p">),</span>
</span><span id="KiteConnect-764"><a href="#KiteConnect-764"><span class="linenos">764</span></a>                             <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">trigger_type</span><span class="p">})</span>
</span><span id="KiteConnect-765"><a href="#KiteConnect-765"><span class="linenos">765</span></a>
</span><span id="KiteConnect-766"><a href="#KiteConnect-766"><span class="linenos">766</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_gtt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigger_id</span><span class="p">):</span>
</span><span id="KiteConnect-767"><a href="#KiteConnect-767"><span class="linenos">767</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a GTT order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-768"><a href="#KiteConnect-768"><span class="linenos">768</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;gtt.delete&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;trigger_id&quot;</span><span class="p">:</span> <span class="n">trigger_id</span><span class="p">})</span>
</span><span id="KiteConnect-769"><a href="#KiteConnect-769"><span class="linenos">769</span></a>
</span><span id="KiteConnect-770"><a href="#KiteConnect-770"><span class="linenos">770</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">order_margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="KiteConnect-771"><a href="#KiteConnect-771"><span class="linenos">771</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-772"><a href="#KiteConnect-772"><span class="linenos">772</span></a><span class="sd">        Calculate margins for requested order list considering the existing positions and open orders</span>
</span><span id="KiteConnect-773"><a href="#KiteConnect-773"><span class="linenos">773</span></a>
</span><span id="KiteConnect-774"><a href="#KiteConnect-774"><span class="linenos">774</span></a><span class="sd">        - `params` is list of orders to retrive margins detail</span>
</span><span id="KiteConnect-775"><a href="#KiteConnect-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-776"><a href="#KiteConnect-776"><span class="linenos">776</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.margins&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="KiteConnect-777"><a href="#KiteConnect-777"><span class="linenos">777</span></a>
</span><span id="KiteConnect-778"><a href="#KiteConnect-778"><span class="linenos">778</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">basket_order_margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">consider_positions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-779"><a href="#KiteConnect-779"><span class="linenos">779</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-780"><a href="#KiteConnect-780"><span class="linenos">780</span></a><span class="sd">        Calculate total margins required for basket of orders including margin benefits</span>
</span><span id="KiteConnect-781"><a href="#KiteConnect-781"><span class="linenos">781</span></a>
</span><span id="KiteConnect-782"><a href="#KiteConnect-782"><span class="linenos">782</span></a><span class="sd">        - `params` is list of orders to fetch basket margin</span>
</span><span id="KiteConnect-783"><a href="#KiteConnect-783"><span class="linenos">783</span></a><span class="sd">        - `consider_positions` is a boolean to consider users positions</span>
</span><span id="KiteConnect-784"><a href="#KiteConnect-784"><span class="linenos">784</span></a><span class="sd">        - `mode` is margin response mode type. compact - Compact mode will only give the total margins</span>
</span><span id="KiteConnect-785"><a href="#KiteConnect-785"><span class="linenos">785</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-786"><a href="#KiteConnect-786"><span class="linenos">786</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.margins.basket&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-787"><a href="#KiteConnect-787"><span class="linenos">787</span></a>                          <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
</span><span id="KiteConnect-788"><a href="#KiteConnect-788"><span class="linenos">788</span></a>                          <span class="n">is_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="KiteConnect-789"><a href="#KiteConnect-789"><span class="linenos">789</span></a>                          <span class="n">query_params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;consider_positions&#39;</span><span class="p">:</span> <span class="n">consider_positions</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="n">mode</span><span class="p">})</span>
</span><span id="KiteConnect-790"><a href="#KiteConnect-790"><span class="linenos">790</span></a>
</span><span id="KiteConnect-791"><a href="#KiteConnect-791"><span class="linenos">791</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_virtual_contract_note</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="KiteConnect-792"><a href="#KiteConnect-792"><span class="linenos">792</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect-793"><a href="#KiteConnect-793"><span class="linenos">793</span></a><span class="sd">        Calculates detailed charges order-wise for the order book</span>
</span><span id="KiteConnect-794"><a href="#KiteConnect-794"><span class="linenos">794</span></a><span class="sd">        - `params` is list of orders to fetch charges detail</span>
</span><span id="KiteConnect-795"><a href="#KiteConnect-795"><span class="linenos">795</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect-796"><a href="#KiteConnect-796"><span class="linenos">796</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.contract_note&quot;</span><span class="p">,</span>
</span><span id="KiteConnect-797"><a href="#KiteConnect-797"><span class="linenos">797</span></a>                          <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
</span><span id="KiteConnect-798"><a href="#KiteConnect-798"><span class="linenos">798</span></a>                          <span class="n">is_json</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="KiteConnect-799"><a href="#KiteConnect-799"><span class="linenos">799</span></a>
</span><span id="KiteConnect-800"><a href="#KiteConnect-800"><span class="linenos">800</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_warn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
</span><span id="KiteConnect-801"><a href="#KiteConnect-801"><span class="linenos">801</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; Add deprecation warning message &quot;&quot;&quot;</span>
</span><span id="KiteConnect-802"><a href="#KiteConnect-802"><span class="linenos">802</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;always&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="KiteConnect-803"><a href="#KiteConnect-803"><span class="linenos">803</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="KiteConnect-804"><a href="#KiteConnect-804"><span class="linenos">804</span></a>
</span><span id="KiteConnect-805"><a href="#KiteConnect-805"><span class="linenos">805</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="KiteConnect-806"><a href="#KiteConnect-806"><span class="linenos">806</span></a>        <span class="c1"># decode to string for Python 3</span>
</span><span id="KiteConnect-807"><a href="#KiteConnect-807"><span class="linenos">807</span></a>        <span class="n">d</span> <span class="o">=</span> <span class="n">data</span>
</span><span id="KiteConnect-808"><a href="#KiteConnect-808"><span class="linenos">808</span></a>        <span class="c1"># Decode unicode data</span>
</span><span id="KiteConnect-809"><a href="#KiteConnect-809"><span class="linenos">809</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">PY2</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span id="KiteConnect-810"><a href="#KiteConnect-810"><span class="linenos">810</span></a>            <span class="n">d</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="KiteConnect-811"><a href="#KiteConnect-811"><span class="linenos">811</span></a>
</span><span id="KiteConnect-812"><a href="#KiteConnect-812"><span class="linenos">812</span></a>        <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteConnect-813"><a href="#KiteConnect-813"><span class="linenos">813</span></a>        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</span><span id="KiteConnect-814"><a href="#KiteConnect-814"><span class="linenos">814</span></a>
</span><span id="KiteConnect-815"><a href="#KiteConnect-815"><span class="linenos">815</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
</span><span id="KiteConnect-816"><a href="#KiteConnect-816"><span class="linenos">816</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;instrument_token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;instrument_token&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-817"><a href="#KiteConnect-817"><span class="linenos">817</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;last_price&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;last_price&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-818"><a href="#KiteConnect-818"><span class="linenos">818</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;strike&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;strike&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-819"><a href="#KiteConnect-819"><span class="linenos">819</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;tick_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;tick_size&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-820"><a href="#KiteConnect-820"><span class="linenos">820</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;lot_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;lot_size&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-821"><a href="#KiteConnect-821"><span class="linenos">821</span></a>
</span><span id="KiteConnect-822"><a href="#KiteConnect-822"><span class="linenos">822</span></a>            <span class="c1"># Parse date</span>
</span><span id="KiteConnect-823"><a href="#KiteConnect-823"><span class="linenos">823</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;expiry&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="KiteConnect-824"><a href="#KiteConnect-824"><span class="linenos">824</span></a>                <span class="n">row</span><span class="p">[</span><span class="s2">&quot;expiry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;expiry&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
</span><span id="KiteConnect-825"><a href="#KiteConnect-825"><span class="linenos">825</span></a>
</span><span id="KiteConnect-826"><a href="#KiteConnect-826"><span class="linenos">826</span></a>            <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</span><span id="KiteConnect-827"><a href="#KiteConnect-827"><span class="linenos">827</span></a>
</span><span id="KiteConnect-828"><a href="#KiteConnect-828"><span class="linenos">828</span></a>        <span class="k">return</span> <span class="n">records</span>
</span><span id="KiteConnect-829"><a href="#KiteConnect-829"><span class="linenos">829</span></a>
</span><span id="KiteConnect-830"><a href="#KiteConnect-830"><span class="linenos">830</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_mf_instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="KiteConnect-831"><a href="#KiteConnect-831"><span class="linenos">831</span></a>        <span class="c1"># decode to string for Python 3</span>
</span><span id="KiteConnect-832"><a href="#KiteConnect-832"><span class="linenos">832</span></a>        <span class="n">d</span> <span class="o">=</span> <span class="n">data</span>
</span><span id="KiteConnect-833"><a href="#KiteConnect-833"><span class="linenos">833</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">PY2</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span id="KiteConnect-834"><a href="#KiteConnect-834"><span class="linenos">834</span></a>            <span class="n">d</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="KiteConnect-835"><a href="#KiteConnect-835"><span class="linenos">835</span></a>
</span><span id="KiteConnect-836"><a href="#KiteConnect-836"><span class="linenos">836</span></a>        <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteConnect-837"><a href="#KiteConnect-837"><span class="linenos">837</span></a>        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</span><span id="KiteConnect-838"><a href="#KiteConnect-838"><span class="linenos">838</span></a>
</span><span id="KiteConnect-839"><a href="#KiteConnect-839"><span class="linenos">839</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
</span><span id="KiteConnect-840"><a href="#KiteConnect-840"><span class="linenos">840</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;minimum_purchase_amount&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;minimum_purchase_amount&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-841"><a href="#KiteConnect-841"><span class="linenos">841</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;purchase_amount_multiplier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;purchase_amount_multiplier&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-842"><a href="#KiteConnect-842"><span class="linenos">842</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;minimum_additional_purchase_amount&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;minimum_additional_purchase_amount&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-843"><a href="#KiteConnect-843"><span class="linenos">843</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;minimum_redemption_quantity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;minimum_redemption_quantity&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-844"><a href="#KiteConnect-844"><span class="linenos">844</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;redemption_quantity_multiplier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;redemption_quantity_multiplier&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-845"><a href="#KiteConnect-845"><span class="linenos">845</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;purchase_allowed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;purchase_allowed&quot;</span><span class="p">]))</span>
</span><span id="KiteConnect-846"><a href="#KiteConnect-846"><span class="linenos">846</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;redemption_allowed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;redemption_allowed&quot;</span><span class="p">]))</span>
</span><span id="KiteConnect-847"><a href="#KiteConnect-847"><span class="linenos">847</span></a>            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;last_price&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;last_price&quot;</span><span class="p">])</span>
</span><span id="KiteConnect-848"><a href="#KiteConnect-848"><span class="linenos">848</span></a>
</span><span id="KiteConnect-849"><a href="#KiteConnect-849"><span class="linenos">849</span></a>            <span class="c1"># Parse date</span>
</span><span id="KiteConnect-850"><a href="#KiteConnect-850"><span class="linenos">850</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;last_price_date&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="KiteConnect-851"><a href="#KiteConnect-851"><span class="linenos">851</span></a>                <span class="n">row</span><span class="p">[</span><span class="s2">&quot;last_price_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;last_price_date&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
</span><span id="KiteConnect-852"><a href="#KiteConnect-852"><span class="linenos">852</span></a>
</span><span id="KiteConnect-853"><a href="#KiteConnect-853"><span class="linenos">853</span></a>            <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</span><span id="KiteConnect-854"><a href="#KiteConnect-854"><span class="linenos">854</span></a>
</span><span id="KiteConnect-855"><a href="#KiteConnect-855"><span class="linenos">855</span></a>        <span class="k">return</span> <span class="n">records</span>
</span><span id="KiteConnect-856"><a href="#KiteConnect-856"><span class="linenos">856</span></a>
</span><span id="KiteConnect-857"><a href="#KiteConnect-857"><span class="linenos">857</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_user_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect-858"><a href="#KiteConnect-858"><span class="linenos">858</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">__title__</span> <span class="o">+</span> <span class="s2">&quot;-python/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="n">__version__</span>
</span><span id="KiteConnect-859"><a href="#KiteConnect-859"><span class="linenos">859</span></a>
</span><span id="KiteConnect-860"><a href="#KiteConnect-860"><span class="linenos">860</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="KiteConnect-861"><a href="#KiteConnect-861"><span class="linenos">861</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for sending a GET request.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-862"><a href="#KiteConnect-862"><span class="linenos">862</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="n">url_args</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="n">is_json</span><span class="p">)</span>
</span><span id="KiteConnect-863"><a href="#KiteConnect-863"><span class="linenos">863</span></a>
</span><span id="KiteConnect-864"><a href="#KiteConnect-864"><span class="linenos">864</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">query_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-865"><a href="#KiteConnect-865"><span class="linenos">865</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for sending a POST request.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-866"><a href="#KiteConnect-866"><span class="linenos">866</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="n">url_args</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="n">is_json</span><span class="p">,</span> <span class="n">query_params</span><span class="o">=</span><span class="n">query_params</span><span class="p">)</span>
</span><span id="KiteConnect-867"><a href="#KiteConnect-867"><span class="linenos">867</span></a>
</span><span id="KiteConnect-868"><a href="#KiteConnect-868"><span class="linenos">868</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">query_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-869"><a href="#KiteConnect-869"><span class="linenos">869</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for sending a PUT request.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-870"><a href="#KiteConnect-870"><span class="linenos">870</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="s2">&quot;PUT&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="n">url_args</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="n">is_json</span><span class="p">,</span> <span class="n">query_params</span><span class="o">=</span><span class="n">query_params</span><span class="p">)</span>
</span><span id="KiteConnect-871"><a href="#KiteConnect-871"><span class="linenos">871</span></a>
</span><span id="KiteConnect-872"><a href="#KiteConnect-872"><span class="linenos">872</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="KiteConnect-873"><a href="#KiteConnect-873"><span class="linenos">873</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for sending a DELETE request.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-874"><a href="#KiteConnect-874"><span class="linenos">874</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="n">url_args</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="n">is_json</span><span class="p">)</span>
</span><span id="KiteConnect-875"><a href="#KiteConnect-875"><span class="linenos">875</span></a>
</span><span id="KiteConnect-876"><a href="#KiteConnect-876"><span class="linenos">876</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">query_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect-877"><a href="#KiteConnect-877"><span class="linenos">877</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Make an HTTP request.&quot;&quot;&quot;</span>
</span><span id="KiteConnect-878"><a href="#KiteConnect-878"><span class="linenos">878</span></a>        <span class="c1"># Form a restful URL</span>
</span><span id="KiteConnect-879"><a href="#KiteConnect-879"><span class="linenos">879</span></a>        <span class="k">if</span> <span class="n">url_args</span><span class="p">:</span>
</span><span id="KiteConnect-880"><a href="#KiteConnect-880"><span class="linenos">880</span></a>            <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_routes</span><span class="p">[</span><span class="n">route</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">url_args</span><span class="p">)</span>
</span><span id="KiteConnect-881"><a href="#KiteConnect-881"><span class="linenos">881</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect-882"><a href="#KiteConnect-882"><span class="linenos">882</span></a>            <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_routes</span><span class="p">[</span><span class="n">route</span><span class="p">]</span>
</span><span id="KiteConnect-883"><a href="#KiteConnect-883"><span class="linenos">883</span></a>
</span><span id="KiteConnect-884"><a href="#KiteConnect-884"><span class="linenos">884</span></a>        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
</span><span id="KiteConnect-885"><a href="#KiteConnect-885"><span class="linenos">885</span></a>
</span><span id="KiteConnect-886"><a href="#KiteConnect-886"><span class="linenos">886</span></a>        <span class="c1"># Custom headers</span>
</span><span id="KiteConnect-887"><a href="#KiteConnect-887"><span class="linenos">887</span></a>        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteConnect-888"><a href="#KiteConnect-888"><span class="linenos">888</span></a>            <span class="s2">&quot;X-Kite-Version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kite_header_version</span><span class="p">,</span>
</span><span id="KiteConnect-889"><a href="#KiteConnect-889"><span class="linenos">889</span></a>            <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_agent</span><span class="p">()</span>
</span><span id="KiteConnect-890"><a href="#KiteConnect-890"><span class="linenos">890</span></a>        <span class="p">}</span>
</span><span id="KiteConnect-891"><a href="#KiteConnect-891"><span class="linenos">891</span></a>
</span><span id="KiteConnect-892"><a href="#KiteConnect-892"><span class="linenos">892</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span><span class="p">:</span>
</span><span id="KiteConnect-893"><a href="#KiteConnect-893"><span class="linenos">893</span></a>            <span class="c1"># set authorization header</span>
</span><span id="KiteConnect-894"><a href="#KiteConnect-894"><span class="linenos">894</span></a>            <span class="n">auth_header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span>
</span><span id="KiteConnect-895"><a href="#KiteConnect-895"><span class="linenos">895</span></a>            <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Authorization&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;token </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="KiteConnect-896"><a href="#KiteConnect-896"><span class="linenos">896</span></a>
</span><span id="KiteConnect-897"><a href="#KiteConnect-897"><span class="linenos">897</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="KiteConnect-898"><a href="#KiteConnect-898"><span class="linenos">898</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Request: </span><span class="si">{method}</span><span class="s2"> </span><span class="si">{url}</span><span class="s2"> </span><span class="si">{params}</span><span class="s2"> </span><span class="si">{headers}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">))</span>
</span><span id="KiteConnect-899"><a href="#KiteConnect-899"><span class="linenos">899</span></a>
</span><span id="KiteConnect-900"><a href="#KiteConnect-900"><span class="linenos">900</span></a>        <span class="c1"># prepare url query params</span>
</span><span id="KiteConnect-901"><a href="#KiteConnect-901"><span class="linenos">901</span></a>        <span class="k">if</span> <span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">]:</span>
</span><span id="KiteConnect-902"><a href="#KiteConnect-902"><span class="linenos">902</span></a>            <span class="n">query_params</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="KiteConnect-903"><a href="#KiteConnect-903"><span class="linenos">903</span></a>
</span><span id="KiteConnect-904"><a href="#KiteConnect-904"><span class="linenos">904</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteConnect-905"><a href="#KiteConnect-905"><span class="linenos">905</span></a>            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reqsession</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span>
</span><span id="KiteConnect-906"><a href="#KiteConnect-906"><span class="linenos">906</span></a>                                        <span class="n">url</span><span class="p">,</span>
</span><span id="KiteConnect-907"><a href="#KiteConnect-907"><span class="linenos">907</span></a>                                        <span class="n">json</span><span class="o">=</span><span class="n">params</span> <span class="k">if</span> <span class="p">(</span><span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;PUT&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">is_json</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-908"><a href="#KiteConnect-908"><span class="linenos">908</span></a>                                        <span class="n">data</span><span class="o">=</span><span class="n">params</span> <span class="k">if</span> <span class="p">(</span><span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;PUT&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_json</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect-909"><a href="#KiteConnect-909"><span class="linenos">909</span></a>                                        <span class="n">params</span><span class="o">=</span><span class="n">query_params</span><span class="p">,</span>
</span><span id="KiteConnect-910"><a href="#KiteConnect-910"><span class="linenos">910</span></a>                                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
</span><span id="KiteConnect-911"><a href="#KiteConnect-911"><span class="linenos">911</span></a>                                        <span class="n">verify</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">disable_ssl</span><span class="p">,</span>
</span><span id="KiteConnect-912"><a href="#KiteConnect-912"><span class="linenos">912</span></a>                                        <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="KiteConnect-913"><a href="#KiteConnect-913"><span class="linenos">913</span></a>                                        <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span>
</span><span id="KiteConnect-914"><a href="#KiteConnect-914"><span class="linenos">914</span></a>                                        <span class="n">proxies</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">proxies</span><span class="p">)</span>
</span><span id="KiteConnect-915"><a href="#KiteConnect-915"><span class="linenos">915</span></a>        <span class="c1"># Any requests lib related exceptions are raised here - https://requests.readthedocs.io/en/latest/api/#exceptions</span>
</span><span id="KiteConnect-916"><a href="#KiteConnect-916"><span class="linenos">916</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="KiteConnect-917"><a href="#KiteConnect-917"><span class="linenos">917</span></a>            <span class="k">raise</span> <span class="n">e</span>
</span><span id="KiteConnect-918"><a href="#KiteConnect-918"><span class="linenos">918</span></a>
</span><span id="KiteConnect-919"><a href="#KiteConnect-919"><span class="linenos">919</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="KiteConnect-920"><a href="#KiteConnect-920"><span class="linenos">920</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Response: </span><span class="si">{code}</span><span class="s2"> </span><span class="si">{content}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
</span><span id="KiteConnect-921"><a href="#KiteConnect-921"><span class="linenos">921</span></a>
</span><span id="KiteConnect-922"><a href="#KiteConnect-922"><span class="linenos">922</span></a>        <span class="c1"># Validate the content type.</span>
</span><span id="KiteConnect-923"><a href="#KiteConnect-923"><span class="linenos">923</span></a>        <span class="k">if</span> <span class="s2">&quot;json&quot;</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;content-type&quot;</span><span class="p">]:</span>
</span><span id="KiteConnect-924"><a href="#KiteConnect-924"><span class="linenos">924</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="KiteConnect-925"><a href="#KiteConnect-925"><span class="linenos">925</span></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span id="KiteConnect-926"><a href="#KiteConnect-926"><span class="linenos">926</span></a>            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="KiteConnect-927"><a href="#KiteConnect-927"><span class="linenos">927</span></a>                <span class="k">raise</span> <span class="n">ex</span><span class="o">.</span><span class="n">DataException</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t parse the JSON response received from the server: </span><span class="si">{content}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteConnect-928"><a href="#KiteConnect-928"><span class="linenos">928</span></a>                    <span class="n">content</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
</span><span id="KiteConnect-929"><a href="#KiteConnect-929"><span class="linenos">929</span></a>
</span><span id="KiteConnect-930"><a href="#KiteConnect-930"><span class="linenos">930</span></a>            <span class="c1"># api error</span>
</span><span id="KiteConnect-931"><a href="#KiteConnect-931"><span class="linenos">931</span></a>            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error_type&quot;</span><span class="p">):</span>
</span><span id="KiteConnect-932"><a href="#KiteConnect-932"><span class="linenos">932</span></a>                <span class="c1"># Call session hook if its registered and TokenException is raised</span>
</span><span id="KiteConnect-933"><a href="#KiteConnect-933"><span class="linenos">933</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">session_expiry_hook</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;error_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;TokenException&quot;</span><span class="p">:</span>
</span><span id="KiteConnect-934"><a href="#KiteConnect-934"><span class="linenos">934</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">session_expiry_hook</span><span class="p">()</span>
</span><span id="KiteConnect-935"><a href="#KiteConnect-935"><span class="linenos">935</span></a>
</span><span id="KiteConnect-936"><a href="#KiteConnect-936"><span class="linenos">936</span></a>                <span class="c1"># native Kite errors</span>
</span><span id="KiteConnect-937"><a href="#KiteConnect-937"><span class="linenos">937</span></a>                <span class="n">exp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error_type&quot;</span><span class="p">),</span> <span class="n">ex</span><span class="o">.</span><span class="n">GeneralException</span><span class="p">)</span>
</span><span id="KiteConnect-938"><a href="#KiteConnect-938"><span class="linenos">938</span></a>                <span class="k">raise</span> <span class="n">exp</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">],</span> <span class="n">code</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
</span><span id="KiteConnect-939"><a href="#KiteConnect-939"><span class="linenos">939</span></a>
</span><span id="KiteConnect-940"><a href="#KiteConnect-940"><span class="linenos">940</span></a>            <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
</span><span id="KiteConnect-941"><a href="#KiteConnect-941"><span class="linenos">941</span></a>        <span class="k">elif</span> <span class="s2">&quot;csv&quot;</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;content-type&quot;</span><span class="p">]:</span>
</span><span id="KiteConnect-942"><a href="#KiteConnect-942"><span class="linenos">942</span></a>            <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span>
</span><span id="KiteConnect-943"><a href="#KiteConnect-943"><span class="linenos">943</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect-944"><a href="#KiteConnect-944"><span class="linenos">944</span></a>            <span class="k">raise</span> <span class="n">ex</span><span class="o">.</span><span class="n">DataException</span><span class="p">(</span><span class="s2">&quot;Unknown Content-Type (</span><span class="si">{content_type}</span><span class="s2">) with response: (</span><span class="si">{content}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteConnect-945"><a href="#KiteConnect-945"><span class="linenos">945</span></a>                <span class="n">content_type</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;content-type&quot;</span><span class="p">],</span>
</span><span id="KiteConnect-946"><a href="#KiteConnect-946"><span class="linenos">946</span></a>                <span class="n">content</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>The Kite Connect API wrapper class.</p>

<p>In production, you may initialise a single instance of this class per <code><a href="#KiteConnect.api_key">api_key</a></code>.</p>
</div>


                            <div id="KiteConnect.__init__" class="classattr">
                                        <input id="KiteConnect.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">KiteConnect</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">api_key</span>,</span><span class="param">	<span class="n">access_token</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">root</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">debug</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">timeout</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">proxies</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">pool</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">disable_ssl</span><span class="o">=</span><span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="KiteConnect.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.__init__-169"><a href="#KiteConnect.__init__-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-170"><a href="#KiteConnect.__init__-170"><span class="linenos">170</span></a>                 <span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-171"><a href="#KiteConnect.__init__-171"><span class="linenos">171</span></a>                 <span class="n">access_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-172"><a href="#KiteConnect.__init__-172"><span class="linenos">172</span></a>                 <span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-173"><a href="#KiteConnect.__init__-173"><span class="linenos">173</span></a>                 <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-174"><a href="#KiteConnect.__init__-174"><span class="linenos">174</span></a>                 <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-175"><a href="#KiteConnect.__init__-175"><span class="linenos">175</span></a>                 <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-176"><a href="#KiteConnect.__init__-176"><span class="linenos">176</span></a>                 <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.__init__-177"><a href="#KiteConnect.__init__-177"><span class="linenos">177</span></a>                 <span class="n">disable_ssl</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="KiteConnect.__init__-178"><a href="#KiteConnect.__init__-178"><span class="linenos">178</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.__init__-179"><a href="#KiteConnect.__init__-179"><span class="linenos">179</span></a><span class="sd">        Initialise a new Kite Connect client instance.</span>
</span><span id="KiteConnect.__init__-180"><a href="#KiteConnect.__init__-180"><span class="linenos">180</span></a>
</span><span id="KiteConnect.__init__-181"><a href="#KiteConnect.__init__-181"><span class="linenos">181</span></a><span class="sd">        - `api_key` is the key issued to you</span>
</span><span id="KiteConnect.__init__-182"><a href="#KiteConnect.__init__-182"><span class="linenos">182</span></a><span class="sd">        - `access_token` is the token obtained after the login flow in</span>
</span><span id="KiteConnect.__init__-183"><a href="#KiteConnect.__init__-183"><span class="linenos">183</span></a><span class="sd">            exchange for the `request_token` . Pre-login, this will default to None,</span>
</span><span id="KiteConnect.__init__-184"><a href="#KiteConnect.__init__-184"><span class="linenos">184</span></a><span class="sd">        but once you have obtained it, you should</span>
</span><span id="KiteConnect.__init__-185"><a href="#KiteConnect.__init__-185"><span class="linenos">185</span></a><span class="sd">        persist it in a database or session to pass</span>
</span><span id="KiteConnect.__init__-186"><a href="#KiteConnect.__init__-186"><span class="linenos">186</span></a><span class="sd">        to the Kite Connect class initialisation for subsequent requests.</span>
</span><span id="KiteConnect.__init__-187"><a href="#KiteConnect.__init__-187"><span class="linenos">187</span></a><span class="sd">        - `root` is the API end point root. Unless you explicitly</span>
</span><span id="KiteConnect.__init__-188"><a href="#KiteConnect.__init__-188"><span class="linenos">188</span></a><span class="sd">        want to send API requests to a non-default endpoint, this</span>
</span><span id="KiteConnect.__init__-189"><a href="#KiteConnect.__init__-189"><span class="linenos">189</span></a><span class="sd">        can be ignored.</span>
</span><span id="KiteConnect.__init__-190"><a href="#KiteConnect.__init__-190"><span class="linenos">190</span></a><span class="sd">        - `debug`, if set to True, will serialise and print requests</span>
</span><span id="KiteConnect.__init__-191"><a href="#KiteConnect.__init__-191"><span class="linenos">191</span></a><span class="sd">        and responses to stdout.</span>
</span><span id="KiteConnect.__init__-192"><a href="#KiteConnect.__init__-192"><span class="linenos">192</span></a><span class="sd">        - `timeout` is the time (seconds) for which the API client will wait for</span>
</span><span id="KiteConnect.__init__-193"><a href="#KiteConnect.__init__-193"><span class="linenos">193</span></a><span class="sd">        a request to complete before it fails. Defaults to 7 seconds</span>
</span><span id="KiteConnect.__init__-194"><a href="#KiteConnect.__init__-194"><span class="linenos">194</span></a><span class="sd">        - `proxies` to set requests proxy.</span>
</span><span id="KiteConnect.__init__-195"><a href="#KiteConnect.__init__-195"><span class="linenos">195</span></a><span class="sd">        Check [python requests documentation](http://docs.python-requests.org/en/master/user/advanced/#proxies) for usage and examples.</span>
</span><span id="KiteConnect.__init__-196"><a href="#KiteConnect.__init__-196"><span class="linenos">196</span></a><span class="sd">        - `pool` is manages request pools. It takes a dict of params accepted by HTTPAdapter as described here in [python requests documentation](http://docs.python-requests.org/en/master/api/#requests.adapters.HTTPAdapter)</span>
</span><span id="KiteConnect.__init__-197"><a href="#KiteConnect.__init__-197"><span class="linenos">197</span></a><span class="sd">        - `disable_ssl` disables the SSL verification while making a request.</span>
</span><span id="KiteConnect.__init__-198"><a href="#KiteConnect.__init__-198"><span class="linenos">198</span></a><span class="sd">        If set requests won&#39;t throw SSLError if its set to custom `root` url without SSL.</span>
</span><span id="KiteConnect.__init__-199"><a href="#KiteConnect.__init__-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.__init__-200"><a href="#KiteConnect.__init__-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
</span><span id="KiteConnect.__init__-201"><a href="#KiteConnect.__init__-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>
</span><span id="KiteConnect.__init__-202"><a href="#KiteConnect.__init__-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session_expiry_hook</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteConnect.__init__-203"><a href="#KiteConnect.__init__-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">disable_ssl</span> <span class="o">=</span> <span class="n">disable_ssl</span>
</span><span id="KiteConnect.__init__-204"><a href="#KiteConnect.__init__-204"><span class="linenos">204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
</span><span id="KiteConnect.__init__-205"><a href="#KiteConnect.__init__-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">proxies</span> <span class="o">=</span> <span class="n">proxies</span> <span class="k">if</span> <span class="n">proxies</span> <span class="k">else</span> <span class="p">{}</span>
</span><span id="KiteConnect.__init__-206"><a href="#KiteConnect.__init__-206"><span class="linenos">206</span></a>
</span><span id="KiteConnect.__init__-207"><a href="#KiteConnect.__init__-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_root_uri</span>
</span><span id="KiteConnect.__init__-208"><a href="#KiteConnect.__init__-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_timeout</span>
</span><span id="KiteConnect.__init__-209"><a href="#KiteConnect.__init__-209"><span class="linenos">209</span></a>
</span><span id="KiteConnect.__init__-210"><a href="#KiteConnect.__init__-210"><span class="linenos">210</span></a>        <span class="c1"># Create requests session by default</span>
</span><span id="KiteConnect.__init__-211"><a href="#KiteConnect.__init__-211"><span class="linenos">211</span></a>        <span class="c1"># Same session to be used by pool connections</span>
</span><span id="KiteConnect.__init__-212"><a href="#KiteConnect.__init__-212"><span class="linenos">212</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reqsession</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
</span><span id="KiteConnect.__init__-213"><a href="#KiteConnect.__init__-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="n">pool</span><span class="p">:</span>
</span><span id="KiteConnect.__init__-214"><a href="#KiteConnect.__init__-214"><span class="linenos">214</span></a>            <span class="n">reqadapter</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">adapters</span><span class="o">.</span><span class="n">HTTPAdapter</span><span class="p">(</span><span class="o">**</span><span class="n">pool</span><span class="p">)</span>
</span><span id="KiteConnect.__init__-215"><a href="#KiteConnect.__init__-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reqsession</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">reqadapter</span><span class="p">)</span>
</span><span id="KiteConnect.__init__-216"><a href="#KiteConnect.__init__-216"><span class="linenos">216</span></a>
</span><span id="KiteConnect.__init__-217"><a href="#KiteConnect.__init__-217"><span class="linenos">217</span></a>        <span class="c1"># disable requests SSL warning</span>
</span><span id="KiteConnect.__init__-218"><a href="#KiteConnect.__init__-218"><span class="linenos">218</span></a>        <span class="n">requests</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">urllib3</span><span class="o">.</span><span class="n">disable_warnings</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialise a new Kite Connect client instance.</p>

<ul>
<li><code><a href="#KiteConnect.api_key">api_key</a></code> is the key issued to you</li>
<li><code><a href="#KiteConnect.access_token">access_token</a></code> is the token obtained after the login flow in
exchange for the <code>request_token</code> . Pre-login, this will default to None,
but once you have obtained it, you should
persist it in a database or session to pass
to the Kite Connect class initialisation for subsequent requests.</li>
<li><code><a href="#KiteConnect.root">root</a></code> is the API end point root. Unless you explicitly
want to send API requests to a non-default endpoint, this
can be ignored.</li>
<li><code><a href="#KiteConnect.debug">debug</a></code>, if set to True, will serialise and print requests
and responses to stdout.</li>
<li><code><a href="#KiteConnect.timeout">timeout</a></code> is the time (seconds) for which the API client will wait for
a request to complete before it fails. Defaults to 7 seconds</li>
<li><code><a href="#KiteConnect.proxies">proxies</a></code> to set requests proxy.
Check <a href="http://docs.python-requests.org/en/master/user/advanced/#proxies">python requests documentation</a> for usage and examples.</li>
<li><code>pool</code> is manages request pools. It takes a dict of params accepted by HTTPAdapter as described here in <a href="http://docs.python-requests.org/en/master/api/#requests.adapters.HTTPAdapter">python requests documentation</a></li>
<li><code><a href="#KiteConnect.disable_ssl">disable_ssl</a></code> disables the SSL verification while making a request.
If set requests won't throw SSLError if its set to custom <code><a href="#KiteConnect.root">root</a></code> url without SSL.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.kite_header_version" class="classattr">
                                <div class="attr variable">
            <span class="name">kite_header_version</span>        =
<span class="default_value">&#39;3&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.kite_header_version"></a>
    
    

                            </div>
                            <div id="KiteConnect.PRODUCT_MIS" class="classattr">
                                <div class="attr variable">
            <span class="name">PRODUCT_MIS</span>        =
<span class="default_value">&#39;MIS&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.PRODUCT_MIS"></a>
    
    

                            </div>
                            <div id="KiteConnect.PRODUCT_CNC" class="classattr">
                                <div class="attr variable">
            <span class="name">PRODUCT_CNC</span>        =
<span class="default_value">&#39;CNC&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.PRODUCT_CNC"></a>
    
    

                            </div>
                            <div id="KiteConnect.PRODUCT_NRML" class="classattr">
                                <div class="attr variable">
            <span class="name">PRODUCT_NRML</span>        =
<span class="default_value">&#39;NRML&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.PRODUCT_NRML"></a>
    
    

                            </div>
                            <div id="KiteConnect.PRODUCT_CO" class="classattr">
                                <div class="attr variable">
            <span class="name">PRODUCT_CO</span>        =
<span class="default_value">&#39;CO&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.PRODUCT_CO"></a>
    
    

                            </div>
                            <div id="KiteConnect.ORDER_TYPE_MARKET" class="classattr">
                                <div class="attr variable">
            <span class="name">ORDER_TYPE_MARKET</span>        =
<span class="default_value">&#39;MARKET&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.ORDER_TYPE_MARKET"></a>
    
    

                            </div>
                            <div id="KiteConnect.ORDER_TYPE_LIMIT" class="classattr">
                                <div class="attr variable">
            <span class="name">ORDER_TYPE_LIMIT</span>        =
<span class="default_value">&#39;LIMIT&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.ORDER_TYPE_LIMIT"></a>
    
    

                            </div>
                            <div id="KiteConnect.ORDER_TYPE_SLM" class="classattr">
                                <div class="attr variable">
            <span class="name">ORDER_TYPE_SLM</span>        =
<span class="default_value">&#39;SL-M&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.ORDER_TYPE_SLM"></a>
    
    

                            </div>
                            <div id="KiteConnect.ORDER_TYPE_SL" class="classattr">
                                <div class="attr variable">
            <span class="name">ORDER_TYPE_SL</span>        =
<span class="default_value">&#39;SL&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.ORDER_TYPE_SL"></a>
    
    

                            </div>
                            <div id="KiteConnect.VARIETY_REGULAR" class="classattr">
                                <div class="attr variable">
            <span class="name">VARIETY_REGULAR</span>        =
<span class="default_value">&#39;regular&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VARIETY_REGULAR"></a>
    
    

                            </div>
                            <div id="KiteConnect.VARIETY_CO" class="classattr">
                                <div class="attr variable">
            <span class="name">VARIETY_CO</span>        =
<span class="default_value">&#39;co&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VARIETY_CO"></a>
    
    

                            </div>
                            <div id="KiteConnect.VARIETY_AMO" class="classattr">
                                <div class="attr variable">
            <span class="name">VARIETY_AMO</span>        =
<span class="default_value">&#39;amo&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VARIETY_AMO"></a>
    
    

                            </div>
                            <div id="KiteConnect.VARIETY_ICEBERG" class="classattr">
                                <div class="attr variable">
            <span class="name">VARIETY_ICEBERG</span>        =
<span class="default_value">&#39;iceberg&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VARIETY_ICEBERG"></a>
    
    

                            </div>
                            <div id="KiteConnect.VARIETY_AUCTION" class="classattr">
                                <div class="attr variable">
            <span class="name">VARIETY_AUCTION</span>        =
<span class="default_value">&#39;auction&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VARIETY_AUCTION"></a>
    
    

                            </div>
                            <div id="KiteConnect.TRANSACTION_TYPE_BUY" class="classattr">
                                <div class="attr variable">
            <span class="name">TRANSACTION_TYPE_BUY</span>        =
<span class="default_value">&#39;BUY&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.TRANSACTION_TYPE_BUY"></a>
    
    

                            </div>
                            <div id="KiteConnect.TRANSACTION_TYPE_SELL" class="classattr">
                                <div class="attr variable">
            <span class="name">TRANSACTION_TYPE_SELL</span>        =
<span class="default_value">&#39;SELL&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.TRANSACTION_TYPE_SELL"></a>
    
    

                            </div>
                            <div id="KiteConnect.VALIDITY_DAY" class="classattr">
                                <div class="attr variable">
            <span class="name">VALIDITY_DAY</span>        =
<span class="default_value">&#39;DAY&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VALIDITY_DAY"></a>
    
    

                            </div>
                            <div id="KiteConnect.VALIDITY_IOC" class="classattr">
                                <div class="attr variable">
            <span class="name">VALIDITY_IOC</span>        =
<span class="default_value">&#39;IOC&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VALIDITY_IOC"></a>
    
    

                            </div>
                            <div id="KiteConnect.VALIDITY_TTL" class="classattr">
                                <div class="attr variable">
            <span class="name">VALIDITY_TTL</span>        =
<span class="default_value">&#39;TTL&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.VALIDITY_TTL"></a>
    
    

                            </div>
                            <div id="KiteConnect.POSITION_TYPE_DAY" class="classattr">
                                <div class="attr variable">
            <span class="name">POSITION_TYPE_DAY</span>        =
<span class="default_value">&#39;day&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.POSITION_TYPE_DAY"></a>
    
    

                            </div>
                            <div id="KiteConnect.POSITION_TYPE_OVERNIGHT" class="classattr">
                                <div class="attr variable">
            <span class="name">POSITION_TYPE_OVERNIGHT</span>        =
<span class="default_value">&#39;overnight&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.POSITION_TYPE_OVERNIGHT"></a>
    
    

                            </div>
                            <div id="KiteConnect.EXCHANGE_NSE" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_NSE</span>        =
<span class="default_value">&#39;NSE&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.EXCHANGE_NSE"></a>
    
    

                            </div>
                            <div id="KiteConnect.EXCHANGE_BSE" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_BSE</span>        =
<span class="default_value">&#39;BSE&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.EXCHANGE_BSE"></a>
    
    

                            </div>
                            <div id="KiteConnect.EXCHANGE_NFO" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_NFO</span>        =
<span class="default_value">&#39;NFO&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.EXCHANGE_NFO"></a>
    
    

                            </div>
                            <div id="KiteConnect.EXCHANGE_CDS" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_CDS</span>        =
<span class="default_value">&#39;CDS&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.EXCHANGE_CDS"></a>
    
    

                            </div>
                            <div id="KiteConnect.EXCHANGE_BFO" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_BFO</span>        =
<span class="default_value">&#39;BFO&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.EXCHANGE_BFO"></a>
    
    

                            </div>
                            <div id="KiteConnect.EXCHANGE_MCX" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_MCX</span>        =
<span class="default_value">&#39;MCX&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.EXCHANGE_MCX"></a>
    
    

                            </div>
                            <div id="KiteConnect.EXCHANGE_BCD" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_BCD</span>        =
<span class="default_value">&#39;BCD&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.EXCHANGE_BCD"></a>
    
    

                            </div>
                            <div id="KiteConnect.MARGIN_EQUITY" class="classattr">
                                <div class="attr variable">
            <span class="name">MARGIN_EQUITY</span>        =
<span class="default_value">&#39;equity&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.MARGIN_EQUITY"></a>
    
    

                            </div>
                            <div id="KiteConnect.MARGIN_COMMODITY" class="classattr">
                                <div class="attr variable">
            <span class="name">MARGIN_COMMODITY</span>        =
<span class="default_value">&#39;commodity&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.MARGIN_COMMODITY"></a>
    
    

                            </div>
                            <div id="KiteConnect.STATUS_COMPLETE" class="classattr">
                                <div class="attr variable">
            <span class="name">STATUS_COMPLETE</span>        =
<span class="default_value">&#39;COMPLETE&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.STATUS_COMPLETE"></a>
    
    

                            </div>
                            <div id="KiteConnect.STATUS_REJECTED" class="classattr">
                                <div class="attr variable">
            <span class="name">STATUS_REJECTED</span>        =
<span class="default_value">&#39;REJECTED&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.STATUS_REJECTED"></a>
    
    

                            </div>
                            <div id="KiteConnect.STATUS_CANCELLED" class="classattr">
                                <div class="attr variable">
            <span class="name">STATUS_CANCELLED</span>        =
<span class="default_value">&#39;CANCELLED&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.STATUS_CANCELLED"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_TYPE_OCO" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_TYPE_OCO</span>        =
<span class="default_value">&#39;two-leg&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_TYPE_OCO"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_TYPE_SINGLE" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_TYPE_SINGLE</span>        =
<span class="default_value">&#39;single&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_TYPE_SINGLE"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_STATUS_ACTIVE" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_STATUS_ACTIVE</span>        =
<span class="default_value">&#39;active&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_STATUS_ACTIVE"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_STATUS_TRIGGERED" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_STATUS_TRIGGERED</span>        =
<span class="default_value">&#39;triggered&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_STATUS_TRIGGERED"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_STATUS_DISABLED" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_STATUS_DISABLED</span>        =
<span class="default_value">&#39;disabled&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_STATUS_DISABLED"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_STATUS_EXPIRED" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_STATUS_EXPIRED</span>        =
<span class="default_value">&#39;expired&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_STATUS_EXPIRED"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_STATUS_CANCELLED" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_STATUS_CANCELLED</span>        =
<span class="default_value">&#39;cancelled&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_STATUS_CANCELLED"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_STATUS_REJECTED" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_STATUS_REJECTED</span>        =
<span class="default_value">&#39;rejected&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_STATUS_REJECTED"></a>
    
    

                            </div>
                            <div id="KiteConnect.GTT_STATUS_DELETED" class="classattr">
                                <div class="attr variable">
            <span class="name">GTT_STATUS_DELETED</span>        =
<span class="default_value">&#39;deleted&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.GTT_STATUS_DELETED"></a>
    
    

                            </div>
                            <div id="KiteConnect.debug" class="classattr">
                                <div class="attr variable">
            <span class="name">debug</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.debug"></a>
    
    

                            </div>
                            <div id="KiteConnect.api_key" class="classattr">
                                <div class="attr variable">
            <span class="name">api_key</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.api_key"></a>
    
    

                            </div>
                            <div id="KiteConnect.session_expiry_hook" class="classattr">
                                <div class="attr variable">
            <span class="name">session_expiry_hook</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.session_expiry_hook"></a>
    
    

                            </div>
                            <div id="KiteConnect.disable_ssl" class="classattr">
                                <div class="attr variable">
            <span class="name">disable_ssl</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.disable_ssl"></a>
    
    

                            </div>
                            <div id="KiteConnect.access_token" class="classattr">
                                <div class="attr variable">
            <span class="name">access_token</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.access_token"></a>
    
    

                            </div>
                            <div id="KiteConnect.proxies" class="classattr">
                                <div class="attr variable">
            <span class="name">proxies</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.proxies"></a>
    
    

                            </div>
                            <div id="KiteConnect.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.root"></a>
    
    

                            </div>
                            <div id="KiteConnect.timeout" class="classattr">
                                <div class="attr variable">
            <span class="name">timeout</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.timeout"></a>
    
    

                            </div>
                            <div id="KiteConnect.reqsession" class="classattr">
                                <div class="attr variable">
            <span class="name">reqsession</span>

        
    </div>
    <a class="headerlink" href="#KiteConnect.reqsession"></a>
    
    

                            </div>
                            <div id="KiteConnect.set_session_expiry_hook" class="classattr">
                                        <input id="KiteConnect.set_session_expiry_hook-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_session_expiry_hook</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">method</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.set_session_expiry_hook-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.set_session_expiry_hook"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.set_session_expiry_hook-220"><a href="#KiteConnect.set_session_expiry_hook-220"><span class="linenos">220</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_session_expiry_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
</span><span id="KiteConnect.set_session_expiry_hook-221"><a href="#KiteConnect.set_session_expiry_hook-221"><span class="linenos">221</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.set_session_expiry_hook-222"><a href="#KiteConnect.set_session_expiry_hook-222"><span class="linenos">222</span></a><span class="sd">        Set a callback hook for session (`TokenError` -- timeout, expiry etc.) errors.</span>
</span><span id="KiteConnect.set_session_expiry_hook-223"><a href="#KiteConnect.set_session_expiry_hook-223"><span class="linenos">223</span></a>
</span><span id="KiteConnect.set_session_expiry_hook-224"><a href="#KiteConnect.set_session_expiry_hook-224"><span class="linenos">224</span></a><span class="sd">        An `access_token` (login session) can become invalid for a number of</span>
</span><span id="KiteConnect.set_session_expiry_hook-225"><a href="#KiteConnect.set_session_expiry_hook-225"><span class="linenos">225</span></a><span class="sd">        reasons, but it doesn&#39;t make sense for the client to</span>
</span><span id="KiteConnect.set_session_expiry_hook-226"><a href="#KiteConnect.set_session_expiry_hook-226"><span class="linenos">226</span></a><span class="sd">        try and catch it during every API call.</span>
</span><span id="KiteConnect.set_session_expiry_hook-227"><a href="#KiteConnect.set_session_expiry_hook-227"><span class="linenos">227</span></a>
</span><span id="KiteConnect.set_session_expiry_hook-228"><a href="#KiteConnect.set_session_expiry_hook-228"><span class="linenos">228</span></a><span class="sd">        A callback method that handles session errors</span>
</span><span id="KiteConnect.set_session_expiry_hook-229"><a href="#KiteConnect.set_session_expiry_hook-229"><span class="linenos">229</span></a><span class="sd">        can be set here and when the client encounters</span>
</span><span id="KiteConnect.set_session_expiry_hook-230"><a href="#KiteConnect.set_session_expiry_hook-230"><span class="linenos">230</span></a><span class="sd">        a token error at any point, it&#39;ll be called.</span>
</span><span id="KiteConnect.set_session_expiry_hook-231"><a href="#KiteConnect.set_session_expiry_hook-231"><span class="linenos">231</span></a>
</span><span id="KiteConnect.set_session_expiry_hook-232"><a href="#KiteConnect.set_session_expiry_hook-232"><span class="linenos">232</span></a><span class="sd">        This callback, for instance, can log the user out of the UI,</span>
</span><span id="KiteConnect.set_session_expiry_hook-233"><a href="#KiteConnect.set_session_expiry_hook-233"><span class="linenos">233</span></a><span class="sd">        clear session cookies, or initiate a fresh login.</span>
</span><span id="KiteConnect.set_session_expiry_hook-234"><a href="#KiteConnect.set_session_expiry_hook-234"><span class="linenos">234</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.set_session_expiry_hook-235"><a href="#KiteConnect.set_session_expiry_hook-235"><span class="linenos">235</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">method</span><span class="p">):</span>
</span><span id="KiteConnect.set_session_expiry_hook-236"><a href="#KiteConnect.set_session_expiry_hook-236"><span class="linenos">236</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid input type. Only functions are accepted.&quot;</span><span class="p">)</span>
</span><span id="KiteConnect.set_session_expiry_hook-237"><a href="#KiteConnect.set_session_expiry_hook-237"><span class="linenos">237</span></a>
</span><span id="KiteConnect.set_session_expiry_hook-238"><a href="#KiteConnect.set_session_expiry_hook-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session_expiry_hook</span> <span class="o">=</span> <span class="n">method</span>
</span></pre></div>


            <div class="docstring"><p>Set a callback hook for session (<code>TokenError</code> -- timeout, expiry etc.) errors.</p>

<p>An <code><a href="#KiteConnect.access_token">access_token</a></code> (login session) can become invalid for a number of
reasons, but it doesn't make sense for the client to
try and catch it during every API call.</p>

<p>A callback method that handles session errors
can be set here and when the client encounters
a token error at any point, it'll be called.</p>

<p>This callback, for instance, can log the user out of the UI,
clear session cookies, or initiate a fresh login.</p>
</div>


                            </div>
                            <div id="KiteConnect.set_access_token" class="classattr">
                                        <input id="KiteConnect.set_access_token-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_access_token</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">access_token</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.set_access_token-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.set_access_token"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.set_access_token-240"><a href="#KiteConnect.set_access_token-240"><span class="linenos">240</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_access_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">access_token</span><span class="p">):</span>
</span><span id="KiteConnect.set_access_token-241"><a href="#KiteConnect.set_access_token-241"><span class="linenos">241</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the `access_token` received after a successful authentication.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.set_access_token-242"><a href="#KiteConnect.set_access_token-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
</span></pre></div>


            <div class="docstring"><p>Set the <code><a href="#KiteConnect.access_token">access_token</a></code> received after a successful authentication.</p>
</div>


                            </div>
                            <div id="KiteConnect.login_url" class="classattr">
                                        <input id="KiteConnect.login_url-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">login_url</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.login_url-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.login_url"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.login_url-244"><a href="#KiteConnect.login_url-244"><span class="linenos">244</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">login_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.login_url-245"><a href="#KiteConnect.login_url-245"><span class="linenos">245</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the remote login url to which a user should be redirected to initiate the login flow.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.login_url-246"><a href="#KiteConnect.login_url-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">?api_key=</span><span class="si">%s</span><span class="s2">&amp;v=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_login_uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kite_header_version</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the remote login url to which a user should be redirected to initiate the login flow.</p>
</div>


                            </div>
                            <div id="KiteConnect.generate_session" class="classattr">
                                        <input id="KiteConnect.generate_session-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_session</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request_token</span>, </span><span class="param"><span class="n">api_secret</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.generate_session-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.generate_session"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.generate_session-248"><a href="#KiteConnect.generate_session-248"><span class="linenos">248</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_token</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">):</span>
</span><span id="KiteConnect.generate_session-249"><a href="#KiteConnect.generate_session-249"><span class="linenos">249</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.generate_session-250"><a href="#KiteConnect.generate_session-250"><span class="linenos">250</span></a><span class="sd">        Generate user session details like `access_token` etc by exchanging `request_token`.</span>
</span><span id="KiteConnect.generate_session-251"><a href="#KiteConnect.generate_session-251"><span class="linenos">251</span></a><span class="sd">        Access token is automatically set if the session is retrieved successfully.</span>
</span><span id="KiteConnect.generate_session-252"><a href="#KiteConnect.generate_session-252"><span class="linenos">252</span></a>
</span><span id="KiteConnect.generate_session-253"><a href="#KiteConnect.generate_session-253"><span class="linenos">253</span></a><span class="sd">        Do the token exchange with the `request_token` obtained after the login flow,</span>
</span><span id="KiteConnect.generate_session-254"><a href="#KiteConnect.generate_session-254"><span class="linenos">254</span></a><span class="sd">        and retrieve the `access_token` required for all subsequent requests. The</span>
</span><span id="KiteConnect.generate_session-255"><a href="#KiteConnect.generate_session-255"><span class="linenos">255</span></a><span class="sd">        response contains not just the `access_token`, but metadata for</span>
</span><span id="KiteConnect.generate_session-256"><a href="#KiteConnect.generate_session-256"><span class="linenos">256</span></a><span class="sd">        the user who has authenticated.</span>
</span><span id="KiteConnect.generate_session-257"><a href="#KiteConnect.generate_session-257"><span class="linenos">257</span></a>
</span><span id="KiteConnect.generate_session-258"><a href="#KiteConnect.generate_session-258"><span class="linenos">258</span></a><span class="sd">        - `request_token` is the token obtained from the GET paramers after a successful login redirect.</span>
</span><span id="KiteConnect.generate_session-259"><a href="#KiteConnect.generate_session-259"><span class="linenos">259</span></a><span class="sd">        - `api_secret` is the API api_secret issued with the API key.</span>
</span><span id="KiteConnect.generate_session-260"><a href="#KiteConnect.generate_session-260"><span class="linenos">260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.generate_session-261"><a href="#KiteConnect.generate_session-261"><span class="linenos">261</span></a>        <span class="n">h</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">request_token</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">api_secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
</span><span id="KiteConnect.generate_session-262"><a href="#KiteConnect.generate_session-262"><span class="linenos">262</span></a>        <span class="n">checksum</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="KiteConnect.generate_session-263"><a href="#KiteConnect.generate_session-263"><span class="linenos">263</span></a>
</span><span id="KiteConnect.generate_session-264"><a href="#KiteConnect.generate_session-264"><span class="linenos">264</span></a>        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;api.token&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.generate_session-265"><a href="#KiteConnect.generate_session-265"><span class="linenos">265</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect.generate_session-266"><a href="#KiteConnect.generate_session-266"><span class="linenos">266</span></a>            <span class="s2">&quot;request_token&quot;</span><span class="p">:</span> <span class="n">request_token</span><span class="p">,</span>
</span><span id="KiteConnect.generate_session-267"><a href="#KiteConnect.generate_session-267"><span class="linenos">267</span></a>            <span class="s2">&quot;checksum&quot;</span><span class="p">:</span> <span class="n">checksum</span>
</span><span id="KiteConnect.generate_session-268"><a href="#KiteConnect.generate_session-268"><span class="linenos">268</span></a>        <span class="p">})</span>
</span><span id="KiteConnect.generate_session-269"><a href="#KiteConnect.generate_session-269"><span class="linenos">269</span></a>
</span><span id="KiteConnect.generate_session-270"><a href="#KiteConnect.generate_session-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">:</span>
</span><span id="KiteConnect.generate_session-271"><a href="#KiteConnect.generate_session-271"><span class="linenos">271</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>
</span><span id="KiteConnect.generate_session-272"><a href="#KiteConnect.generate_session-272"><span class="linenos">272</span></a>
</span><span id="KiteConnect.generate_session-273"><a href="#KiteConnect.generate_session-273"><span class="linenos">273</span></a>        <span class="k">if</span> <span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span>
</span><span id="KiteConnect.generate_session-274"><a href="#KiteConnect.generate_session-274"><span class="linenos">274</span></a>            <span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;login_time&quot;</span><span class="p">])</span>
</span><span id="KiteConnect.generate_session-275"><a href="#KiteConnect.generate_session-275"><span class="linenos">275</span></a>
</span><span id="KiteConnect.generate_session-276"><a href="#KiteConnect.generate_session-276"><span class="linenos">276</span></a>        <span class="k">return</span> <span class="n">resp</span>
</span></pre></div>


            <div class="docstring"><p>Generate user session details like <code><a href="#KiteConnect.access_token">access_token</a></code> etc by exchanging <code>request_token</code>.
Access token is automatically set if the session is retrieved successfully.</p>

<p>Do the token exchange with the <code>request_token</code> obtained after the login flow,
and retrieve the <code><a href="#KiteConnect.access_token">access_token</a></code> required for all subsequent requests. The
response contains not just the <code><a href="#KiteConnect.access_token">access_token</a></code>, but metadata for
the user who has authenticated.</p>

<ul>
<li><code>request_token</code> is the token obtained from the GET paramers after a successful login redirect.</li>
<li><code>api_secret</code> is the API api_secret issued with the API key.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.invalidate_access_token" class="classattr">
                                        <input id="KiteConnect.invalidate_access_token-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">invalidate_access_token</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">access_token</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.invalidate_access_token-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.invalidate_access_token"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.invalidate_access_token-278"><a href="#KiteConnect.invalidate_access_token-278"><span class="linenos">278</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">invalidate_access_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">access_token</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.invalidate_access_token-279"><a href="#KiteConnect.invalidate_access_token-279"><span class="linenos">279</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.invalidate_access_token-280"><a href="#KiteConnect.invalidate_access_token-280"><span class="linenos">280</span></a><span class="sd">        Kill the session by invalidating the access token.</span>
</span><span id="KiteConnect.invalidate_access_token-281"><a href="#KiteConnect.invalidate_access_token-281"><span class="linenos">281</span></a>
</span><span id="KiteConnect.invalidate_access_token-282"><a href="#KiteConnect.invalidate_access_token-282"><span class="linenos">282</span></a><span class="sd">        - `access_token` to invalidate. Default is the active `access_token`.</span>
</span><span id="KiteConnect.invalidate_access_token-283"><a href="#KiteConnect.invalidate_access_token-283"><span class="linenos">283</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.invalidate_access_token-284"><a href="#KiteConnect.invalidate_access_token-284"><span class="linenos">284</span></a>        <span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span>
</span><span id="KiteConnect.invalidate_access_token-285"><a href="#KiteConnect.invalidate_access_token-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;api.token.invalidate&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.invalidate_access_token-286"><a href="#KiteConnect.invalidate_access_token-286"><span class="linenos">286</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect.invalidate_access_token-287"><a href="#KiteConnect.invalidate_access_token-287"><span class="linenos">287</span></a>            <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">access_token</span>
</span><span id="KiteConnect.invalidate_access_token-288"><a href="#KiteConnect.invalidate_access_token-288"><span class="linenos">288</span></a>        <span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Kill the session by invalidating the access token.</p>

<ul>
<li><code><a href="#KiteConnect.access_token">access_token</a></code> to invalidate. Default is the active <code><a href="#KiteConnect.access_token">access_token</a></code>.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.renew_access_token" class="classattr">
                                        <input id="KiteConnect.renew_access_token-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">renew_access_token</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">refresh_token</span>, </span><span class="param"><span class="n">api_secret</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.renew_access_token-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.renew_access_token"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.renew_access_token-290"><a href="#KiteConnect.renew_access_token-290"><span class="linenos">290</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">renew_access_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refresh_token</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">):</span>
</span><span id="KiteConnect.renew_access_token-291"><a href="#KiteConnect.renew_access_token-291"><span class="linenos">291</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.renew_access_token-292"><a href="#KiteConnect.renew_access_token-292"><span class="linenos">292</span></a><span class="sd">        Renew expired `refresh_token` using valid `refresh_token`.</span>
</span><span id="KiteConnect.renew_access_token-293"><a href="#KiteConnect.renew_access_token-293"><span class="linenos">293</span></a>
</span><span id="KiteConnect.renew_access_token-294"><a href="#KiteConnect.renew_access_token-294"><span class="linenos">294</span></a><span class="sd">        - `refresh_token` is the token obtained from previous successful login flow.</span>
</span><span id="KiteConnect.renew_access_token-295"><a href="#KiteConnect.renew_access_token-295"><span class="linenos">295</span></a><span class="sd">        - `api_secret` is the API api_secret issued with the API key.</span>
</span><span id="KiteConnect.renew_access_token-296"><a href="#KiteConnect.renew_access_token-296"><span class="linenos">296</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.renew_access_token-297"><a href="#KiteConnect.renew_access_token-297"><span class="linenos">297</span></a>        <span class="n">h</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">refresh_token</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">api_secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
</span><span id="KiteConnect.renew_access_token-298"><a href="#KiteConnect.renew_access_token-298"><span class="linenos">298</span></a>        <span class="n">checksum</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="KiteConnect.renew_access_token-299"><a href="#KiteConnect.renew_access_token-299"><span class="linenos">299</span></a>
</span><span id="KiteConnect.renew_access_token-300"><a href="#KiteConnect.renew_access_token-300"><span class="linenos">300</span></a>        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;api.token.renew&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.renew_access_token-301"><a href="#KiteConnect.renew_access_token-301"><span class="linenos">301</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect.renew_access_token-302"><a href="#KiteConnect.renew_access_token-302"><span class="linenos">302</span></a>            <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="n">refresh_token</span><span class="p">,</span>
</span><span id="KiteConnect.renew_access_token-303"><a href="#KiteConnect.renew_access_token-303"><span class="linenos">303</span></a>            <span class="s2">&quot;checksum&quot;</span><span class="p">:</span> <span class="n">checksum</span>
</span><span id="KiteConnect.renew_access_token-304"><a href="#KiteConnect.renew_access_token-304"><span class="linenos">304</span></a>        <span class="p">})</span>
</span><span id="KiteConnect.renew_access_token-305"><a href="#KiteConnect.renew_access_token-305"><span class="linenos">305</span></a>
</span><span id="KiteConnect.renew_access_token-306"><a href="#KiteConnect.renew_access_token-306"><span class="linenos">306</span></a>        <span class="k">if</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">:</span>
</span><span id="KiteConnect.renew_access_token-307"><a href="#KiteConnect.renew_access_token-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>
</span><span id="KiteConnect.renew_access_token-308"><a href="#KiteConnect.renew_access_token-308"><span class="linenos">308</span></a>
</span><span id="KiteConnect.renew_access_token-309"><a href="#KiteConnect.renew_access_token-309"><span class="linenos">309</span></a>        <span class="k">return</span> <span class="n">resp</span>
</span></pre></div>


            <div class="docstring"><p>Renew expired <code>refresh_token</code> using valid <code>refresh_token</code>.</p>

<ul>
<li><code>refresh_token</code> is the token obtained from previous successful login flow.</li>
<li><code>api_secret</code> is the API api_secret issued with the API key.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.invalidate_refresh_token" class="classattr">
                                        <input id="KiteConnect.invalidate_refresh_token-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">invalidate_refresh_token</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">refresh_token</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.invalidate_refresh_token-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.invalidate_refresh_token"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.invalidate_refresh_token-311"><a href="#KiteConnect.invalidate_refresh_token-311"><span class="linenos">311</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">invalidate_refresh_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refresh_token</span><span class="p">):</span>
</span><span id="KiteConnect.invalidate_refresh_token-312"><a href="#KiteConnect.invalidate_refresh_token-312"><span class="linenos">312</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.invalidate_refresh_token-313"><a href="#KiteConnect.invalidate_refresh_token-313"><span class="linenos">313</span></a><span class="sd">        Invalidate refresh token.</span>
</span><span id="KiteConnect.invalidate_refresh_token-314"><a href="#KiteConnect.invalidate_refresh_token-314"><span class="linenos">314</span></a>
</span><span id="KiteConnect.invalidate_refresh_token-315"><a href="#KiteConnect.invalidate_refresh_token-315"><span class="linenos">315</span></a><span class="sd">        - `refresh_token` is the token which is used to renew access token.</span>
</span><span id="KiteConnect.invalidate_refresh_token-316"><a href="#KiteConnect.invalidate_refresh_token-316"><span class="linenos">316</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.invalidate_refresh_token-317"><a href="#KiteConnect.invalidate_refresh_token-317"><span class="linenos">317</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;api.token.invalidate&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.invalidate_refresh_token-318"><a href="#KiteConnect.invalidate_refresh_token-318"><span class="linenos">318</span></a>            <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteConnect.invalidate_refresh_token-319"><a href="#KiteConnect.invalidate_refresh_token-319"><span class="linenos">319</span></a>            <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="n">refresh_token</span>
</span><span id="KiteConnect.invalidate_refresh_token-320"><a href="#KiteConnect.invalidate_refresh_token-320"><span class="linenos">320</span></a>        <span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Invalidate refresh token.</p>

<ul>
<li><code>refresh_token</code> is the token which is used to renew access token.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.margins" class="classattr">
                                        <input id="KiteConnect.margins-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">margins</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">segment</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.margins-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.margins"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.margins-322"><a href="#KiteConnect.margins-322"><span class="linenos">322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.margins-323"><a href="#KiteConnect.margins-323"><span class="linenos">323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get account balance and cash margin details for a particular segment.</span>
</span><span id="KiteConnect.margins-324"><a href="#KiteConnect.margins-324"><span class="linenos">324</span></a>
</span><span id="KiteConnect.margins-325"><a href="#KiteConnect.margins-325"><span class="linenos">325</span></a><span class="sd">        - `segment` is the trading segment (eg: equity or commodity)</span>
</span><span id="KiteConnect.margins-326"><a href="#KiteConnect.margins-326"><span class="linenos">326</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.margins-327"><a href="#KiteConnect.margins-327"><span class="linenos">327</span></a>        <span class="k">if</span> <span class="n">segment</span><span class="p">:</span>
</span><span id="KiteConnect.margins-328"><a href="#KiteConnect.margins-328"><span class="linenos">328</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;user.margins.segment&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;segment&quot;</span><span class="p">:</span> <span class="n">segment</span><span class="p">})</span>
</span><span id="KiteConnect.margins-329"><a href="#KiteConnect.margins-329"><span class="linenos">329</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect.margins-330"><a href="#KiteConnect.margins-330"><span class="linenos">330</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;user.margins&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get account balance and cash margin details for a particular segment.</p>

<ul>
<li><code>segment</code> is the trading segment (eg: equity or commodity)</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.profile" class="classattr">
                                        <input id="KiteConnect.profile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">profile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.profile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.profile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.profile-332"><a href="#KiteConnect.profile-332"><span class="linenos">332</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.profile-333"><a href="#KiteConnect.profile-333"><span class="linenos">333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user profile details.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.profile-334"><a href="#KiteConnect.profile-334"><span class="linenos">334</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;user.profile&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get user profile details.</p>
</div>


                            </div>
                            <div id="KiteConnect.place_order" class="classattr">
                                        <input id="KiteConnect.place_order-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">place_order</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">variety</span>,</span><span class="param">	<span class="n">exchange</span>,</span><span class="param">	<span class="n">tradingsymbol</span>,</span><span class="param">	<span class="n">transaction_type</span>,</span><span class="param">	<span class="n">quantity</span>,</span><span class="param">	<span class="n">product</span>,</span><span class="param">	<span class="n">order_type</span>,</span><span class="param">	<span class="n">price</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">validity</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">validity_ttl</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">disclosed_quantity</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">trigger_price</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">iceberg_legs</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">iceberg_quantity</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">auction_number</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">tag</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.place_order-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.place_order"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.place_order-337"><a href="#KiteConnect.place_order-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-338"><a href="#KiteConnect.place_order-338"><span class="linenos">338</span></a>                    <span class="n">variety</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-339"><a href="#KiteConnect.place_order-339"><span class="linenos">339</span></a>                    <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-340"><a href="#KiteConnect.place_order-340"><span class="linenos">340</span></a>                    <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-341"><a href="#KiteConnect.place_order-341"><span class="linenos">341</span></a>                    <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-342"><a href="#KiteConnect.place_order-342"><span class="linenos">342</span></a>                    <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-343"><a href="#KiteConnect.place_order-343"><span class="linenos">343</span></a>                    <span class="n">product</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-344"><a href="#KiteConnect.place_order-344"><span class="linenos">344</span></a>                    <span class="n">order_type</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-345"><a href="#KiteConnect.place_order-345"><span class="linenos">345</span></a>                    <span class="n">price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-346"><a href="#KiteConnect.place_order-346"><span class="linenos">346</span></a>                    <span class="n">validity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-347"><a href="#KiteConnect.place_order-347"><span class="linenos">347</span></a>                    <span class="n">validity_ttl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-348"><a href="#KiteConnect.place_order-348"><span class="linenos">348</span></a>                    <span class="n">disclosed_quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-349"><a href="#KiteConnect.place_order-349"><span class="linenos">349</span></a>                    <span class="n">trigger_price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-350"><a href="#KiteConnect.place_order-350"><span class="linenos">350</span></a>                    <span class="n">iceberg_legs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-351"><a href="#KiteConnect.place_order-351"><span class="linenos">351</span></a>                    <span class="n">iceberg_quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-352"><a href="#KiteConnect.place_order-352"><span class="linenos">352</span></a>                    <span class="n">auction_number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-353"><a href="#KiteConnect.place_order-353"><span class="linenos">353</span></a>                    <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.place_order-354"><a href="#KiteConnect.place_order-354"><span class="linenos">354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Place an order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.place_order-355"><a href="#KiteConnect.place_order-355"><span class="linenos">355</span></a>        <span class="n">params</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
</span><span id="KiteConnect.place_order-356"><a href="#KiteConnect.place_order-356"><span class="linenos">356</span></a>        <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;self&quot;</span><span class="p">])</span>
</span><span id="KiteConnect.place_order-357"><a href="#KiteConnect.place_order-357"><span class="linenos">357</span></a>
</span><span id="KiteConnect.place_order-358"><a href="#KiteConnect.place_order-358"><span class="linenos">358</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="KiteConnect.place_order-359"><a href="#KiteConnect.place_order-359"><span class="linenos">359</span></a>            <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="KiteConnect.place_order-360"><a href="#KiteConnect.place_order-360"><span class="linenos">360</span></a>                <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="KiteConnect.place_order-361"><a href="#KiteConnect.place_order-361"><span class="linenos">361</span></a>
</span><span id="KiteConnect.place_order-362"><a href="#KiteConnect.place_order-362"><span class="linenos">362</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.place&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.place_order-363"><a href="#KiteConnect.place_order-363"><span class="linenos">363</span></a>                          <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;variety&quot;</span><span class="p">:</span> <span class="n">variety</span><span class="p">},</span>
</span><span id="KiteConnect.place_order-364"><a href="#KiteConnect.place_order-364"><span class="linenos">364</span></a>                          <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)[</span><span class="s2">&quot;order_id&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Place an order.</p>
</div>


                            </div>
                            <div id="KiteConnect.modify_order" class="classattr">
                                        <input id="KiteConnect.modify_order-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">modify_order</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">variety</span>,</span><span class="param">	<span class="n">order_id</span>,</span><span class="param">	<span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">quantity</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">price</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">order_type</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">trigger_price</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">validity</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">disclosed_quantity</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.modify_order-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.modify_order"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.modify_order-366"><a href="#KiteConnect.modify_order-366"><span class="linenos">366</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modify_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-367"><a href="#KiteConnect.modify_order-367"><span class="linenos">367</span></a>                     <span class="n">variety</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-368"><a href="#KiteConnect.modify_order-368"><span class="linenos">368</span></a>                     <span class="n">order_id</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-369"><a href="#KiteConnect.modify_order-369"><span class="linenos">369</span></a>                     <span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-370"><a href="#KiteConnect.modify_order-370"><span class="linenos">370</span></a>                     <span class="n">quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-371"><a href="#KiteConnect.modify_order-371"><span class="linenos">371</span></a>                     <span class="n">price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-372"><a href="#KiteConnect.modify_order-372"><span class="linenos">372</span></a>                     <span class="n">order_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-373"><a href="#KiteConnect.modify_order-373"><span class="linenos">373</span></a>                     <span class="n">trigger_price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-374"><a href="#KiteConnect.modify_order-374"><span class="linenos">374</span></a>                     <span class="n">validity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-375"><a href="#KiteConnect.modify_order-375"><span class="linenos">375</span></a>                     <span class="n">disclosed_quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.modify_order-376"><a href="#KiteConnect.modify_order-376"><span class="linenos">376</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modify an open order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.modify_order-377"><a href="#KiteConnect.modify_order-377"><span class="linenos">377</span></a>        <span class="n">params</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
</span><span id="KiteConnect.modify_order-378"><a href="#KiteConnect.modify_order-378"><span class="linenos">378</span></a>        <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;self&quot;</span><span class="p">])</span>
</span><span id="KiteConnect.modify_order-379"><a href="#KiteConnect.modify_order-379"><span class="linenos">379</span></a>
</span><span id="KiteConnect.modify_order-380"><a href="#KiteConnect.modify_order-380"><span class="linenos">380</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="KiteConnect.modify_order-381"><a href="#KiteConnect.modify_order-381"><span class="linenos">381</span></a>            <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="KiteConnect.modify_order-382"><a href="#KiteConnect.modify_order-382"><span class="linenos">382</span></a>                <span class="k">del</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="KiteConnect.modify_order-383"><a href="#KiteConnect.modify_order-383"><span class="linenos">383</span></a>
</span><span id="KiteConnect.modify_order-384"><a href="#KiteConnect.modify_order-384"><span class="linenos">384</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;order.modify&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.modify_order-385"><a href="#KiteConnect.modify_order-385"><span class="linenos">385</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;variety&quot;</span><span class="p">:</span> <span class="n">variety</span><span class="p">,</span> <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">},</span>
</span><span id="KiteConnect.modify_order-386"><a href="#KiteConnect.modify_order-386"><span class="linenos">386</span></a>                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)[</span><span class="s2">&quot;order_id&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Modify an open order.</p>
</div>


                            </div>
                            <div id="KiteConnect.cancel_order" class="classattr">
                                        <input id="KiteConnect.cancel_order-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cancel_order</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variety</span>, </span><span class="param"><span class="n">order_id</span>, </span><span class="param"><span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.cancel_order-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.cancel_order"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.cancel_order-388"><a href="#KiteConnect.cancel_order-388"><span class="linenos">388</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variety</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.cancel_order-389"><a href="#KiteConnect.cancel_order-389"><span class="linenos">389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel an order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.cancel_order-390"><a href="#KiteConnect.cancel_order-390"><span class="linenos">390</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;order.cancel&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.cancel_order-391"><a href="#KiteConnect.cancel_order-391"><span class="linenos">391</span></a>                            <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;variety&quot;</span><span class="p">:</span> <span class="n">variety</span><span class="p">,</span> <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">},</span>
</span><span id="KiteConnect.cancel_order-392"><a href="#KiteConnect.cancel_order-392"><span class="linenos">392</span></a>                            <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;parent_order_id&quot;</span><span class="p">:</span> <span class="n">parent_order_id</span><span class="p">})[</span><span class="s2">&quot;order_id&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Cancel an order.</p>
</div>


                            </div>
                            <div id="KiteConnect.exit_order" class="classattr">
                                        <input id="KiteConnect.exit_order-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">exit_order</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variety</span>, </span><span class="param"><span class="n">order_id</span>, </span><span class="param"><span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.exit_order-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.exit_order"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.exit_order-394"><a href="#KiteConnect.exit_order-394"><span class="linenos">394</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">exit_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variety</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">parent_order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.exit_order-395"><a href="#KiteConnect.exit_order-395"><span class="linenos">395</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Exit a CO order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.exit_order-396"><a href="#KiteConnect.exit_order-396"><span class="linenos">396</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancel_order</span><span class="p">(</span><span class="n">variety</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">parent_order_id</span><span class="o">=</span><span class="n">parent_order_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Exit a CO order.</p>
</div>


                            </div>
                            <div id="KiteConnect.orders" class="classattr">
                                        <input id="KiteConnect.orders-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">orders</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.orders-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.orders"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.orders-415"><a href="#KiteConnect.orders-415"><span class="linenos">415</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">orders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.orders-416"><a href="#KiteConnect.orders-416"><span class="linenos">416</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of orders.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.orders-417"><a href="#KiteConnect.orders-417"><span class="linenos">417</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;orders&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get list of orders.</p>
</div>


                            </div>
                            <div id="KiteConnect.order_history" class="classattr">
                                        <input id="KiteConnect.order_history-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">order_history</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">order_id</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.order_history-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.order_history"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.order_history-419"><a href="#KiteConnect.order_history-419"><span class="linenos">419</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">order_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">):</span>
</span><span id="KiteConnect.order_history-420"><a href="#KiteConnect.order_history-420"><span class="linenos">420</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.order_history-421"><a href="#KiteConnect.order_history-421"><span class="linenos">421</span></a><span class="sd">        Get history of individual order.</span>
</span><span id="KiteConnect.order_history-422"><a href="#KiteConnect.order_history-422"><span class="linenos">422</span></a>
</span><span id="KiteConnect.order_history-423"><a href="#KiteConnect.order_history-423"><span class="linenos">423</span></a><span class="sd">        - `order_id` is the ID of the order to retrieve order history.</span>
</span><span id="KiteConnect.order_history-424"><a href="#KiteConnect.order_history-424"><span class="linenos">424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.order_history-425"><a href="#KiteConnect.order_history-425"><span class="linenos">425</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;order.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">}))</span>
</span></pre></div>


            <div class="docstring"><p>Get history of individual order.</p>

<ul>
<li><code>order_id</code> is the ID of the order to retrieve order history.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.trades" class="classattr">
                                        <input id="KiteConnect.trades-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trades</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.trades-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.trades"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.trades-427"><a href="#KiteConnect.trades-427"><span class="linenos">427</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">trades</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.trades-428"><a href="#KiteConnect.trades-428"><span class="linenos">428</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.trades-429"><a href="#KiteConnect.trades-429"><span class="linenos">429</span></a><span class="sd">        Retrieve the list of trades executed (all or ones under a particular order).</span>
</span><span id="KiteConnect.trades-430"><a href="#KiteConnect.trades-430"><span class="linenos">430</span></a>
</span><span id="KiteConnect.trades-431"><a href="#KiteConnect.trades-431"><span class="linenos">431</span></a><span class="sd">        An order can be executed in tranches based on market conditions.</span>
</span><span id="KiteConnect.trades-432"><a href="#KiteConnect.trades-432"><span class="linenos">432</span></a><span class="sd">        These trades are individually recorded under an order.</span>
</span><span id="KiteConnect.trades-433"><a href="#KiteConnect.trades-433"><span class="linenos">433</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.trades-434"><a href="#KiteConnect.trades-434"><span class="linenos">434</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;trades&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the list of trades executed (all or ones under a particular order).</p>

<p>An order can be executed in tranches based on market conditions.
These trades are individually recorded under an order.</p>
</div>


                            </div>
                            <div id="KiteConnect.order_trades" class="classattr">
                                        <input id="KiteConnect.order_trades-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">order_trades</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">order_id</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.order_trades-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.order_trades"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.order_trades-436"><a href="#KiteConnect.order_trades-436"><span class="linenos">436</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">order_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">):</span>
</span><span id="KiteConnect.order_trades-437"><a href="#KiteConnect.order_trades-437"><span class="linenos">437</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.order_trades-438"><a href="#KiteConnect.order_trades-438"><span class="linenos">438</span></a><span class="sd">        Retrieve the list of trades executed for a particular order.</span>
</span><span id="KiteConnect.order_trades-439"><a href="#KiteConnect.order_trades-439"><span class="linenos">439</span></a>
</span><span id="KiteConnect.order_trades-440"><a href="#KiteConnect.order_trades-440"><span class="linenos">440</span></a><span class="sd">        - `order_id` is the ID of the order to retrieve trade history.</span>
</span><span id="KiteConnect.order_trades-441"><a href="#KiteConnect.order_trades-441"><span class="linenos">441</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.order_trades-442"><a href="#KiteConnect.order_trades-442"><span class="linenos">442</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;order.trades&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">}))</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the list of trades executed for a particular order.</p>

<ul>
<li><code>order_id</code> is the ID of the order to retrieve trade history.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.positions" class="classattr">
                                        <input id="KiteConnect.positions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">positions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.positions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.positions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.positions-444"><a href="#KiteConnect.positions-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">positions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.positions-445"><a href="#KiteConnect.positions-445"><span class="linenos">445</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the list of positions.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.positions-446"><a href="#KiteConnect.positions-446"><span class="linenos">446</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;portfolio.positions&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the list of positions.</p>
</div>


                            </div>
                            <div id="KiteConnect.holdings" class="classattr">
                                        <input id="KiteConnect.holdings-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">holdings</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.holdings-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.holdings"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.holdings-448"><a href="#KiteConnect.holdings-448"><span class="linenos">448</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">holdings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.holdings-449"><a href="#KiteConnect.holdings-449"><span class="linenos">449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the list of equity holdings.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.holdings-450"><a href="#KiteConnect.holdings-450"><span class="linenos">450</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;portfolio.holdings&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the list of equity holdings.</p>
</div>


                            </div>
                            <div id="KiteConnect.get_auction_instruments" class="classattr">
                                        <input id="KiteConnect.get_auction_instruments-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_auction_instruments</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.get_auction_instruments-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.get_auction_instruments"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.get_auction_instruments-452"><a href="#KiteConnect.get_auction_instruments-452"><span class="linenos">452</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_auction_instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.get_auction_instruments-453"><a href="#KiteConnect.get_auction_instruments-453"><span class="linenos">453</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; Retrieves list of available instruments for a auction session &quot;&quot;&quot;</span>
</span><span id="KiteConnect.get_auction_instruments-454"><a href="#KiteConnect.get_auction_instruments-454"><span class="linenos">454</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;portfolio.holdings.auction&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieves list of available instruments for a auction session</p>
</div>


                            </div>
                            <div id="KiteConnect.convert_position" class="classattr">
                                        <input id="KiteConnect.convert_position-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">convert_position</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">exchange</span>,</span><span class="param">	<span class="n">tradingsymbol</span>,</span><span class="param">	<span class="n">transaction_type</span>,</span><span class="param">	<span class="n">position_type</span>,</span><span class="param">	<span class="n">quantity</span>,</span><span class="param">	<span class="n">old_product</span>,</span><span class="param">	<span class="n">new_product</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.convert_position-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.convert_position"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.convert_position-456"><a href="#KiteConnect.convert_position-456"><span class="linenos">456</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">convert_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-457"><a href="#KiteConnect.convert_position-457"><span class="linenos">457</span></a>                         <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-458"><a href="#KiteConnect.convert_position-458"><span class="linenos">458</span></a>                         <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-459"><a href="#KiteConnect.convert_position-459"><span class="linenos">459</span></a>                         <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-460"><a href="#KiteConnect.convert_position-460"><span class="linenos">460</span></a>                         <span class="n">position_type</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-461"><a href="#KiteConnect.convert_position-461"><span class="linenos">461</span></a>                         <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-462"><a href="#KiteConnect.convert_position-462"><span class="linenos">462</span></a>                         <span class="n">old_product</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-463"><a href="#KiteConnect.convert_position-463"><span class="linenos">463</span></a>                         <span class="n">new_product</span><span class="p">):</span>
</span><span id="KiteConnect.convert_position-464"><a href="#KiteConnect.convert_position-464"><span class="linenos">464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modify an open position&#39;s product type.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.convert_position-465"><a href="#KiteConnect.convert_position-465"><span class="linenos">465</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;portfolio.positions.convert&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.convert_position-466"><a href="#KiteConnect.convert_position-466"><span class="linenos">466</span></a>            <span class="s2">&quot;exchange&quot;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-467"><a href="#KiteConnect.convert_position-467"><span class="linenos">467</span></a>            <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-468"><a href="#KiteConnect.convert_position-468"><span class="linenos">468</span></a>            <span class="s2">&quot;transaction_type&quot;</span><span class="p">:</span> <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-469"><a href="#KiteConnect.convert_position-469"><span class="linenos">469</span></a>            <span class="s2">&quot;position_type&quot;</span><span class="p">:</span> <span class="n">position_type</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-470"><a href="#KiteConnect.convert_position-470"><span class="linenos">470</span></a>            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-471"><a href="#KiteConnect.convert_position-471"><span class="linenos">471</span></a>            <span class="s2">&quot;old_product&quot;</span><span class="p">:</span> <span class="n">old_product</span><span class="p">,</span>
</span><span id="KiteConnect.convert_position-472"><a href="#KiteConnect.convert_position-472"><span class="linenos">472</span></a>            <span class="s2">&quot;new_product&quot;</span><span class="p">:</span> <span class="n">new_product</span>
</span><span id="KiteConnect.convert_position-473"><a href="#KiteConnect.convert_position-473"><span class="linenos">473</span></a>        <span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Modify an open position's product type.</p>
</div>


                            </div>
                            <div id="KiteConnect.mf_orders" class="classattr">
                                        <input id="KiteConnect.mf_orders-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mf_orders</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">order_id</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.mf_orders-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.mf_orders"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.mf_orders-475"><a href="#KiteConnect.mf_orders-475"><span class="linenos">475</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.mf_orders-476"><a href="#KiteConnect.mf_orders-476"><span class="linenos">476</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all mutual fund orders or individual order info.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.mf_orders-477"><a href="#KiteConnect.mf_orders-477"><span class="linenos">477</span></a>        <span class="k">if</span> <span class="n">order_id</span><span class="p">:</span>
</span><span id="KiteConnect.mf_orders-478"><a href="#KiteConnect.mf_orders-478"><span class="linenos">478</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.order.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">}))</span>
</span><span id="KiteConnect.mf_orders-479"><a href="#KiteConnect.mf_orders-479"><span class="linenos">479</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect.mf_orders-480"><a href="#KiteConnect.mf_orders-480"><span class="linenos">480</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.orders&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get all mutual fund orders or individual order info.</p>
</div>


                            </div>
                            <div id="KiteConnect.place_mf_order" class="classattr">
                                        <input id="KiteConnect.place_mf_order-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">place_mf_order</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">tradingsymbol</span>,</span><span class="param">	<span class="n">transaction_type</span>,</span><span class="param">	<span class="n">quantity</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">amount</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">tag</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.place_mf_order-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.place_mf_order"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.place_mf_order-482"><a href="#KiteConnect.place_mf_order-482"><span class="linenos">482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_mf_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-483"><a href="#KiteConnect.place_mf_order-483"><span class="linenos">483</span></a>                       <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-484"><a href="#KiteConnect.place_mf_order-484"><span class="linenos">484</span></a>                       <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-485"><a href="#KiteConnect.place_mf_order-485"><span class="linenos">485</span></a>                       <span class="n">quantity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-486"><a href="#KiteConnect.place_mf_order-486"><span class="linenos">486</span></a>                       <span class="n">amount</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-487"><a href="#KiteConnect.place_mf_order-487"><span class="linenos">487</span></a>                       <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.place_mf_order-488"><a href="#KiteConnect.place_mf_order-488"><span class="linenos">488</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Place a mutual fund order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.place_mf_order-489"><a href="#KiteConnect.place_mf_order-489"><span class="linenos">489</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;mf.order.place&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.place_mf_order-490"><a href="#KiteConnect.place_mf_order-490"><span class="linenos">490</span></a>            <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-491"><a href="#KiteConnect.place_mf_order-491"><span class="linenos">491</span></a>            <span class="s2">&quot;transaction_type&quot;</span><span class="p">:</span> <span class="n">transaction_type</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-492"><a href="#KiteConnect.place_mf_order-492"><span class="linenos">492</span></a>            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-493"><a href="#KiteConnect.place_mf_order-493"><span class="linenos">493</span></a>            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_order-494"><a href="#KiteConnect.place_mf_order-494"><span class="linenos">494</span></a>            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span>
</span><span id="KiteConnect.place_mf_order-495"><a href="#KiteConnect.place_mf_order-495"><span class="linenos">495</span></a>        <span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Place a mutual fund order.</p>
</div>


                            </div>
                            <div id="KiteConnect.cancel_mf_order" class="classattr">
                                        <input id="KiteConnect.cancel_mf_order-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cancel_mf_order</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">order_id</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.cancel_mf_order-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.cancel_mf_order"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.cancel_mf_order-497"><a href="#KiteConnect.cancel_mf_order-497"><span class="linenos">497</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_mf_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">):</span>
</span><span id="KiteConnect.cancel_mf_order-498"><a href="#KiteConnect.cancel_mf_order-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel a mutual fund order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.cancel_mf_order-499"><a href="#KiteConnect.cancel_mf_order-499"><span class="linenos">499</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;mf.order.cancel&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Cancel a mutual fund order.</p>
</div>


                            </div>
                            <div id="KiteConnect.mf_sips" class="classattr">
                                        <input id="KiteConnect.mf_sips-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mf_sips</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">sip_id</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.mf_sips-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.mf_sips"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.mf_sips-501"><a href="#KiteConnect.mf_sips-501"><span class="linenos">501</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_sips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sip_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.mf_sips-502"><a href="#KiteConnect.mf_sips-502"><span class="linenos">502</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of all mutual fund SIP&#39;s or individual SIP info.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.mf_sips-503"><a href="#KiteConnect.mf_sips-503"><span class="linenos">503</span></a>        <span class="k">if</span> <span class="n">sip_id</span><span class="p">:</span>
</span><span id="KiteConnect.mf_sips-504"><a href="#KiteConnect.mf_sips-504"><span class="linenos">504</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.sip.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sip_id&quot;</span><span class="p">:</span> <span class="n">sip_id</span><span class="p">}))</span>
</span><span id="KiteConnect.mf_sips-505"><a href="#KiteConnect.mf_sips-505"><span class="linenos">505</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect.mf_sips-506"><a href="#KiteConnect.mf_sips-506"><span class="linenos">506</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.sips&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get list of all mutual fund SIP's or individual SIP info.</p>
</div>


                            </div>
                            <div id="KiteConnect.place_mf_sip" class="classattr">
                                        <input id="KiteConnect.place_mf_sip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">place_mf_sip</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">tradingsymbol</span>,</span><span class="param">	<span class="n">amount</span>,</span><span class="param">	<span class="n">instalments</span>,</span><span class="param">	<span class="n">frequency</span>,</span><span class="param">	<span class="n">initial_amount</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">instalment_day</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">tag</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.place_mf_sip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.place_mf_sip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.place_mf_sip-508"><a href="#KiteConnect.place_mf_sip-508"><span class="linenos">508</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_mf_sip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-509"><a href="#KiteConnect.place_mf_sip-509"><span class="linenos">509</span></a>                     <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-510"><a href="#KiteConnect.place_mf_sip-510"><span class="linenos">510</span></a>                     <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-511"><a href="#KiteConnect.place_mf_sip-511"><span class="linenos">511</span></a>                     <span class="n">instalments</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-512"><a href="#KiteConnect.place_mf_sip-512"><span class="linenos">512</span></a>                     <span class="n">frequency</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-513"><a href="#KiteConnect.place_mf_sip-513"><span class="linenos">513</span></a>                     <span class="n">initial_amount</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-514"><a href="#KiteConnect.place_mf_sip-514"><span class="linenos">514</span></a>                     <span class="n">instalment_day</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-515"><a href="#KiteConnect.place_mf_sip-515"><span class="linenos">515</span></a>                     <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.place_mf_sip-516"><a href="#KiteConnect.place_mf_sip-516"><span class="linenos">516</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Place a mutual fund SIP.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.place_mf_sip-517"><a href="#KiteConnect.place_mf_sip-517"><span class="linenos">517</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;mf.sip.place&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.place_mf_sip-518"><a href="#KiteConnect.place_mf_sip-518"><span class="linenos">518</span></a>            <span class="s2">&quot;tradingsymbol&quot;</span><span class="p">:</span> <span class="n">tradingsymbol</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-519"><a href="#KiteConnect.place_mf_sip-519"><span class="linenos">519</span></a>            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-520"><a href="#KiteConnect.place_mf_sip-520"><span class="linenos">520</span></a>            <span class="s2">&quot;initial_amount&quot;</span><span class="p">:</span> <span class="n">initial_amount</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-521"><a href="#KiteConnect.place_mf_sip-521"><span class="linenos">521</span></a>            <span class="s2">&quot;instalments&quot;</span><span class="p">:</span> <span class="n">instalments</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-522"><a href="#KiteConnect.place_mf_sip-522"><span class="linenos">522</span></a>            <span class="s2">&quot;frequency&quot;</span><span class="p">:</span> <span class="n">frequency</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-523"><a href="#KiteConnect.place_mf_sip-523"><span class="linenos">523</span></a>            <span class="s2">&quot;instalment_day&quot;</span><span class="p">:</span> <span class="n">instalment_day</span><span class="p">,</span>
</span><span id="KiteConnect.place_mf_sip-524"><a href="#KiteConnect.place_mf_sip-524"><span class="linenos">524</span></a>            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span>
</span><span id="KiteConnect.place_mf_sip-525"><a href="#KiteConnect.place_mf_sip-525"><span class="linenos">525</span></a>        <span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Place a mutual fund SIP.</p>
</div>


                            </div>
                            <div id="KiteConnect.modify_mf_sip" class="classattr">
                                        <input id="KiteConnect.modify_mf_sip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">modify_mf_sip</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">sip_id</span>,</span><span class="param">	<span class="n">amount</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">status</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">instalments</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">frequency</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">instalment_day</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.modify_mf_sip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.modify_mf_sip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.modify_mf_sip-527"><a href="#KiteConnect.modify_mf_sip-527"><span class="linenos">527</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modify_mf_sip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-528"><a href="#KiteConnect.modify_mf_sip-528"><span class="linenos">528</span></a>                      <span class="n">sip_id</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-529"><a href="#KiteConnect.modify_mf_sip-529"><span class="linenos">529</span></a>                      <span class="n">amount</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-530"><a href="#KiteConnect.modify_mf_sip-530"><span class="linenos">530</span></a>                      <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-531"><a href="#KiteConnect.modify_mf_sip-531"><span class="linenos">531</span></a>                      <span class="n">instalments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-532"><a href="#KiteConnect.modify_mf_sip-532"><span class="linenos">532</span></a>                      <span class="n">frequency</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-533"><a href="#KiteConnect.modify_mf_sip-533"><span class="linenos">533</span></a>                      <span class="n">instalment_day</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.modify_mf_sip-534"><a href="#KiteConnect.modify_mf_sip-534"><span class="linenos">534</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modify a mutual fund SIP.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.modify_mf_sip-535"><a href="#KiteConnect.modify_mf_sip-535"><span class="linenos">535</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;mf.sip.modify&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-536"><a href="#KiteConnect.modify_mf_sip-536"><span class="linenos">536</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sip_id&quot;</span><span class="p">:</span> <span class="n">sip_id</span><span class="p">},</span>
</span><span id="KiteConnect.modify_mf_sip-537"><a href="#KiteConnect.modify_mf_sip-537"><span class="linenos">537</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.modify_mf_sip-538"><a href="#KiteConnect.modify_mf_sip-538"><span class="linenos">538</span></a>                             <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-539"><a href="#KiteConnect.modify_mf_sip-539"><span class="linenos">539</span></a>                             <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">status</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-540"><a href="#KiteConnect.modify_mf_sip-540"><span class="linenos">540</span></a>                             <span class="s2">&quot;instalments&quot;</span><span class="p">:</span> <span class="n">instalments</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-541"><a href="#KiteConnect.modify_mf_sip-541"><span class="linenos">541</span></a>                             <span class="s2">&quot;frequency&quot;</span><span class="p">:</span> <span class="n">frequency</span><span class="p">,</span>
</span><span id="KiteConnect.modify_mf_sip-542"><a href="#KiteConnect.modify_mf_sip-542"><span class="linenos">542</span></a>                             <span class="s2">&quot;instalment_day&quot;</span><span class="p">:</span> <span class="n">instalment_day</span>
</span><span id="KiteConnect.modify_mf_sip-543"><a href="#KiteConnect.modify_mf_sip-543"><span class="linenos">543</span></a>                         <span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Modify a mutual fund SIP.</p>
</div>


                            </div>
                            <div id="KiteConnect.cancel_mf_sip" class="classattr">
                                        <input id="KiteConnect.cancel_mf_sip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cancel_mf_sip</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">sip_id</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.cancel_mf_sip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.cancel_mf_sip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.cancel_mf_sip-545"><a href="#KiteConnect.cancel_mf_sip-545"><span class="linenos">545</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_mf_sip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sip_id</span><span class="p">):</span>
</span><span id="KiteConnect.cancel_mf_sip-546"><a href="#KiteConnect.cancel_mf_sip-546"><span class="linenos">546</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel a mutual fund SIP.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.cancel_mf_sip-547"><a href="#KiteConnect.cancel_mf_sip-547"><span class="linenos">547</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;mf.sip.cancel&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sip_id&quot;</span><span class="p">:</span> <span class="n">sip_id</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Cancel a mutual fund SIP.</p>
</div>


                            </div>
                            <div id="KiteConnect.mf_holdings" class="classattr">
                                        <input id="KiteConnect.mf_holdings-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mf_holdings</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.mf_holdings-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.mf_holdings"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.mf_holdings-549"><a href="#KiteConnect.mf_holdings-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_holdings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.mf_holdings-550"><a href="#KiteConnect.mf_holdings-550"><span class="linenos">550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of mutual fund holdings.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.mf_holdings-551"><a href="#KiteConnect.mf_holdings-551"><span class="linenos">551</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.holdings&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get list of mutual fund holdings.</p>
</div>


                            </div>
                            <div id="KiteConnect.mf_instruments" class="classattr">
                                        <input id="KiteConnect.mf_instruments-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mf_instruments</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.mf_instruments-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.mf_instruments"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.mf_instruments-553"><a href="#KiteConnect.mf_instruments-553"><span class="linenos">553</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mf_instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.mf_instruments-554"><a href="#KiteConnect.mf_instruments-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of mutual fund instruments.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.mf_instruments-555"><a href="#KiteConnect.mf_instruments-555"><span class="linenos">555</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_mf_instruments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;mf.instruments&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get list of mutual fund instruments.</p>
</div>


                            </div>
                            <div id="KiteConnect.instruments" class="classattr">
                                        <input id="KiteConnect.instruments-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">instruments</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">exchange</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.instruments-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.instruments"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.instruments-557"><a href="#KiteConnect.instruments-557"><span class="linenos">557</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">instruments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.instruments-558"><a href="#KiteConnect.instruments-558"><span class="linenos">558</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.instruments-559"><a href="#KiteConnect.instruments-559"><span class="linenos">559</span></a><span class="sd">        Retrieve the list of market instruments available to trade.</span>
</span><span id="KiteConnect.instruments-560"><a href="#KiteConnect.instruments-560"><span class="linenos">560</span></a>
</span><span id="KiteConnect.instruments-561"><a href="#KiteConnect.instruments-561"><span class="linenos">561</span></a><span class="sd">        Note that the results could be large, several hundred KBs in size,</span>
</span><span id="KiteConnect.instruments-562"><a href="#KiteConnect.instruments-562"><span class="linenos">562</span></a><span class="sd">        with tens of thousands of entries in the list.</span>
</span><span id="KiteConnect.instruments-563"><a href="#KiteConnect.instruments-563"><span class="linenos">563</span></a>
</span><span id="KiteConnect.instruments-564"><a href="#KiteConnect.instruments-564"><span class="linenos">564</span></a><span class="sd">        - `exchange` is specific exchange to fetch (Optional)</span>
</span><span id="KiteConnect.instruments-565"><a href="#KiteConnect.instruments-565"><span class="linenos">565</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.instruments-566"><a href="#KiteConnect.instruments-566"><span class="linenos">566</span></a>        <span class="k">if</span> <span class="n">exchange</span><span class="p">:</span>
</span><span id="KiteConnect.instruments-567"><a href="#KiteConnect.instruments-567"><span class="linenos">567</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_instruments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.instruments&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;exchange&quot;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">}))</span>
</span><span id="KiteConnect.instruments-568"><a href="#KiteConnect.instruments-568"><span class="linenos">568</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteConnect.instruments-569"><a href="#KiteConnect.instruments-569"><span class="linenos">569</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_instruments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.instruments.all&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the list of market instruments available to trade.</p>

<p>Note that the results could be large, several hundred KBs in size,
with tens of thousands of entries in the list.</p>

<ul>
<li><code>exchange</code> is specific exchange to fetch (Optional)</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.quote" class="classattr">
                                        <input id="KiteConnect.quote-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">quote</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">instruments</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.quote-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.quote"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.quote-571"><a href="#KiteConnect.quote-571"><span class="linenos">571</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">quote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect.quote-572"><a href="#KiteConnect.quote-572"><span class="linenos">572</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.quote-573"><a href="#KiteConnect.quote-573"><span class="linenos">573</span></a><span class="sd">        Retrieve quote for list of instruments.</span>
</span><span id="KiteConnect.quote-574"><a href="#KiteConnect.quote-574"><span class="linenos">574</span></a>
</span><span id="KiteConnect.quote-575"><a href="#KiteConnect.quote-575"><span class="linenos">575</span></a><span class="sd">        - `instruments` is a list of instruments, Instrument are in the format of `exchange:tradingsymbol`. For example NSE:INFY</span>
</span><span id="KiteConnect.quote-576"><a href="#KiteConnect.quote-576"><span class="linenos">576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.quote-577"><a href="#KiteConnect.quote-577"><span class="linenos">577</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect.quote-578"><a href="#KiteConnect.quote-578"><span class="linenos">578</span></a>
</span><span id="KiteConnect.quote-579"><a href="#KiteConnect.quote-579"><span class="linenos">579</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect.quote-580"><a href="#KiteConnect.quote-580"><span class="linenos">580</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect.quote-581"><a href="#KiteConnect.quote-581"><span class="linenos">581</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect.quote-582"><a href="#KiteConnect.quote-582"><span class="linenos">582</span></a>
</span><span id="KiteConnect.quote-583"><a href="#KiteConnect.quote-583"><span class="linenos">583</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.quote&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span><span id="KiteConnect.quote-584"><a href="#KiteConnect.quote-584"><span class="linenos">584</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_response</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve quote for list of instruments.</p>

<ul>
<li><code><a href="#KiteConnect.instruments">instruments</a></code> is a list of instruments, Instrument are in the format of <code>exchange:tradingsymbol</code>. For example NSE:INFY</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.ohlc" class="classattr">
                                        <input id="KiteConnect.ohlc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ohlc</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">instruments</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.ohlc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.ohlc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.ohlc-586"><a href="#KiteConnect.ohlc-586"><span class="linenos">586</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ohlc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect.ohlc-587"><a href="#KiteConnect.ohlc-587"><span class="linenos">587</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.ohlc-588"><a href="#KiteConnect.ohlc-588"><span class="linenos">588</span></a><span class="sd">        Retrieve OHLC and market depth for list of instruments.</span>
</span><span id="KiteConnect.ohlc-589"><a href="#KiteConnect.ohlc-589"><span class="linenos">589</span></a>
</span><span id="KiteConnect.ohlc-590"><a href="#KiteConnect.ohlc-590"><span class="linenos">590</span></a><span class="sd">        - `instruments` is a list of instruments, Instrument are in the format of `exchange:tradingsymbol`. For example NSE:INFY</span>
</span><span id="KiteConnect.ohlc-591"><a href="#KiteConnect.ohlc-591"><span class="linenos">591</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.ohlc-592"><a href="#KiteConnect.ohlc-592"><span class="linenos">592</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect.ohlc-593"><a href="#KiteConnect.ohlc-593"><span class="linenos">593</span></a>
</span><span id="KiteConnect.ohlc-594"><a href="#KiteConnect.ohlc-594"><span class="linenos">594</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect.ohlc-595"><a href="#KiteConnect.ohlc-595"><span class="linenos">595</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect.ohlc-596"><a href="#KiteConnect.ohlc-596"><span class="linenos">596</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect.ohlc-597"><a href="#KiteConnect.ohlc-597"><span class="linenos">597</span></a>
</span><span id="KiteConnect.ohlc-598"><a href="#KiteConnect.ohlc-598"><span class="linenos">598</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.quote.ohlc&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve OHLC and market depth for list of instruments.</p>

<ul>
<li><code><a href="#KiteConnect.instruments">instruments</a></code> is a list of instruments, Instrument are in the format of <code>exchange:tradingsymbol</code>. For example NSE:INFY</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.ltp" class="classattr">
                                        <input id="KiteConnect.ltp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ltp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">instruments</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.ltp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.ltp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.ltp-600"><a href="#KiteConnect.ltp-600"><span class="linenos">600</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ltp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect.ltp-601"><a href="#KiteConnect.ltp-601"><span class="linenos">601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.ltp-602"><a href="#KiteConnect.ltp-602"><span class="linenos">602</span></a><span class="sd">        Retrieve last price for list of instruments.</span>
</span><span id="KiteConnect.ltp-603"><a href="#KiteConnect.ltp-603"><span class="linenos">603</span></a>
</span><span id="KiteConnect.ltp-604"><a href="#KiteConnect.ltp-604"><span class="linenos">604</span></a><span class="sd">        - `instruments` is a list of instruments, Instrument are in the format of `exchange:tradingsymbol`. For example NSE:INFY</span>
</span><span id="KiteConnect.ltp-605"><a href="#KiteConnect.ltp-605"><span class="linenos">605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.ltp-606"><a href="#KiteConnect.ltp-606"><span class="linenos">606</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect.ltp-607"><a href="#KiteConnect.ltp-607"><span class="linenos">607</span></a>
</span><span id="KiteConnect.ltp-608"><a href="#KiteConnect.ltp-608"><span class="linenos">608</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect.ltp-609"><a href="#KiteConnect.ltp-609"><span class="linenos">609</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect.ltp-610"><a href="#KiteConnect.ltp-610"><span class="linenos">610</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect.ltp-611"><a href="#KiteConnect.ltp-611"><span class="linenos">611</span></a>
</span><span id="KiteConnect.ltp-612"><a href="#KiteConnect.ltp-612"><span class="linenos">612</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.quote.ltp&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve last price for list of instruments.</p>

<ul>
<li><code><a href="#KiteConnect.instruments">instruments</a></code> is a list of instruments, Instrument are in the format of <code>exchange:tradingsymbol</code>. For example NSE:INFY</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.historical_data" class="classattr">
                                        <input id="KiteConnect.historical_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">historical_data</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">instrument_token</span>,</span><span class="param">	<span class="n">from_date</span>,</span><span class="param">	<span class="n">to_date</span>,</span><span class="param">	<span class="n">interval</span>,</span><span class="param">	<span class="n">continuous</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">oi</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.historical_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.historical_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.historical_data-614"><a href="#KiteConnect.historical_data-614"><span class="linenos">614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">historical_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument_token</span><span class="p">,</span> <span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">continuous</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">oi</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="KiteConnect.historical_data-615"><a href="#KiteConnect.historical_data-615"><span class="linenos">615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.historical_data-616"><a href="#KiteConnect.historical_data-616"><span class="linenos">616</span></a><span class="sd">        Retrieve historical data (candles) for an instrument.</span>
</span><span id="KiteConnect.historical_data-617"><a href="#KiteConnect.historical_data-617"><span class="linenos">617</span></a>
</span><span id="KiteConnect.historical_data-618"><a href="#KiteConnect.historical_data-618"><span class="linenos">618</span></a><span class="sd">        Although the actual response JSON from the API does not have field</span>
</span><span id="KiteConnect.historical_data-619"><a href="#KiteConnect.historical_data-619"><span class="linenos">619</span></a><span class="sd">        names such has &#39;open&#39;, &#39;high&#39; etc., this function call structures</span>
</span><span id="KiteConnect.historical_data-620"><a href="#KiteConnect.historical_data-620"><span class="linenos">620</span></a><span class="sd">        the data into an array of objects with field names. For example:</span>
</span><span id="KiteConnect.historical_data-621"><a href="#KiteConnect.historical_data-621"><span class="linenos">621</span></a>
</span><span id="KiteConnect.historical_data-622"><a href="#KiteConnect.historical_data-622"><span class="linenos">622</span></a><span class="sd">        - `instrument_token` is the instrument identifier (retrieved from the instruments()) call.</span>
</span><span id="KiteConnect.historical_data-623"><a href="#KiteConnect.historical_data-623"><span class="linenos">623</span></a><span class="sd">        - `from_date` is the From date (datetime object or string in format of yyyy-mm-dd HH:MM:SS.</span>
</span><span id="KiteConnect.historical_data-624"><a href="#KiteConnect.historical_data-624"><span class="linenos">624</span></a><span class="sd">        - `to_date` is the To date (datetime object or string in format of yyyy-mm-dd HH:MM:SS).</span>
</span><span id="KiteConnect.historical_data-625"><a href="#KiteConnect.historical_data-625"><span class="linenos">625</span></a><span class="sd">        - `interval` is the candle interval (minute, day, 5 minute etc.).</span>
</span><span id="KiteConnect.historical_data-626"><a href="#KiteConnect.historical_data-626"><span class="linenos">626</span></a><span class="sd">        - `continuous` is a boolean flag to get continuous data for futures and options instruments.</span>
</span><span id="KiteConnect.historical_data-627"><a href="#KiteConnect.historical_data-627"><span class="linenos">627</span></a><span class="sd">        - `oi` is a boolean flag to get open interest.</span>
</span><span id="KiteConnect.historical_data-628"><a href="#KiteConnect.historical_data-628"><span class="linenos">628</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.historical_data-629"><a href="#KiteConnect.historical_data-629"><span class="linenos">629</span></a>        <span class="n">date_string_format</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span>
</span><span id="KiteConnect.historical_data-630"><a href="#KiteConnect.historical_data-630"><span class="linenos">630</span></a>        <span class="n">from_date_string</span> <span class="o">=</span> <span class="n">from_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_string_format</span><span class="p">)</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">from_date</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="k">else</span> <span class="n">from_date</span>
</span><span id="KiteConnect.historical_data-631"><a href="#KiteConnect.historical_data-631"><span class="linenos">631</span></a>        <span class="n">to_date_string</span> <span class="o">=</span> <span class="n">to_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_string_format</span><span class="p">)</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">to_date</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="k">else</span> <span class="n">to_date</span>
</span><span id="KiteConnect.historical_data-632"><a href="#KiteConnect.historical_data-632"><span class="linenos">632</span></a>
</span><span id="KiteConnect.historical_data-633"><a href="#KiteConnect.historical_data-633"><span class="linenos">633</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.historical&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.historical_data-634"><a href="#KiteConnect.historical_data-634"><span class="linenos">634</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;instrument_token&quot;</span><span class="p">:</span> <span class="n">instrument_token</span><span class="p">,</span> <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="n">interval</span><span class="p">},</span>
</span><span id="KiteConnect.historical_data-635"><a href="#KiteConnect.historical_data-635"><span class="linenos">635</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.historical_data-636"><a href="#KiteConnect.historical_data-636"><span class="linenos">636</span></a>                             <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">from_date_string</span><span class="p">,</span>
</span><span id="KiteConnect.historical_data-637"><a href="#KiteConnect.historical_data-637"><span class="linenos">637</span></a>                             <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">to_date_string</span><span class="p">,</span>
</span><span id="KiteConnect.historical_data-638"><a href="#KiteConnect.historical_data-638"><span class="linenos">638</span></a>                             <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="n">interval</span><span class="p">,</span>
</span><span id="KiteConnect.historical_data-639"><a href="#KiteConnect.historical_data-639"><span class="linenos">639</span></a>                             <span class="s2">&quot;continuous&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">continuous</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="KiteConnect.historical_data-640"><a href="#KiteConnect.historical_data-640"><span class="linenos">640</span></a>                             <span class="s2">&quot;oi&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">oi</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="KiteConnect.historical_data-641"><a href="#KiteConnect.historical_data-641"><span class="linenos">641</span></a>                         <span class="p">})</span>
</span><span id="KiteConnect.historical_data-642"><a href="#KiteConnect.historical_data-642"><span class="linenos">642</span></a>
</span><span id="KiteConnect.historical_data-643"><a href="#KiteConnect.historical_data-643"><span class="linenos">643</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_historical</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve historical data (candles) for an instrument.</p>

<p>Although the actual response JSON from the API does not have field
names such has 'open', 'high' etc., this function call structures
the data into an array of objects with field names. For example:</p>

<ul>
<li><code>instrument_token</code> is the instrument identifier (retrieved from the instruments()) call.</li>
<li><code>from_date</code> is the From date (datetime object or string in format of yyyy-mm-dd HH:MM:SS.</li>
<li><code>to_date</code> is the To date (datetime object or string in format of yyyy-mm-dd HH:MM:SS).</li>
<li><code>interval</code> is the candle interval (minute, day, 5 minute etc.).</li>
<li><code>continuous</code> is a boolean flag to get continuous data for futures and options instruments.</li>
<li><code>oi</code> is a boolean flag to get open interest.</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.trigger_range" class="classattr">
                                        <input id="KiteConnect.trigger_range-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trigger_range</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">transaction_type</span>, </span><span class="param"><span class="o">*</span><span class="n">instruments</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.trigger_range-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.trigger_range"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.trigger_range-662"><a href="#KiteConnect.trigger_range-662"><span class="linenos">662</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">trigger_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">,</span> <span class="o">*</span><span class="n">instruments</span><span class="p">):</span>
</span><span id="KiteConnect.trigger_range-663"><a href="#KiteConnect.trigger_range-663"><span class="linenos">663</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the buy/sell trigger range for Cover Orders.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.trigger_range-664"><a href="#KiteConnect.trigger_range-664"><span class="linenos">664</span></a>        <span class="n">ins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
</span><span id="KiteConnect.trigger_range-665"><a href="#KiteConnect.trigger_range-665"><span class="linenos">665</span></a>
</span><span id="KiteConnect.trigger_range-666"><a href="#KiteConnect.trigger_range-666"><span class="linenos">666</span></a>        <span class="c1"># If first element is a list then accept it as instruments list for legacy reason</span>
</span><span id="KiteConnect.trigger_range-667"><a href="#KiteConnect.trigger_range-667"><span class="linenos">667</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="KiteConnect.trigger_range-668"><a href="#KiteConnect.trigger_range-668"><span class="linenos">668</span></a>            <span class="n">ins</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteConnect.trigger_range-669"><a href="#KiteConnect.trigger_range-669"><span class="linenos">669</span></a>
</span><span id="KiteConnect.trigger_range-670"><a href="#KiteConnect.trigger_range-670"><span class="linenos">670</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;market.trigger_range&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.trigger_range-671"><a href="#KiteConnect.trigger_range-671"><span class="linenos">671</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;transaction_type&quot;</span><span class="p">:</span> <span class="n">transaction_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()},</span>
</span><span id="KiteConnect.trigger_range-672"><a href="#KiteConnect.trigger_range-672"><span class="linenos">672</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">ins</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the buy/sell trigger range for Cover Orders.</p>
</div>


                            </div>
                            <div id="KiteConnect.get_gtts" class="classattr">
                                        <input id="KiteConnect.get_gtts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_gtts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.get_gtts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.get_gtts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.get_gtts-674"><a href="#KiteConnect.get_gtts-674"><span class="linenos">674</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_gtts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteConnect.get_gtts-675"><a href="#KiteConnect.get_gtts-675"><span class="linenos">675</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch list of gtt existing in an account&quot;&quot;&quot;</span>
</span><span id="KiteConnect.get_gtts-676"><a href="#KiteConnect.get_gtts-676"><span class="linenos">676</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;gtt&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Fetch list of gtt existing in an account</p>
</div>


                            </div>
                            <div id="KiteConnect.get_gtt" class="classattr">
                                        <input id="KiteConnect.get_gtt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_gtt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">trigger_id</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.get_gtt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.get_gtt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.get_gtt-678"><a href="#KiteConnect.get_gtt-678"><span class="linenos">678</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_gtt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigger_id</span><span class="p">):</span>
</span><span id="KiteConnect.get_gtt-679"><a href="#KiteConnect.get_gtt-679"><span class="linenos">679</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch details of a GTT&quot;&quot;&quot;</span>
</span><span id="KiteConnect.get_gtt-680"><a href="#KiteConnect.get_gtt-680"><span class="linenos">680</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;gtt.info&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;trigger_id&quot;</span><span class="p">:</span> <span class="n">trigger_id</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Fetch details of a GTT</p>
</div>


                            </div>
                            <div id="KiteConnect.place_gtt" class="classattr">
                                        <input id="KiteConnect.place_gtt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">place_gtt</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">trigger_type</span>,</span><span class="param">	<span class="n">tradingsymbol</span>,</span><span class="param">	<span class="n">exchange</span>,</span><span class="param">	<span class="n">trigger_values</span>,</span><span class="param">	<span class="n">last_price</span>,</span><span class="param">	<span class="n">orders</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.place_gtt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.place_gtt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.place_gtt-716"><a href="#KiteConnect.place_gtt-716"><span class="linenos">716</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place_gtt</span><span class="p">(</span>
</span><span id="KiteConnect.place_gtt-717"><a href="#KiteConnect.place_gtt-717"><span class="linenos">717</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span>
</span><span id="KiteConnect.place_gtt-718"><a href="#KiteConnect.place_gtt-718"><span class="linenos">718</span></a>    <span class="p">):</span>
</span><span id="KiteConnect.place_gtt-719"><a href="#KiteConnect.place_gtt-719"><span class="linenos">719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.place_gtt-720"><a href="#KiteConnect.place_gtt-720"><span class="linenos">720</span></a><span class="sd">        Place GTT order</span>
</span><span id="KiteConnect.place_gtt-721"><a href="#KiteConnect.place_gtt-721"><span class="linenos">721</span></a>
</span><span id="KiteConnect.place_gtt-722"><a href="#KiteConnect.place_gtt-722"><span class="linenos">722</span></a><span class="sd">        - `trigger_type` The type of GTT order(single/two-leg).</span>
</span><span id="KiteConnect.place_gtt-723"><a href="#KiteConnect.place_gtt-723"><span class="linenos">723</span></a><span class="sd">        - `tradingsymbol` Trading symbol of the instrument.</span>
</span><span id="KiteConnect.place_gtt-724"><a href="#KiteConnect.place_gtt-724"><span class="linenos">724</span></a><span class="sd">        - `exchange` Name of the exchange.</span>
</span><span id="KiteConnect.place_gtt-725"><a href="#KiteConnect.place_gtt-725"><span class="linenos">725</span></a><span class="sd">        - `trigger_values` Trigger values (json array).</span>
</span><span id="KiteConnect.place_gtt-726"><a href="#KiteConnect.place_gtt-726"><span class="linenos">726</span></a><span class="sd">        - `last_price` Last price of the instrument at the time of order placement.</span>
</span><span id="KiteConnect.place_gtt-727"><a href="#KiteConnect.place_gtt-727"><span class="linenos">727</span></a><span class="sd">        - `orders` JSON order array containing following fields</span>
</span><span id="KiteConnect.place_gtt-728"><a href="#KiteConnect.place_gtt-728"><span class="linenos">728</span></a><span class="sd">            - `transaction_type` BUY or SELL</span>
</span><span id="KiteConnect.place_gtt-729"><a href="#KiteConnect.place_gtt-729"><span class="linenos">729</span></a><span class="sd">            - `quantity` Quantity to transact</span>
</span><span id="KiteConnect.place_gtt-730"><a href="#KiteConnect.place_gtt-730"><span class="linenos">730</span></a><span class="sd">            - `price` The min or max price to execute the order at (for LIMIT orders)</span>
</span><span id="KiteConnect.place_gtt-731"><a href="#KiteConnect.place_gtt-731"><span class="linenos">731</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.place_gtt-732"><a href="#KiteConnect.place_gtt-732"><span class="linenos">732</span></a>        <span class="c1"># Validations.</span>
</span><span id="KiteConnect.place_gtt-733"><a href="#KiteConnect.place_gtt-733"><span class="linenos">733</span></a>        <span class="k">assert</span> <span class="n">trigger_type</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GTT_TYPE_OCO</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GTT_TYPE_SINGLE</span><span class="p">]</span>
</span><span id="KiteConnect.place_gtt-734"><a href="#KiteConnect.place_gtt-734"><span class="linenos">734</span></a>        <span class="n">condition</span><span class="p">,</span> <span class="n">gtt_orders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_gtt_payload</span><span class="p">(</span><span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span><span class="p">)</span>
</span><span id="KiteConnect.place_gtt-735"><a href="#KiteConnect.place_gtt-735"><span class="linenos">735</span></a>
</span><span id="KiteConnect.place_gtt-736"><a href="#KiteConnect.place_gtt-736"><span class="linenos">736</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;gtt.place&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.place_gtt-737"><a href="#KiteConnect.place_gtt-737"><span class="linenos">737</span></a>            <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">condition</span><span class="p">),</span>
</span><span id="KiteConnect.place_gtt-738"><a href="#KiteConnect.place_gtt-738"><span class="linenos">738</span></a>            <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">gtt_orders</span><span class="p">),</span>
</span><span id="KiteConnect.place_gtt-739"><a href="#KiteConnect.place_gtt-739"><span class="linenos">739</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">trigger_type</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Place GTT order</p>

<ul>
<li><code>trigger_type</code> The type of GTT order(single/two-leg).</li>
<li><code>tradingsymbol</code> Trading symbol of the instrument.</li>
<li><code>exchange</code> Name of the exchange.</li>
<li><code>trigger_values</code> Trigger values (json array).</li>
<li><code>last_price</code> Last price of the instrument at the time of order placement.</li>
<li><code><a href="#KiteConnect.orders">orders</a></code> JSON order array containing following fields
<ul>
<li><code>transaction_type</code> BUY or SELL</li>
<li><code>quantity</code> Quantity to transact</li>
<li><code>price</code> The min or max price to execute the order at (for LIMIT orders)</li>
</ul></li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.modify_gtt" class="classattr">
                                        <input id="KiteConnect.modify_gtt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">modify_gtt</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">trigger_id</span>,</span><span class="param">	<span class="n">trigger_type</span>,</span><span class="param">	<span class="n">tradingsymbol</span>,</span><span class="param">	<span class="n">exchange</span>,</span><span class="param">	<span class="n">trigger_values</span>,</span><span class="param">	<span class="n">last_price</span>,</span><span class="param">	<span class="n">orders</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.modify_gtt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.modify_gtt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.modify_gtt-741"><a href="#KiteConnect.modify_gtt-741"><span class="linenos">741</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modify_gtt</span><span class="p">(</span>
</span><span id="KiteConnect.modify_gtt-742"><a href="#KiteConnect.modify_gtt-742"><span class="linenos">742</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">trigger_id</span><span class="p">,</span> <span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span>
</span><span id="KiteConnect.modify_gtt-743"><a href="#KiteConnect.modify_gtt-743"><span class="linenos">743</span></a>    <span class="p">):</span>
</span><span id="KiteConnect.modify_gtt-744"><a href="#KiteConnect.modify_gtt-744"><span class="linenos">744</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.modify_gtt-745"><a href="#KiteConnect.modify_gtt-745"><span class="linenos">745</span></a><span class="sd">        Modify GTT order</span>
</span><span id="KiteConnect.modify_gtt-746"><a href="#KiteConnect.modify_gtt-746"><span class="linenos">746</span></a>
</span><span id="KiteConnect.modify_gtt-747"><a href="#KiteConnect.modify_gtt-747"><span class="linenos">747</span></a><span class="sd">        - `trigger_type` The type of GTT order(single/two-leg).</span>
</span><span id="KiteConnect.modify_gtt-748"><a href="#KiteConnect.modify_gtt-748"><span class="linenos">748</span></a><span class="sd">        - `tradingsymbol` Trading symbol of the instrument.</span>
</span><span id="KiteConnect.modify_gtt-749"><a href="#KiteConnect.modify_gtt-749"><span class="linenos">749</span></a><span class="sd">        - `exchange` Name of the exchange.</span>
</span><span id="KiteConnect.modify_gtt-750"><a href="#KiteConnect.modify_gtt-750"><span class="linenos">750</span></a><span class="sd">        - `trigger_values` Trigger values (json array).</span>
</span><span id="KiteConnect.modify_gtt-751"><a href="#KiteConnect.modify_gtt-751"><span class="linenos">751</span></a><span class="sd">        - `last_price` Last price of the instrument at the time of order placement.</span>
</span><span id="KiteConnect.modify_gtt-752"><a href="#KiteConnect.modify_gtt-752"><span class="linenos">752</span></a><span class="sd">        - `orders` JSON order array containing following fields</span>
</span><span id="KiteConnect.modify_gtt-753"><a href="#KiteConnect.modify_gtt-753"><span class="linenos">753</span></a><span class="sd">            - `transaction_type` BUY or SELL</span>
</span><span id="KiteConnect.modify_gtt-754"><a href="#KiteConnect.modify_gtt-754"><span class="linenos">754</span></a><span class="sd">            - `quantity` Quantity to transact</span>
</span><span id="KiteConnect.modify_gtt-755"><a href="#KiteConnect.modify_gtt-755"><span class="linenos">755</span></a><span class="sd">            - `price` The min or max price to execute the order at (for LIMIT orders)</span>
</span><span id="KiteConnect.modify_gtt-756"><a href="#KiteConnect.modify_gtt-756"><span class="linenos">756</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.modify_gtt-757"><a href="#KiteConnect.modify_gtt-757"><span class="linenos">757</span></a>        <span class="n">condition</span><span class="p">,</span> <span class="n">gtt_orders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_gtt_payload</span><span class="p">(</span><span class="n">trigger_type</span><span class="p">,</span> <span class="n">tradingsymbol</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">trigger_values</span><span class="p">,</span> <span class="n">last_price</span><span class="p">,</span> <span class="n">orders</span><span class="p">)</span>
</span><span id="KiteConnect.modify_gtt-758"><a href="#KiteConnect.modify_gtt-758"><span class="linenos">758</span></a>
</span><span id="KiteConnect.modify_gtt-759"><a href="#KiteConnect.modify_gtt-759"><span class="linenos">759</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="s2">&quot;gtt.modify&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.modify_gtt-760"><a href="#KiteConnect.modify_gtt-760"><span class="linenos">760</span></a>                         <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;trigger_id&quot;</span><span class="p">:</span> <span class="n">trigger_id</span><span class="p">},</span>
</span><span id="KiteConnect.modify_gtt-761"><a href="#KiteConnect.modify_gtt-761"><span class="linenos">761</span></a>                         <span class="n">params</span><span class="o">=</span><span class="p">{</span>
</span><span id="KiteConnect.modify_gtt-762"><a href="#KiteConnect.modify_gtt-762"><span class="linenos">762</span></a>                             <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">condition</span><span class="p">),</span>
</span><span id="KiteConnect.modify_gtt-763"><a href="#KiteConnect.modify_gtt-763"><span class="linenos">763</span></a>                             <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">gtt_orders</span><span class="p">),</span>
</span><span id="KiteConnect.modify_gtt-764"><a href="#KiteConnect.modify_gtt-764"><span class="linenos">764</span></a>                             <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">trigger_type</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Modify GTT order</p>

<ul>
<li><code>trigger_type</code> The type of GTT order(single/two-leg).</li>
<li><code>tradingsymbol</code> Trading symbol of the instrument.</li>
<li><code>exchange</code> Name of the exchange.</li>
<li><code>trigger_values</code> Trigger values (json array).</li>
<li><code>last_price</code> Last price of the instrument at the time of order placement.</li>
<li><code><a href="#KiteConnect.orders">orders</a></code> JSON order array containing following fields
<ul>
<li><code>transaction_type</code> BUY or SELL</li>
<li><code>quantity</code> Quantity to transact</li>
<li><code>price</code> The min or max price to execute the order at (for LIMIT orders)</li>
</ul></li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.delete_gtt" class="classattr">
                                        <input id="KiteConnect.delete_gtt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_gtt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">trigger_id</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.delete_gtt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.delete_gtt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.delete_gtt-766"><a href="#KiteConnect.delete_gtt-766"><span class="linenos">766</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_gtt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigger_id</span><span class="p">):</span>
</span><span id="KiteConnect.delete_gtt-767"><a href="#KiteConnect.delete_gtt-767"><span class="linenos">767</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a GTT order.&quot;&quot;&quot;</span>
</span><span id="KiteConnect.delete_gtt-768"><a href="#KiteConnect.delete_gtt-768"><span class="linenos">768</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="s2">&quot;gtt.delete&quot;</span><span class="p">,</span> <span class="n">url_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;trigger_id&quot;</span><span class="p">:</span> <span class="n">trigger_id</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Delete a GTT order.</p>
</div>


                            </div>
                            <div id="KiteConnect.order_margins" class="classattr">
                                        <input id="KiteConnect.order_margins-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">order_margins</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">params</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.order_margins-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.order_margins"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.order_margins-770"><a href="#KiteConnect.order_margins-770"><span class="linenos">770</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">order_margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="KiteConnect.order_margins-771"><a href="#KiteConnect.order_margins-771"><span class="linenos">771</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.order_margins-772"><a href="#KiteConnect.order_margins-772"><span class="linenos">772</span></a><span class="sd">        Calculate margins for requested order list considering the existing positions and open orders</span>
</span><span id="KiteConnect.order_margins-773"><a href="#KiteConnect.order_margins-773"><span class="linenos">773</span></a>
</span><span id="KiteConnect.order_margins-774"><a href="#KiteConnect.order_margins-774"><span class="linenos">774</span></a><span class="sd">        - `params` is list of orders to retrive margins detail</span>
</span><span id="KiteConnect.order_margins-775"><a href="#KiteConnect.order_margins-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.order_margins-776"><a href="#KiteConnect.order_margins-776"><span class="linenos">776</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.margins&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">is_json</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Calculate margins for requested order list considering the existing positions and open orders</p>

<ul>
<li><code>params</code> is list of orders to retrive margins detail</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.basket_order_margins" class="classattr">
                                        <input id="KiteConnect.basket_order_margins-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">basket_order_margins</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">params</span>, </span><span class="param"><span class="n">consider_positions</span><span class="o">=</span><span class="kc">True</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.basket_order_margins-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.basket_order_margins"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.basket_order_margins-778"><a href="#KiteConnect.basket_order_margins-778"><span class="linenos">778</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">basket_order_margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">consider_positions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteConnect.basket_order_margins-779"><a href="#KiteConnect.basket_order_margins-779"><span class="linenos">779</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.basket_order_margins-780"><a href="#KiteConnect.basket_order_margins-780"><span class="linenos">780</span></a><span class="sd">        Calculate total margins required for basket of orders including margin benefits</span>
</span><span id="KiteConnect.basket_order_margins-781"><a href="#KiteConnect.basket_order_margins-781"><span class="linenos">781</span></a>
</span><span id="KiteConnect.basket_order_margins-782"><a href="#KiteConnect.basket_order_margins-782"><span class="linenos">782</span></a><span class="sd">        - `params` is list of orders to fetch basket margin</span>
</span><span id="KiteConnect.basket_order_margins-783"><a href="#KiteConnect.basket_order_margins-783"><span class="linenos">783</span></a><span class="sd">        - `consider_positions` is a boolean to consider users positions</span>
</span><span id="KiteConnect.basket_order_margins-784"><a href="#KiteConnect.basket_order_margins-784"><span class="linenos">784</span></a><span class="sd">        - `mode` is margin response mode type. compact - Compact mode will only give the total margins</span>
</span><span id="KiteConnect.basket_order_margins-785"><a href="#KiteConnect.basket_order_margins-785"><span class="linenos">785</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.basket_order_margins-786"><a href="#KiteConnect.basket_order_margins-786"><span class="linenos">786</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.margins.basket&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.basket_order_margins-787"><a href="#KiteConnect.basket_order_margins-787"><span class="linenos">787</span></a>                          <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
</span><span id="KiteConnect.basket_order_margins-788"><a href="#KiteConnect.basket_order_margins-788"><span class="linenos">788</span></a>                          <span class="n">is_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="KiteConnect.basket_order_margins-789"><a href="#KiteConnect.basket_order_margins-789"><span class="linenos">789</span></a>                          <span class="n">query_params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;consider_positions&#39;</span><span class="p">:</span> <span class="n">consider_positions</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="n">mode</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Calculate total margins required for basket of orders including margin benefits</p>

<ul>
<li><code>params</code> is list of orders to fetch basket margin</li>
<li><code>consider_positions</code> is a boolean to consider users positions</li>
<li><code>mode</code> is margin response mode type. compact - Compact mode will only give the total margins</li>
</ul>
</div>


                            </div>
                            <div id="KiteConnect.get_virtual_contract_note" class="classattr">
                                        <input id="KiteConnect.get_virtual_contract_note-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_virtual_contract_note</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">params</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteConnect.get_virtual_contract_note-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteConnect.get_virtual_contract_note"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteConnect.get_virtual_contract_note-791"><a href="#KiteConnect.get_virtual_contract_note-791"><span class="linenos">791</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_virtual_contract_note</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="KiteConnect.get_virtual_contract_note-792"><a href="#KiteConnect.get_virtual_contract_note-792"><span class="linenos">792</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteConnect.get_virtual_contract_note-793"><a href="#KiteConnect.get_virtual_contract_note-793"><span class="linenos">793</span></a><span class="sd">        Calculates detailed charges order-wise for the order book</span>
</span><span id="KiteConnect.get_virtual_contract_note-794"><a href="#KiteConnect.get_virtual_contract_note-794"><span class="linenos">794</span></a><span class="sd">        - `params` is list of orders to fetch charges detail</span>
</span><span id="KiteConnect.get_virtual_contract_note-795"><a href="#KiteConnect.get_virtual_contract_note-795"><span class="linenos">795</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteConnect.get_virtual_contract_note-796"><a href="#KiteConnect.get_virtual_contract_note-796"><span class="linenos">796</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;order.contract_note&quot;</span><span class="p">,</span>
</span><span id="KiteConnect.get_virtual_contract_note-797"><a href="#KiteConnect.get_virtual_contract_note-797"><span class="linenos">797</span></a>                          <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
</span><span id="KiteConnect.get_virtual_contract_note-798"><a href="#KiteConnect.get_virtual_contract_note-798"><span class="linenos">798</span></a>                          <span class="n">is_json</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Calculates detailed charges order-wise for the order book</p>

<ul>
<li><code>params</code> is list of orders to fetch charges detail</li>
</ul>
</div>


                            </div>
                </section>
                <section id="KiteTicker">
                            <input id="KiteTicker-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">KiteTicker</span>:

                <label class="view-source-button" for="KiteTicker-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker-205"><a href="#KiteTicker-205"><span class="linenos">205</span></a><span class="k">class</span><span class="w"> </span><span class="nc">KiteTicker</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="KiteTicker-206"><a href="#KiteTicker-206"><span class="linenos">206</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker-207"><a href="#KiteTicker-207"><span class="linenos">207</span></a><span class="sd">    The WebSocket client for connecting to Kite Connect&#39;s streaming quotes service.</span>
</span><span id="KiteTicker-208"><a href="#KiteTicker-208"><span class="linenos">208</span></a>
</span><span id="KiteTicker-209"><a href="#KiteTicker-209"><span class="linenos">209</span></a><span class="sd">    Getting started:</span>
</span><span id="KiteTicker-210"><a href="#KiteTicker-210"><span class="linenos">210</span></a><span class="sd">    ---------------</span>
</span><span id="KiteTicker-211"><a href="#KiteTicker-211"><span class="linenos">211</span></a><span class="sd">        #!python</span>
</span><span id="KiteTicker-212"><a href="#KiteTicker-212"><span class="linenos">212</span></a><span class="sd">        import logging</span>
</span><span id="KiteTicker-213"><a href="#KiteTicker-213"><span class="linenos">213</span></a><span class="sd">        from kiteconnect import KiteTicker</span>
</span><span id="KiteTicker-214"><a href="#KiteTicker-214"><span class="linenos">214</span></a>
</span><span id="KiteTicker-215"><a href="#KiteTicker-215"><span class="linenos">215</span></a><span class="sd">        logging.basicConfig(level=logging.DEBUG)</span>
</span><span id="KiteTicker-216"><a href="#KiteTicker-216"><span class="linenos">216</span></a>
</span><span id="KiteTicker-217"><a href="#KiteTicker-217"><span class="linenos">217</span></a><span class="sd">        # Initialise</span>
</span><span id="KiteTicker-218"><a href="#KiteTicker-218"><span class="linenos">218</span></a><span class="sd">        kws = KiteTicker(&quot;your_api_key&quot;, &quot;your_access_token&quot;)</span>
</span><span id="KiteTicker-219"><a href="#KiteTicker-219"><span class="linenos">219</span></a>
</span><span id="KiteTicker-220"><a href="#KiteTicker-220"><span class="linenos">220</span></a><span class="sd">        def on_ticks(ws, ticks):</span>
</span><span id="KiteTicker-221"><a href="#KiteTicker-221"><span class="linenos">221</span></a><span class="sd">            # Callback to receive ticks.</span>
</span><span id="KiteTicker-222"><a href="#KiteTicker-222"><span class="linenos">222</span></a><span class="sd">            logging.debug(&quot;Ticks: {}&quot;.format(ticks))</span>
</span><span id="KiteTicker-223"><a href="#KiteTicker-223"><span class="linenos">223</span></a>
</span><span id="KiteTicker-224"><a href="#KiteTicker-224"><span class="linenos">224</span></a><span class="sd">        def on_connect(ws, response):</span>
</span><span id="KiteTicker-225"><a href="#KiteTicker-225"><span class="linenos">225</span></a><span class="sd">            # Callback on successful connect.</span>
</span><span id="KiteTicker-226"><a href="#KiteTicker-226"><span class="linenos">226</span></a><span class="sd">            # Subscribe to a list of instrument_tokens (RELIANCE and ACC here).</span>
</span><span id="KiteTicker-227"><a href="#KiteTicker-227"><span class="linenos">227</span></a><span class="sd">            ws.subscribe([738561, 5633])</span>
</span><span id="KiteTicker-228"><a href="#KiteTicker-228"><span class="linenos">228</span></a>
</span><span id="KiteTicker-229"><a href="#KiteTicker-229"><span class="linenos">229</span></a><span class="sd">            # Set RELIANCE to tick in `full` mode.</span>
</span><span id="KiteTicker-230"><a href="#KiteTicker-230"><span class="linenos">230</span></a><span class="sd">            ws.set_mode(ws.MODE_FULL, [738561])</span>
</span><span id="KiteTicker-231"><a href="#KiteTicker-231"><span class="linenos">231</span></a>
</span><span id="KiteTicker-232"><a href="#KiteTicker-232"><span class="linenos">232</span></a><span class="sd">        def on_close(ws, code, reason):</span>
</span><span id="KiteTicker-233"><a href="#KiteTicker-233"><span class="linenos">233</span></a><span class="sd">            # On connection close stop the event loop.</span>
</span><span id="KiteTicker-234"><a href="#KiteTicker-234"><span class="linenos">234</span></a><span class="sd">            # Reconnection will not happen after executing `ws.stop()`</span>
</span><span id="KiteTicker-235"><a href="#KiteTicker-235"><span class="linenos">235</span></a><span class="sd">            ws.stop()</span>
</span><span id="KiteTicker-236"><a href="#KiteTicker-236"><span class="linenos">236</span></a>
</span><span id="KiteTicker-237"><a href="#KiteTicker-237"><span class="linenos">237</span></a><span class="sd">        # Assign the callbacks.</span>
</span><span id="KiteTicker-238"><a href="#KiteTicker-238"><span class="linenos">238</span></a><span class="sd">        kws.on_ticks = on_ticks</span>
</span><span id="KiteTicker-239"><a href="#KiteTicker-239"><span class="linenos">239</span></a><span class="sd">        kws.on_connect = on_connect</span>
</span><span id="KiteTicker-240"><a href="#KiteTicker-240"><span class="linenos">240</span></a><span class="sd">        kws.on_close = on_close</span>
</span><span id="KiteTicker-241"><a href="#KiteTicker-241"><span class="linenos">241</span></a>
</span><span id="KiteTicker-242"><a href="#KiteTicker-242"><span class="linenos">242</span></a><span class="sd">        # Infinite loop on the main thread. Nothing after this will run.</span>
</span><span id="KiteTicker-243"><a href="#KiteTicker-243"><span class="linenos">243</span></a><span class="sd">        # You have to use the pre-defined callbacks to manage subscriptions.</span>
</span><span id="KiteTicker-244"><a href="#KiteTicker-244"><span class="linenos">244</span></a><span class="sd">        kws.connect()</span>
</span><span id="KiteTicker-245"><a href="#KiteTicker-245"><span class="linenos">245</span></a>
</span><span id="KiteTicker-246"><a href="#KiteTicker-246"><span class="linenos">246</span></a><span class="sd">    Callbacks</span>
</span><span id="KiteTicker-247"><a href="#KiteTicker-247"><span class="linenos">247</span></a><span class="sd">    ---------</span>
</span><span id="KiteTicker-248"><a href="#KiteTicker-248"><span class="linenos">248</span></a><span class="sd">    In below examples `ws` is the currently initialised WebSocket object.</span>
</span><span id="KiteTicker-249"><a href="#KiteTicker-249"><span class="linenos">249</span></a>
</span><span id="KiteTicker-250"><a href="#KiteTicker-250"><span class="linenos">250</span></a><span class="sd">    - `on_ticks(ws, ticks)` -  Triggered when ticks are recevied.</span>
</span><span id="KiteTicker-251"><a href="#KiteTicker-251"><span class="linenos">251</span></a><span class="sd">        - `ticks` - List of `tick` object. Check below for sample structure.</span>
</span><span id="KiteTicker-252"><a href="#KiteTicker-252"><span class="linenos">252</span></a><span class="sd">    - `on_close(ws, code, reason)` -  Triggered when connection is closed.</span>
</span><span id="KiteTicker-253"><a href="#KiteTicker-253"><span class="linenos">253</span></a><span class="sd">        - `code` - WebSocket standard close event code (https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent)</span>
</span><span id="KiteTicker-254"><a href="#KiteTicker-254"><span class="linenos">254</span></a><span class="sd">        - `reason` - DOMString indicating the reason the server closed the connection</span>
</span><span id="KiteTicker-255"><a href="#KiteTicker-255"><span class="linenos">255</span></a><span class="sd">    - `on_error(ws, code, reason)` -  Triggered when connection is closed with an error.</span>
</span><span id="KiteTicker-256"><a href="#KiteTicker-256"><span class="linenos">256</span></a><span class="sd">        - `code` - WebSocket standard close event code (https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent)</span>
</span><span id="KiteTicker-257"><a href="#KiteTicker-257"><span class="linenos">257</span></a><span class="sd">        - `reason` - DOMString indicating the reason the server closed the connection</span>
</span><span id="KiteTicker-258"><a href="#KiteTicker-258"><span class="linenos">258</span></a><span class="sd">    - `on_connect` -  Triggered when connection is established successfully.</span>
</span><span id="KiteTicker-259"><a href="#KiteTicker-259"><span class="linenos">259</span></a><span class="sd">        - `response` - Response received from server on successful connection.</span>
</span><span id="KiteTicker-260"><a href="#KiteTicker-260"><span class="linenos">260</span></a><span class="sd">    - `on_message(ws, payload, is_binary)` -  Triggered when message is received from the server.</span>
</span><span id="KiteTicker-261"><a href="#KiteTicker-261"><span class="linenos">261</span></a><span class="sd">        - `payload` - Raw response from the server (either text or binary).</span>
</span><span id="KiteTicker-262"><a href="#KiteTicker-262"><span class="linenos">262</span></a><span class="sd">        - `is_binary` - Bool to check if response is binary type.</span>
</span><span id="KiteTicker-263"><a href="#KiteTicker-263"><span class="linenos">263</span></a><span class="sd">    - `on_reconnect(ws, attempts_count)` -  Triggered when auto reconnection is attempted.</span>
</span><span id="KiteTicker-264"><a href="#KiteTicker-264"><span class="linenos">264</span></a><span class="sd">        - `attempts_count` - Current reconnect attempt number.</span>
</span><span id="KiteTicker-265"><a href="#KiteTicker-265"><span class="linenos">265</span></a><span class="sd">    - `on_noreconnect(ws)` -  Triggered when number of auto reconnection attempts exceeds `reconnect_tries`.</span>
</span><span id="KiteTicker-266"><a href="#KiteTicker-266"><span class="linenos">266</span></a><span class="sd">    - `on_order_update(ws, data)` -  Triggered when there is an order update for the connected user.</span>
</span><span id="KiteTicker-267"><a href="#KiteTicker-267"><span class="linenos">267</span></a>
</span><span id="KiteTicker-268"><a href="#KiteTicker-268"><span class="linenos">268</span></a>
</span><span id="KiteTicker-269"><a href="#KiteTicker-269"><span class="linenos">269</span></a><span class="sd">    Tick structure (passed to the `on_ticks` callback)</span>
</span><span id="KiteTicker-270"><a href="#KiteTicker-270"><span class="linenos">270</span></a><span class="sd">    ---------------------------</span>
</span><span id="KiteTicker-271"><a href="#KiteTicker-271"><span class="linenos">271</span></a><span class="sd">        [{</span>
</span><span id="KiteTicker-272"><a href="#KiteTicker-272"><span class="linenos">272</span></a><span class="sd">            &#39;instrument_token&#39;: 53490439,</span>
</span><span id="KiteTicker-273"><a href="#KiteTicker-273"><span class="linenos">273</span></a><span class="sd">            &#39;mode&#39;: &#39;full&#39;,</span>
</span><span id="KiteTicker-274"><a href="#KiteTicker-274"><span class="linenos">274</span></a><span class="sd">            &#39;volume_traded&#39;: 12510,</span>
</span><span id="KiteTicker-275"><a href="#KiteTicker-275"><span class="linenos">275</span></a><span class="sd">            &#39;last_price&#39;: 4084.0,</span>
</span><span id="KiteTicker-276"><a href="#KiteTicker-276"><span class="linenos">276</span></a><span class="sd">            &#39;average_traded_price&#39;: 4086.55,</span>
</span><span id="KiteTicker-277"><a href="#KiteTicker-277"><span class="linenos">277</span></a><span class="sd">            &#39;last_traded_quantity&#39;: 1,</span>
</span><span id="KiteTicker-278"><a href="#KiteTicker-278"><span class="linenos">278</span></a><span class="sd">            &#39;total_buy_quantity&#39;: 2356</span>
</span><span id="KiteTicker-279"><a href="#KiteTicker-279"><span class="linenos">279</span></a><span class="sd">            &#39;total_sell_quantity&#39;: 2440,</span>
</span><span id="KiteTicker-280"><a href="#KiteTicker-280"><span class="linenos">280</span></a><span class="sd">            &#39;change&#39;: 0.46740467404674046,</span>
</span><span id="KiteTicker-281"><a href="#KiteTicker-281"><span class="linenos">281</span></a><span class="sd">            &#39;last_trade_time&#39;: datetime.datetime(2018, 1, 15, 13, 16, 54),</span>
</span><span id="KiteTicker-282"><a href="#KiteTicker-282"><span class="linenos">282</span></a><span class="sd">            &#39;exchange_timestamp&#39;: datetime.datetime(2018, 1, 15, 13, 16, 56),</span>
</span><span id="KiteTicker-283"><a href="#KiteTicker-283"><span class="linenos">283</span></a><span class="sd">            &#39;oi&#39;: 21845,</span>
</span><span id="KiteTicker-284"><a href="#KiteTicker-284"><span class="linenos">284</span></a><span class="sd">            &#39;oi_day_low&#39;: 0,</span>
</span><span id="KiteTicker-285"><a href="#KiteTicker-285"><span class="linenos">285</span></a><span class="sd">            &#39;oi_day_high&#39;: 0,</span>
</span><span id="KiteTicker-286"><a href="#KiteTicker-286"><span class="linenos">286</span></a><span class="sd">            &#39;ohlc&#39;: {</span>
</span><span id="KiteTicker-287"><a href="#KiteTicker-287"><span class="linenos">287</span></a><span class="sd">                &#39;high&#39;: 4093.0,</span>
</span><span id="KiteTicker-288"><a href="#KiteTicker-288"><span class="linenos">288</span></a><span class="sd">                &#39;close&#39;: 4065.0,</span>
</span><span id="KiteTicker-289"><a href="#KiteTicker-289"><span class="linenos">289</span></a><span class="sd">                &#39;open&#39;: 4088.0,</span>
</span><span id="KiteTicker-290"><a href="#KiteTicker-290"><span class="linenos">290</span></a><span class="sd">                &#39;low&#39;: 4080.0</span>
</span><span id="KiteTicker-291"><a href="#KiteTicker-291"><span class="linenos">291</span></a><span class="sd">            },</span>
</span><span id="KiteTicker-292"><a href="#KiteTicker-292"><span class="linenos">292</span></a><span class="sd">            &#39;tradable&#39;: True,</span>
</span><span id="KiteTicker-293"><a href="#KiteTicker-293"><span class="linenos">293</span></a><span class="sd">            &#39;depth&#39;: {</span>
</span><span id="KiteTicker-294"><a href="#KiteTicker-294"><span class="linenos">294</span></a><span class="sd">                &#39;sell&#39;: [{</span>
</span><span id="KiteTicker-295"><a href="#KiteTicker-295"><span class="linenos">295</span></a><span class="sd">                    &#39;price&#39;: 4085.0,</span>
</span><span id="KiteTicker-296"><a href="#KiteTicker-296"><span class="linenos">296</span></a><span class="sd">                    &#39;orders&#39;: 1048576,</span>
</span><span id="KiteTicker-297"><a href="#KiteTicker-297"><span class="linenos">297</span></a><span class="sd">                    &#39;quantity&#39;: 43</span>
</span><span id="KiteTicker-298"><a href="#KiteTicker-298"><span class="linenos">298</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-299"><a href="#KiteTicker-299"><span class="linenos">299</span></a><span class="sd">                    &#39;price&#39;: 4086.0,</span>
</span><span id="KiteTicker-300"><a href="#KiteTicker-300"><span class="linenos">300</span></a><span class="sd">                    &#39;orders&#39;: 2752512,</span>
</span><span id="KiteTicker-301"><a href="#KiteTicker-301"><span class="linenos">301</span></a><span class="sd">                    &#39;quantity&#39;: 134</span>
</span><span id="KiteTicker-302"><a href="#KiteTicker-302"><span class="linenos">302</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-303"><a href="#KiteTicker-303"><span class="linenos">303</span></a><span class="sd">                    &#39;price&#39;: 4087.0,</span>
</span><span id="KiteTicker-304"><a href="#KiteTicker-304"><span class="linenos">304</span></a><span class="sd">                    &#39;orders&#39;: 1703936,</span>
</span><span id="KiteTicker-305"><a href="#KiteTicker-305"><span class="linenos">305</span></a><span class="sd">                    &#39;quantity&#39;: 133</span>
</span><span id="KiteTicker-306"><a href="#KiteTicker-306"><span class="linenos">306</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-307"><a href="#KiteTicker-307"><span class="linenos">307</span></a><span class="sd">                    &#39;price&#39;: 4088.0,</span>
</span><span id="KiteTicker-308"><a href="#KiteTicker-308"><span class="linenos">308</span></a><span class="sd">                    &#39;orders&#39;: 1376256,</span>
</span><span id="KiteTicker-309"><a href="#KiteTicker-309"><span class="linenos">309</span></a><span class="sd">                    &#39;quantity&#39;: 70</span>
</span><span id="KiteTicker-310"><a href="#KiteTicker-310"><span class="linenos">310</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-311"><a href="#KiteTicker-311"><span class="linenos">311</span></a><span class="sd">                    &#39;price&#39;: 4089.0,</span>
</span><span id="KiteTicker-312"><a href="#KiteTicker-312"><span class="linenos">312</span></a><span class="sd">                    &#39;orders&#39;: 1048576,</span>
</span><span id="KiteTicker-313"><a href="#KiteTicker-313"><span class="linenos">313</span></a><span class="sd">                    &#39;quantity&#39;: 46</span>
</span><span id="KiteTicker-314"><a href="#KiteTicker-314"><span class="linenos">314</span></a><span class="sd">                }],</span>
</span><span id="KiteTicker-315"><a href="#KiteTicker-315"><span class="linenos">315</span></a><span class="sd">                &#39;buy&#39;: [{</span>
</span><span id="KiteTicker-316"><a href="#KiteTicker-316"><span class="linenos">316</span></a><span class="sd">                    &#39;price&#39;: 4084.0,</span>
</span><span id="KiteTicker-317"><a href="#KiteTicker-317"><span class="linenos">317</span></a><span class="sd">                    &#39;orders&#39;: 589824,</span>
</span><span id="KiteTicker-318"><a href="#KiteTicker-318"><span class="linenos">318</span></a><span class="sd">                    &#39;quantity&#39;: 53</span>
</span><span id="KiteTicker-319"><a href="#KiteTicker-319"><span class="linenos">319</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-320"><a href="#KiteTicker-320"><span class="linenos">320</span></a><span class="sd">                    &#39;price&#39;: 4083.0,</span>
</span><span id="KiteTicker-321"><a href="#KiteTicker-321"><span class="linenos">321</span></a><span class="sd">                    &#39;orders&#39;: 1245184,</span>
</span><span id="KiteTicker-322"><a href="#KiteTicker-322"><span class="linenos">322</span></a><span class="sd">                    &#39;quantity&#39;: 145</span>
</span><span id="KiteTicker-323"><a href="#KiteTicker-323"><span class="linenos">323</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-324"><a href="#KiteTicker-324"><span class="linenos">324</span></a><span class="sd">                    &#39;price&#39;: 4082.0,</span>
</span><span id="KiteTicker-325"><a href="#KiteTicker-325"><span class="linenos">325</span></a><span class="sd">                    &#39;orders&#39;: 1114112,</span>
</span><span id="KiteTicker-326"><a href="#KiteTicker-326"><span class="linenos">326</span></a><span class="sd">                    &#39;quantity&#39;: 63</span>
</span><span id="KiteTicker-327"><a href="#KiteTicker-327"><span class="linenos">327</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-328"><a href="#KiteTicker-328"><span class="linenos">328</span></a><span class="sd">                    &#39;price&#39;: 4081.0,</span>
</span><span id="KiteTicker-329"><a href="#KiteTicker-329"><span class="linenos">329</span></a><span class="sd">                    &#39;orders&#39;: 1835008,</span>
</span><span id="KiteTicker-330"><a href="#KiteTicker-330"><span class="linenos">330</span></a><span class="sd">                    &#39;quantity&#39;: 69</span>
</span><span id="KiteTicker-331"><a href="#KiteTicker-331"><span class="linenos">331</span></a><span class="sd">                }, {</span>
</span><span id="KiteTicker-332"><a href="#KiteTicker-332"><span class="linenos">332</span></a><span class="sd">                    &#39;price&#39;: 4080.0,</span>
</span><span id="KiteTicker-333"><a href="#KiteTicker-333"><span class="linenos">333</span></a><span class="sd">                    &#39;orders&#39;: 2752512,</span>
</span><span id="KiteTicker-334"><a href="#KiteTicker-334"><span class="linenos">334</span></a><span class="sd">                    &#39;quantity&#39;: 89</span>
</span><span id="KiteTicker-335"><a href="#KiteTicker-335"><span class="linenos">335</span></a><span class="sd">                }]</span>
</span><span id="KiteTicker-336"><a href="#KiteTicker-336"><span class="linenos">336</span></a><span class="sd">            }</span>
</span><span id="KiteTicker-337"><a href="#KiteTicker-337"><span class="linenos">337</span></a><span class="sd">        },</span>
</span><span id="KiteTicker-338"><a href="#KiteTicker-338"><span class="linenos">338</span></a><span class="sd">        ...,</span>
</span><span id="KiteTicker-339"><a href="#KiteTicker-339"><span class="linenos">339</span></a><span class="sd">        ...]</span>
</span><span id="KiteTicker-340"><a href="#KiteTicker-340"><span class="linenos">340</span></a>
</span><span id="KiteTicker-341"><a href="#KiteTicker-341"><span class="linenos">341</span></a><span class="sd">    Auto reconnection</span>
</span><span id="KiteTicker-342"><a href="#KiteTicker-342"><span class="linenos">342</span></a><span class="sd">    -----------------</span>
</span><span id="KiteTicker-343"><a href="#KiteTicker-343"><span class="linenos">343</span></a>
</span><span id="KiteTicker-344"><a href="#KiteTicker-344"><span class="linenos">344</span></a><span class="sd">    Auto reconnection is enabled by default and it can be disabled by passing `reconnect` param while initialising `KiteTicker`.</span>
</span><span id="KiteTicker-345"><a href="#KiteTicker-345"><span class="linenos">345</span></a><span class="sd">    On a side note, reconnection mechanism cannot happen if event loop is terminated using `stop` method inside `on_close` callback.</span>
</span><span id="KiteTicker-346"><a href="#KiteTicker-346"><span class="linenos">346</span></a>
</span><span id="KiteTicker-347"><a href="#KiteTicker-347"><span class="linenos">347</span></a><span class="sd">    Auto reonnection mechanism is based on [Exponential backoff](https://en.wikipedia.org/wiki/Exponential_backoff) algorithm in which</span>
</span><span id="KiteTicker-348"><a href="#KiteTicker-348"><span class="linenos">348</span></a><span class="sd">    next retry interval will be increased exponentially. `reconnect_max_delay` and `reconnect_max_tries` params can be used to tewak</span>
</span><span id="KiteTicker-349"><a href="#KiteTicker-349"><span class="linenos">349</span></a><span class="sd">    the alogrithm where `reconnect_max_delay` is the maximum delay after which subsequent reconnection interval will become constant and</span>
</span><span id="KiteTicker-350"><a href="#KiteTicker-350"><span class="linenos">350</span></a><span class="sd">    `reconnect_max_tries` is maximum number of retries before its quiting reconnection.</span>
</span><span id="KiteTicker-351"><a href="#KiteTicker-351"><span class="linenos">351</span></a>
</span><span id="KiteTicker-352"><a href="#KiteTicker-352"><span class="linenos">352</span></a><span class="sd">    For example if `reconnect_max_delay` is 60 seconds and `reconnect_max_tries` is 50 then the first reconnection interval starts from</span>
</span><span id="KiteTicker-353"><a href="#KiteTicker-353"><span class="linenos">353</span></a><span class="sd">    minimum interval which is 2 seconds and keep increasing up to 60 seconds after which it becomes constant and when reconnection attempt</span>
</span><span id="KiteTicker-354"><a href="#KiteTicker-354"><span class="linenos">354</span></a><span class="sd">    is reached upto 50 then it stops reconnecting.</span>
</span><span id="KiteTicker-355"><a href="#KiteTicker-355"><span class="linenos">355</span></a>
</span><span id="KiteTicker-356"><a href="#KiteTicker-356"><span class="linenos">356</span></a><span class="sd">    method `stop_retry` can be used to stop ongoing reconnect attempts and `on_reconnect` callback will be called with current reconnect</span>
</span><span id="KiteTicker-357"><a href="#KiteTicker-357"><span class="linenos">357</span></a><span class="sd">    attempt and `on_noreconnect` is called when reconnection attempts reaches max retries.</span>
</span><span id="KiteTicker-358"><a href="#KiteTicker-358"><span class="linenos">358</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="KiteTicker-359"><a href="#KiteTicker-359"><span class="linenos">359</span></a>
</span><span id="KiteTicker-360"><a href="#KiteTicker-360"><span class="linenos">360</span></a>    <span class="n">EXCHANGE_MAP</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteTicker-361"><a href="#KiteTicker-361"><span class="linenos">361</span></a>        <span class="s2">&quot;nse&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="KiteTicker-362"><a href="#KiteTicker-362"><span class="linenos">362</span></a>        <span class="s2">&quot;nfo&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="KiteTicker-363"><a href="#KiteTicker-363"><span class="linenos">363</span></a>        <span class="s2">&quot;cds&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span id="KiteTicker-364"><a href="#KiteTicker-364"><span class="linenos">364</span></a>        <span class="s2">&quot;bse&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="KiteTicker-365"><a href="#KiteTicker-365"><span class="linenos">365</span></a>        <span class="s2">&quot;bfo&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span id="KiteTicker-366"><a href="#KiteTicker-366"><span class="linenos">366</span></a>        <span class="s2">&quot;bcd&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span id="KiteTicker-367"><a href="#KiteTicker-367"><span class="linenos">367</span></a>        <span class="s2">&quot;mcx&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
</span><span id="KiteTicker-368"><a href="#KiteTicker-368"><span class="linenos">368</span></a>        <span class="s2">&quot;mcxsx&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
</span><span id="KiteTicker-369"><a href="#KiteTicker-369"><span class="linenos">369</span></a>        <span class="s2">&quot;indices&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
</span><span id="KiteTicker-370"><a href="#KiteTicker-370"><span class="linenos">370</span></a>        <span class="c1"># bsecds is replaced with it&#39;s official segment name bcd</span>
</span><span id="KiteTicker-371"><a href="#KiteTicker-371"><span class="linenos">371</span></a>        <span class="c1"># so,bsecds key will be depreciated in next version</span>
</span><span id="KiteTicker-372"><a href="#KiteTicker-372"><span class="linenos">372</span></a>        <span class="s2">&quot;bsecds&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span id="KiteTicker-373"><a href="#KiteTicker-373"><span class="linenos">373</span></a>    <span class="p">}</span>
</span><span id="KiteTicker-374"><a href="#KiteTicker-374"><span class="linenos">374</span></a>
</span><span id="KiteTicker-375"><a href="#KiteTicker-375"><span class="linenos">375</span></a>    <span class="c1"># Default connection timeout</span>
</span><span id="KiteTicker-376"><a href="#KiteTicker-376"><span class="linenos">376</span></a>    <span class="n">CONNECT_TIMEOUT</span> <span class="o">=</span> <span class="mi">30</span>
</span><span id="KiteTicker-377"><a href="#KiteTicker-377"><span class="linenos">377</span></a>    <span class="c1"># Default Reconnect max delay.</span>
</span><span id="KiteTicker-378"><a href="#KiteTicker-378"><span class="linenos">378</span></a>    <span class="n">RECONNECT_MAX_DELAY</span> <span class="o">=</span> <span class="mi">60</span>
</span><span id="KiteTicker-379"><a href="#KiteTicker-379"><span class="linenos">379</span></a>    <span class="c1"># Default reconnect attempts</span>
</span><span id="KiteTicker-380"><a href="#KiteTicker-380"><span class="linenos">380</span></a>    <span class="n">RECONNECT_MAX_TRIES</span> <span class="o">=</span> <span class="mi">50</span>
</span><span id="KiteTicker-381"><a href="#KiteTicker-381"><span class="linenos">381</span></a>    <span class="c1"># Default root API endpoint. It&#39;s possible to</span>
</span><span id="KiteTicker-382"><a href="#KiteTicker-382"><span class="linenos">382</span></a>    <span class="c1"># override this by passing the `root` parameter during initialisation.</span>
</span><span id="KiteTicker-383"><a href="#KiteTicker-383"><span class="linenos">383</span></a>    <span class="n">ROOT_URI</span> <span class="o">=</span> <span class="s2">&quot;wss://ws.kite.trade&quot;</span>
</span><span id="KiteTicker-384"><a href="#KiteTicker-384"><span class="linenos">384</span></a>
</span><span id="KiteTicker-385"><a href="#KiteTicker-385"><span class="linenos">385</span></a>    <span class="c1"># Available streaming modes.</span>
</span><span id="KiteTicker-386"><a href="#KiteTicker-386"><span class="linenos">386</span></a>    <span class="n">MODE_FULL</span> <span class="o">=</span> <span class="s2">&quot;full&quot;</span>
</span><span id="KiteTicker-387"><a href="#KiteTicker-387"><span class="linenos">387</span></a>    <span class="n">MODE_QUOTE</span> <span class="o">=</span> <span class="s2">&quot;quote&quot;</span>
</span><span id="KiteTicker-388"><a href="#KiteTicker-388"><span class="linenos">388</span></a>    <span class="n">MODE_LTP</span> <span class="o">=</span> <span class="s2">&quot;ltp&quot;</span>
</span><span id="KiteTicker-389"><a href="#KiteTicker-389"><span class="linenos">389</span></a>
</span><span id="KiteTicker-390"><a href="#KiteTicker-390"><span class="linenos">390</span></a>    <span class="c1"># Flag to set if its first connect</span>
</span><span id="KiteTicker-391"><a href="#KiteTicker-391"><span class="linenos">391</span></a>    <span class="n">_is_first_connect</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="KiteTicker-392"><a href="#KiteTicker-392"><span class="linenos">392</span></a>
</span><span id="KiteTicker-393"><a href="#KiteTicker-393"><span class="linenos">393</span></a>    <span class="c1"># Available actions.</span>
</span><span id="KiteTicker-394"><a href="#KiteTicker-394"><span class="linenos">394</span></a>    <span class="n">_message_code</span> <span class="o">=</span> <span class="mi">11</span>
</span><span id="KiteTicker-395"><a href="#KiteTicker-395"><span class="linenos">395</span></a>    <span class="n">_message_subscribe</span> <span class="o">=</span> <span class="s2">&quot;subscribe&quot;</span>
</span><span id="KiteTicker-396"><a href="#KiteTicker-396"><span class="linenos">396</span></a>    <span class="n">_message_unsubscribe</span> <span class="o">=</span> <span class="s2">&quot;unsubscribe&quot;</span>
</span><span id="KiteTicker-397"><a href="#KiteTicker-397"><span class="linenos">397</span></a>    <span class="n">_message_setmode</span> <span class="o">=</span> <span class="s2">&quot;mode&quot;</span>
</span><span id="KiteTicker-398"><a href="#KiteTicker-398"><span class="linenos">398</span></a>
</span><span id="KiteTicker-399"><a href="#KiteTicker-399"><span class="linenos">399</span></a>    <span class="c1"># Minimum delay which should be set between retries. User can&#39;t set less than this</span>
</span><span id="KiteTicker-400"><a href="#KiteTicker-400"><span class="linenos">400</span></a>    <span class="n">_minimum_reconnect_max_delay</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="KiteTicker-401"><a href="#KiteTicker-401"><span class="linenos">401</span></a>    <span class="c1"># Maximum number or retries user can set</span>
</span><span id="KiteTicker-402"><a href="#KiteTicker-402"><span class="linenos">402</span></a>    <span class="n">_maximum_reconnect_max_tries</span> <span class="o">=</span> <span class="mi">300</span>
</span><span id="KiteTicker-403"><a href="#KiteTicker-403"><span class="linenos">403</span></a>
</span><span id="KiteTicker-404"><a href="#KiteTicker-404"><span class="linenos">404</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">access_token</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteTicker-405"><a href="#KiteTicker-405"><span class="linenos">405</span></a>                 <span class="n">reconnect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">reconnect_max_tries</span><span class="o">=</span><span class="n">RECONNECT_MAX_TRIES</span><span class="p">,</span> <span class="n">reconnect_max_delay</span><span class="o">=</span><span class="n">RECONNECT_MAX_DELAY</span><span class="p">,</span>
</span><span id="KiteTicker-406"><a href="#KiteTicker-406"><span class="linenos">406</span></a>                 <span class="n">connect_timeout</span><span class="o">=</span><span class="n">CONNECT_TIMEOUT</span><span class="p">):</span>
</span><span id="KiteTicker-407"><a href="#KiteTicker-407"><span class="linenos">407</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker-408"><a href="#KiteTicker-408"><span class="linenos">408</span></a><span class="sd">        Initialise websocket client instance.</span>
</span><span id="KiteTicker-409"><a href="#KiteTicker-409"><span class="linenos">409</span></a>
</span><span id="KiteTicker-410"><a href="#KiteTicker-410"><span class="linenos">410</span></a><span class="sd">        - `api_key` is the API key issued to you</span>
</span><span id="KiteTicker-411"><a href="#KiteTicker-411"><span class="linenos">411</span></a><span class="sd">        - `access_token` is the token obtained after the login flow in</span>
</span><span id="KiteTicker-412"><a href="#KiteTicker-412"><span class="linenos">412</span></a><span class="sd">            exchange for the `request_token`. Pre-login, this will default to None,</span>
</span><span id="KiteTicker-413"><a href="#KiteTicker-413"><span class="linenos">413</span></a><span class="sd">            but once you have obtained it, you should</span>
</span><span id="KiteTicker-414"><a href="#KiteTicker-414"><span class="linenos">414</span></a><span class="sd">            persist it in a database or session to pass</span>
</span><span id="KiteTicker-415"><a href="#KiteTicker-415"><span class="linenos">415</span></a><span class="sd">            to the Kite Connect class initialisation for subsequent requests.</span>
</span><span id="KiteTicker-416"><a href="#KiteTicker-416"><span class="linenos">416</span></a><span class="sd">        - `root` is the websocket API end point root. Unless you explicitly</span>
</span><span id="KiteTicker-417"><a href="#KiteTicker-417"><span class="linenos">417</span></a><span class="sd">            want to send API requests to a non-default endpoint, this</span>
</span><span id="KiteTicker-418"><a href="#KiteTicker-418"><span class="linenos">418</span></a><span class="sd">            can be ignored.</span>
</span><span id="KiteTicker-419"><a href="#KiteTicker-419"><span class="linenos">419</span></a><span class="sd">        - `reconnect` is a boolean to enable WebSocket autreconnect in case of network failure/disconnection.</span>
</span><span id="KiteTicker-420"><a href="#KiteTicker-420"><span class="linenos">420</span></a><span class="sd">        - `reconnect_max_delay` in seconds is the maximum delay after which subsequent reconnection interval will become constant. Defaults to 60s and minimum acceptable value is 5s.</span>
</span><span id="KiteTicker-421"><a href="#KiteTicker-421"><span class="linenos">421</span></a><span class="sd">        - `reconnect_max_tries` is maximum number reconnection attempts. Defaults to 50 attempts and maximum up to 300 attempts.</span>
</span><span id="KiteTicker-422"><a href="#KiteTicker-422"><span class="linenos">422</span></a><span class="sd">        - `connect_timeout` in seconds is the maximum interval after which connection is considered as timeout. Defaults to 30s.</span>
</span><span id="KiteTicker-423"><a href="#KiteTicker-423"><span class="linenos">423</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker-424"><a href="#KiteTicker-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_URI</span>
</span><span id="KiteTicker-425"><a href="#KiteTicker-425"><span class="linenos">425</span></a>
</span><span id="KiteTicker-426"><a href="#KiteTicker-426"><span class="linenos">426</span></a>        <span class="c1"># Set max reconnect tries</span>
</span><span id="KiteTicker-427"><a href="#KiteTicker-427"><span class="linenos">427</span></a>        <span class="k">if</span> <span class="n">reconnect_max_tries</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum_reconnect_max_tries</span><span class="p">:</span>
</span><span id="KiteTicker-428"><a href="#KiteTicker-428"><span class="linenos">428</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;`reconnect_max_tries` can not be more than </span><span class="si">{val}</span><span class="s2">. Setting to highest possible value - </span><span class="si">{val}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteTicker-429"><a href="#KiteTicker-429"><span class="linenos">429</span></a>                <span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_maximum_reconnect_max_tries</span><span class="p">))</span>
</span><span id="KiteTicker-430"><a href="#KiteTicker-430"><span class="linenos">430</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_tries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum_reconnect_max_tries</span>
</span><span id="KiteTicker-431"><a href="#KiteTicker-431"><span class="linenos">431</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker-432"><a href="#KiteTicker-432"><span class="linenos">432</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_tries</span> <span class="o">=</span> <span class="n">reconnect_max_tries</span>
</span><span id="KiteTicker-433"><a href="#KiteTicker-433"><span class="linenos">433</span></a>
</span><span id="KiteTicker-434"><a href="#KiteTicker-434"><span class="linenos">434</span></a>        <span class="c1"># Set max reconnect delay</span>
</span><span id="KiteTicker-435"><a href="#KiteTicker-435"><span class="linenos">435</span></a>        <span class="k">if</span> <span class="n">reconnect_max_delay</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum_reconnect_max_delay</span><span class="p">:</span>
</span><span id="KiteTicker-436"><a href="#KiteTicker-436"><span class="linenos">436</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;`reconnect_max_delay` can not be less than </span><span class="si">{val}</span><span class="s2">. Setting to lowest possible value - </span><span class="si">{val}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteTicker-437"><a href="#KiteTicker-437"><span class="linenos">437</span></a>                <span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_minimum_reconnect_max_delay</span><span class="p">))</span>
</span><span id="KiteTicker-438"><a href="#KiteTicker-438"><span class="linenos">438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_delay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum_reconnect_max_delay</span>
</span><span id="KiteTicker-439"><a href="#KiteTicker-439"><span class="linenos">439</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker-440"><a href="#KiteTicker-440"><span class="linenos">440</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_delay</span> <span class="o">=</span> <span class="n">reconnect_max_delay</span>
</span><span id="KiteTicker-441"><a href="#KiteTicker-441"><span class="linenos">441</span></a>
</span><span id="KiteTicker-442"><a href="#KiteTicker-442"><span class="linenos">442</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">connect_timeout</span>
</span><span id="KiteTicker-443"><a href="#KiteTicker-443"><span class="linenos">443</span></a>
</span><span id="KiteTicker-444"><a href="#KiteTicker-444"><span class="linenos">444</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">socket_url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{root}</span><span class="s2">?api_key=</span><span class="si">{api_key}</span><span class="s2">&quot;</span>\
</span><span id="KiteTicker-445"><a href="#KiteTicker-445"><span class="linenos">445</span></a>            <span class="s2">&quot;&amp;access_token=</span><span class="si">{access_token}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteTicker-446"><a href="#KiteTicker-446"><span class="linenos">446</span></a>                <span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
</span><span id="KiteTicker-447"><a href="#KiteTicker-447"><span class="linenos">447</span></a>                <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteTicker-448"><a href="#KiteTicker-448"><span class="linenos">448</span></a>                <span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span>
</span><span id="KiteTicker-449"><a href="#KiteTicker-449"><span class="linenos">449</span></a>            <span class="p">)</span>
</span><span id="KiteTicker-450"><a href="#KiteTicker-450"><span class="linenos">450</span></a>
</span><span id="KiteTicker-451"><a href="#KiteTicker-451"><span class="linenos">451</span></a>        <span class="c1"># Debug enables logs</span>
</span><span id="KiteTicker-452"><a href="#KiteTicker-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
</span><span id="KiteTicker-453"><a href="#KiteTicker-453"><span class="linenos">453</span></a>
</span><span id="KiteTicker-454"><a href="#KiteTicker-454"><span class="linenos">454</span></a>        <span class="c1"># Initialize default value for websocket object</span>
</span><span id="KiteTicker-455"><a href="#KiteTicker-455"><span class="linenos">455</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-456"><a href="#KiteTicker-456"><span class="linenos">456</span></a>
</span><span id="KiteTicker-457"><a href="#KiteTicker-457"><span class="linenos">457</span></a>        <span class="c1"># Placeholders for callbacks.</span>
</span><span id="KiteTicker-458"><a href="#KiteTicker-458"><span class="linenos">458</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_ticks</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-459"><a href="#KiteTicker-459"><span class="linenos">459</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-460"><a href="#KiteTicker-460"><span class="linenos">460</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_close</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-461"><a href="#KiteTicker-461"><span class="linenos">461</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_error</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-462"><a href="#KiteTicker-462"><span class="linenos">462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_connect</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-463"><a href="#KiteTicker-463"><span class="linenos">463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_message</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-464"><a href="#KiteTicker-464"><span class="linenos">464</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_reconnect</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-465"><a href="#KiteTicker-465"><span class="linenos">465</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_noreconnect</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-466"><a href="#KiteTicker-466"><span class="linenos">466</span></a>
</span><span id="KiteTicker-467"><a href="#KiteTicker-467"><span class="linenos">467</span></a>        <span class="c1"># Text message updates</span>
</span><span id="KiteTicker-468"><a href="#KiteTicker-468"><span class="linenos">468</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_order_update</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-469"><a href="#KiteTicker-469"><span class="linenos">469</span></a>
</span><span id="KiteTicker-470"><a href="#KiteTicker-470"><span class="linenos">470</span></a>        <span class="c1"># List of current subscribed tokens</span>
</span><span id="KiteTicker-471"><a href="#KiteTicker-471"><span class="linenos">471</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="KiteTicker-472"><a href="#KiteTicker-472"><span class="linenos">472</span></a>
</span><span id="KiteTicker-473"><a href="#KiteTicker-473"><span class="linenos">473</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="KiteTicker-474"><a href="#KiteTicker-474"><span class="linenos">474</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a WebSocket client connection.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-475"><a href="#KiteTicker-475"><span class="linenos">475</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span> <span class="o">=</span> <span class="n">KiteTickerClientFactory</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="KiteTicker-476"><a href="#KiteTicker-476"><span class="linenos">476</span></a>
</span><span id="KiteTicker-477"><a href="#KiteTicker-477"><span class="linenos">477</span></a>        <span class="c1"># Alias for current websocket connection</span>
</span><span id="KiteTicker-478"><a href="#KiteTicker-478"><span class="linenos">478</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">ws</span>
</span><span id="KiteTicker-479"><a href="#KiteTicker-479"><span class="linenos">479</span></a>
</span><span id="KiteTicker-480"><a href="#KiteTicker-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span>
</span><span id="KiteTicker-481"><a href="#KiteTicker-481"><span class="linenos">481</span></a>
</span><span id="KiteTicker-482"><a href="#KiteTicker-482"><span class="linenos">482</span></a>        <span class="c1"># Register private callbacks</span>
</span><span id="KiteTicker-483"><a href="#KiteTicker-483"><span class="linenos">483</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_open</span>
</span><span id="KiteTicker-484"><a href="#KiteTicker-484"><span class="linenos">484</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">on_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_error</span>
</span><span id="KiteTicker-485"><a href="#KiteTicker-485"><span class="linenos">485</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">on_close</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_close</span>
</span><span id="KiteTicker-486"><a href="#KiteTicker-486"><span class="linenos">486</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">on_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_message</span>
</span><span id="KiteTicker-487"><a href="#KiteTicker-487"><span class="linenos">487</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">on_connect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_connect</span>
</span><span id="KiteTicker-488"><a href="#KiteTicker-488"><span class="linenos">488</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">on_reconnect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_reconnect</span>
</span><span id="KiteTicker-489"><a href="#KiteTicker-489"><span class="linenos">489</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">on_noreconnect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_noreconnect</span>
</span><span id="KiteTicker-490"><a href="#KiteTicker-490"><span class="linenos">490</span></a>
</span><span id="KiteTicker-491"><a href="#KiteTicker-491"><span class="linenos">491</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">maxDelay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_delay</span>
</span><span id="KiteTicker-492"><a href="#KiteTicker-492"><span class="linenos">492</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">maxRetries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_tries</span>
</span><span id="KiteTicker-493"><a href="#KiteTicker-493"><span class="linenos">493</span></a>
</span><span id="KiteTicker-494"><a href="#KiteTicker-494"><span class="linenos">494</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_user_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker-495"><a href="#KiteTicker-495"><span class="linenos">495</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">__title__</span> <span class="o">+</span> <span class="s2">&quot;-python/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="n">__version__</span>
</span><span id="KiteTicker-496"><a href="#KiteTicker-496"><span class="linenos">496</span></a>
</span><span id="KiteTicker-497"><a href="#KiteTicker-497"><span class="linenos">497</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">disable_ssl_verification</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteTicker-498"><a href="#KiteTicker-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker-499"><a href="#KiteTicker-499"><span class="linenos">499</span></a><span class="sd">        Establish a websocket connection.</span>
</span><span id="KiteTicker-500"><a href="#KiteTicker-500"><span class="linenos">500</span></a>
</span><span id="KiteTicker-501"><a href="#KiteTicker-501"><span class="linenos">501</span></a><span class="sd">        - `threaded` is a boolean indicating if the websocket client has to be run in threaded mode or not</span>
</span><span id="KiteTicker-502"><a href="#KiteTicker-502"><span class="linenos">502</span></a><span class="sd">        - `disable_ssl_verification` disables building ssl context</span>
</span><span id="KiteTicker-503"><a href="#KiteTicker-503"><span class="linenos">503</span></a><span class="sd">        - `proxy` is a dictionary with keys `host` and `port` which denotes the proxy settings</span>
</span><span id="KiteTicker-504"><a href="#KiteTicker-504"><span class="linenos">504</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker-505"><a href="#KiteTicker-505"><span class="linenos">505</span></a>        <span class="c1"># Custom headers</span>
</span><span id="KiteTicker-506"><a href="#KiteTicker-506"><span class="linenos">506</span></a>        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteTicker-507"><a href="#KiteTicker-507"><span class="linenos">507</span></a>            <span class="s2">&quot;X-Kite-Version&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>  <span class="c1"># For version 3</span>
</span><span id="KiteTicker-508"><a href="#KiteTicker-508"><span class="linenos">508</span></a>        <span class="p">}</span>
</span><span id="KiteTicker-509"><a href="#KiteTicker-509"><span class="linenos">509</span></a>
</span><span id="KiteTicker-510"><a href="#KiteTicker-510"><span class="linenos">510</span></a>        <span class="c1"># Init WebSocket client factory</span>
</span><span id="KiteTicker-511"><a href="#KiteTicker-511"><span class="linenos">511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_create_connection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">socket_url</span><span class="p">,</span>
</span><span id="KiteTicker-512"><a href="#KiteTicker-512"><span class="linenos">512</span></a>                                <span class="n">useragent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_agent</span><span class="p">(),</span>
</span><span id="KiteTicker-513"><a href="#KiteTicker-513"><span class="linenos">513</span></a>                                <span class="n">proxy</span><span class="o">=</span><span class="n">proxy</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</span><span id="KiteTicker-514"><a href="#KiteTicker-514"><span class="linenos">514</span></a>
</span><span id="KiteTicker-515"><a href="#KiteTicker-515"><span class="linenos">515</span></a>        <span class="c1"># Set SSL context</span>
</span><span id="KiteTicker-516"><a href="#KiteTicker-516"><span class="linenos">516</span></a>        <span class="n">context_factory</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-517"><a href="#KiteTicker-517"><span class="linenos">517</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">isSecure</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">disable_ssl_verification</span><span class="p">:</span>
</span><span id="KiteTicker-518"><a href="#KiteTicker-518"><span class="linenos">518</span></a>            <span class="n">context_factory</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">ClientContextFactory</span><span class="p">()</span>
</span><span id="KiteTicker-519"><a href="#KiteTicker-519"><span class="linenos">519</span></a>
</span><span id="KiteTicker-520"><a href="#KiteTicker-520"><span class="linenos">520</span></a>        <span class="c1"># Establish WebSocket connection to a server</span>
</span><span id="KiteTicker-521"><a href="#KiteTicker-521"><span class="linenos">521</span></a>        <span class="n">connectWS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="p">,</span> <span class="n">contextFactory</span><span class="o">=</span><span class="n">context_factory</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span><span class="p">)</span>
</span><span id="KiteTicker-522"><a href="#KiteTicker-522"><span class="linenos">522</span></a>
</span><span id="KiteTicker-523"><a href="#KiteTicker-523"><span class="linenos">523</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="KiteTicker-524"><a href="#KiteTicker-524"><span class="linenos">524</span></a>            <span class="n">twisted_log</span><span class="o">.</span><span class="n">startLogging</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span id="KiteTicker-525"><a href="#KiteTicker-525"><span class="linenos">525</span></a>
</span><span id="KiteTicker-526"><a href="#KiteTicker-526"><span class="linenos">526</span></a>        <span class="c1"># Run in seperate thread of blocking</span>
</span><span id="KiteTicker-527"><a href="#KiteTicker-527"><span class="linenos">527</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="KiteTicker-528"><a href="#KiteTicker-528"><span class="linenos">528</span></a>
</span><span id="KiteTicker-529"><a href="#KiteTicker-529"><span class="linenos">529</span></a>        <span class="c1"># Run when reactor is not running</span>
</span><span id="KiteTicker-530"><a href="#KiteTicker-530"><span class="linenos">530</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reactor</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
</span><span id="KiteTicker-531"><a href="#KiteTicker-531"><span class="linenos">531</span></a>            <span class="k">if</span> <span class="n">threaded</span><span class="p">:</span>
</span><span id="KiteTicker-532"><a href="#KiteTicker-532"><span class="linenos">532</span></a>                <span class="c1"># Signals are not allowed in non main thread by twisted so suppress it.</span>
</span><span id="KiteTicker-533"><a href="#KiteTicker-533"><span class="linenos">533</span></a>                <span class="n">opts</span><span class="p">[</span><span class="s2">&quot;installSignalHandlers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="KiteTicker-534"><a href="#KiteTicker-534"><span class="linenos">534</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">websocket_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">reactor</span><span class="o">.</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">opts</span><span class="p">)</span>
</span><span id="KiteTicker-535"><a href="#KiteTicker-535"><span class="linenos">535</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">websocket_thread</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="KiteTicker-536"><a href="#KiteTicker-536"><span class="linenos">536</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">websocket_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="KiteTicker-537"><a href="#KiteTicker-537"><span class="linenos">537</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker-538"><a href="#KiteTicker-538"><span class="linenos">538</span></a>                <span class="n">reactor</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>
</span><span id="KiteTicker-539"><a href="#KiteTicker-539"><span class="linenos">539</span></a>
</span><span id="KiteTicker-540"><a href="#KiteTicker-540"><span class="linenos">540</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker-541"><a href="#KiteTicker-541"><span class="linenos">541</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if WebSocket connection is established.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-542"><a href="#KiteTicker-542"><span class="linenos">542</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">STATE_OPEN</span><span class="p">:</span>
</span><span id="KiteTicker-543"><a href="#KiteTicker-543"><span class="linenos">543</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker-544"><a href="#KiteTicker-544"><span class="linenos">544</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker-545"><a href="#KiteTicker-545"><span class="linenos">545</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="KiteTicker-546"><a href="#KiteTicker-546"><span class="linenos">546</span></a>
</span><span id="KiteTicker-547"><a href="#KiteTicker-547"><span class="linenos">547</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteTicker-548"><a href="#KiteTicker-548"><span class="linenos">548</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the WebSocket connection.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-549"><a href="#KiteTicker-549"><span class="linenos">549</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="p">:</span>
</span><span id="KiteTicker-550"><a href="#KiteTicker-550"><span class="linenos">550</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">sendClose</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
</span><span id="KiteTicker-551"><a href="#KiteTicker-551"><span class="linenos">551</span></a>
</span><span id="KiteTicker-552"><a href="#KiteTicker-552"><span class="linenos">552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteTicker-553"><a href="#KiteTicker-553"><span class="linenos">553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the WebSocket connection.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-554"><a href="#KiteTicker-554"><span class="linenos">554</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_retry</span><span class="p">()</span>
</span><span id="KiteTicker-555"><a href="#KiteTicker-555"><span class="linenos">555</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
</span><span id="KiteTicker-556"><a href="#KiteTicker-556"><span class="linenos">556</span></a>
</span><span id="KiteTicker-557"><a href="#KiteTicker-557"><span class="linenos">557</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker-558"><a href="#KiteTicker-558"><span class="linenos">558</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the event loop. Should be used if main thread has to be closed in `on_close` method.</span>
</span><span id="KiteTicker-559"><a href="#KiteTicker-559"><span class="linenos">559</span></a><span class="sd">        Reconnection mechanism cannot happen past this method</span>
</span><span id="KiteTicker-560"><a href="#KiteTicker-560"><span class="linenos">560</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker-561"><a href="#KiteTicker-561"><span class="linenos">561</span></a>        <span class="n">reactor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span><span id="KiteTicker-562"><a href="#KiteTicker-562"><span class="linenos">562</span></a>
</span><span id="KiteTicker-563"><a href="#KiteTicker-563"><span class="linenos">563</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stop_retry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker-564"><a href="#KiteTicker-564"><span class="linenos">564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop auto retry when it is in progress.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-565"><a href="#KiteTicker-565"><span class="linenos">565</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="p">:</span>
</span><span id="KiteTicker-566"><a href="#KiteTicker-566"><span class="linenos">566</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">stopTrying</span><span class="p">()</span>
</span><span id="KiteTicker-567"><a href="#KiteTicker-567"><span class="linenos">567</span></a>
</span><span id="KiteTicker-568"><a href="#KiteTicker-568"><span class="linenos">568</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">):</span>
</span><span id="KiteTicker-569"><a href="#KiteTicker-569"><span class="linenos">569</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker-570"><a href="#KiteTicker-570"><span class="linenos">570</span></a><span class="sd">        Subscribe to a list of instrument_tokens.</span>
</span><span id="KiteTicker-571"><a href="#KiteTicker-571"><span class="linenos">571</span></a>
</span><span id="KiteTicker-572"><a href="#KiteTicker-572"><span class="linenos">572</span></a><span class="sd">        - `instrument_tokens` is list of instrument instrument_tokens to subscribe</span>
</span><span id="KiteTicker-573"><a href="#KiteTicker-573"><span class="linenos">573</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker-574"><a href="#KiteTicker-574"><span class="linenos">574</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-575"><a href="#KiteTicker-575"><span class="linenos">575</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">(</span>
</span><span id="KiteTicker-576"><a href="#KiteTicker-576"><span class="linenos">576</span></a>                <span class="n">six</span><span class="o">.</span><span class="n">b</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_subscribe</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span> <span class="n">instrument_tokens</span><span class="p">}))</span>
</span><span id="KiteTicker-577"><a href="#KiteTicker-577"><span class="linenos">577</span></a>            <span class="p">)</span>
</span><span id="KiteTicker-578"><a href="#KiteTicker-578"><span class="linenos">578</span></a>
</span><span id="KiteTicker-579"><a href="#KiteTicker-579"><span class="linenos">579</span></a>            <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">instrument_tokens</span><span class="p">:</span>
</span><span id="KiteTicker-580"><a href="#KiteTicker-580"><span class="linenos">580</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODE_QUOTE</span>
</span><span id="KiteTicker-581"><a href="#KiteTicker-581"><span class="linenos">581</span></a>
</span><span id="KiteTicker-582"><a href="#KiteTicker-582"><span class="linenos">582</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker-583"><a href="#KiteTicker-583"><span class="linenos">583</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="KiteTicker-584"><a href="#KiteTicker-584"><span class="linenos">584</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Error while subscribe: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</span><span id="KiteTicker-585"><a href="#KiteTicker-585"><span class="linenos">585</span></a>            <span class="k">raise</span>
</span><span id="KiteTicker-586"><a href="#KiteTicker-586"><span class="linenos">586</span></a>
</span><span id="KiteTicker-587"><a href="#KiteTicker-587"><span class="linenos">587</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">unsubscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">):</span>
</span><span id="KiteTicker-588"><a href="#KiteTicker-588"><span class="linenos">588</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker-589"><a href="#KiteTicker-589"><span class="linenos">589</span></a><span class="sd">        Unsubscribe the given list of instrument_tokens.</span>
</span><span id="KiteTicker-590"><a href="#KiteTicker-590"><span class="linenos">590</span></a>
</span><span id="KiteTicker-591"><a href="#KiteTicker-591"><span class="linenos">591</span></a><span class="sd">        - `instrument_tokens` is list of instrument_tokens to unsubscribe.</span>
</span><span id="KiteTicker-592"><a href="#KiteTicker-592"><span class="linenos">592</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker-593"><a href="#KiteTicker-593"><span class="linenos">593</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-594"><a href="#KiteTicker-594"><span class="linenos">594</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">(</span>
</span><span id="KiteTicker-595"><a href="#KiteTicker-595"><span class="linenos">595</span></a>                <span class="n">six</span><span class="o">.</span><span class="n">b</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_unsubscribe</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span> <span class="n">instrument_tokens</span><span class="p">}))</span>
</span><span id="KiteTicker-596"><a href="#KiteTicker-596"><span class="linenos">596</span></a>            <span class="p">)</span>
</span><span id="KiteTicker-597"><a href="#KiteTicker-597"><span class="linenos">597</span></a>
</span><span id="KiteTicker-598"><a href="#KiteTicker-598"><span class="linenos">598</span></a>            <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">instrument_tokens</span><span class="p">:</span>
</span><span id="KiteTicker-599"><a href="#KiteTicker-599"><span class="linenos">599</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-600"><a href="#KiteTicker-600"><span class="linenos">600</span></a>                    <span class="k">del</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">])</span>
</span><span id="KiteTicker-601"><a href="#KiteTicker-601"><span class="linenos">601</span></a>                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="KiteTicker-602"><a href="#KiteTicker-602"><span class="linenos">602</span></a>                    <span class="k">pass</span>
</span><span id="KiteTicker-603"><a href="#KiteTicker-603"><span class="linenos">603</span></a>
</span><span id="KiteTicker-604"><a href="#KiteTicker-604"><span class="linenos">604</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker-605"><a href="#KiteTicker-605"><span class="linenos">605</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="KiteTicker-606"><a href="#KiteTicker-606"><span class="linenos">606</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Error while unsubscribe: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</span><span id="KiteTicker-607"><a href="#KiteTicker-607"><span class="linenos">607</span></a>            <span class="k">raise</span>
</span><span id="KiteTicker-608"><a href="#KiteTicker-608"><span class="linenos">608</span></a>
</span><span id="KiteTicker-609"><a href="#KiteTicker-609"><span class="linenos">609</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">):</span>
</span><span id="KiteTicker-610"><a href="#KiteTicker-610"><span class="linenos">610</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker-611"><a href="#KiteTicker-611"><span class="linenos">611</span></a><span class="sd">        Set streaming mode for the given list of tokens.</span>
</span><span id="KiteTicker-612"><a href="#KiteTicker-612"><span class="linenos">612</span></a>
</span><span id="KiteTicker-613"><a href="#KiteTicker-613"><span class="linenos">613</span></a><span class="sd">        - `mode` is the mode to set. It can be one of the following class constants:</span>
</span><span id="KiteTicker-614"><a href="#KiteTicker-614"><span class="linenos">614</span></a><span class="sd">            MODE_LTP, MODE_QUOTE, or MODE_FULL.</span>
</span><span id="KiteTicker-615"><a href="#KiteTicker-615"><span class="linenos">615</span></a><span class="sd">        - `instrument_tokens` is list of instrument tokens on which the mode should be applied</span>
</span><span id="KiteTicker-616"><a href="#KiteTicker-616"><span class="linenos">616</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker-617"><a href="#KiteTicker-617"><span class="linenos">617</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-618"><a href="#KiteTicker-618"><span class="linenos">618</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">(</span>
</span><span id="KiteTicker-619"><a href="#KiteTicker-619"><span class="linenos">619</span></a>                <span class="n">six</span><span class="o">.</span><span class="n">b</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_setmode</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">mode</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">]}))</span>
</span><span id="KiteTicker-620"><a href="#KiteTicker-620"><span class="linenos">620</span></a>            <span class="p">)</span>
</span><span id="KiteTicker-621"><a href="#KiteTicker-621"><span class="linenos">621</span></a>
</span><span id="KiteTicker-622"><a href="#KiteTicker-622"><span class="linenos">622</span></a>            <span class="c1"># Update modes</span>
</span><span id="KiteTicker-623"><a href="#KiteTicker-623"><span class="linenos">623</span></a>            <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">instrument_tokens</span><span class="p">:</span>
</span><span id="KiteTicker-624"><a href="#KiteTicker-624"><span class="linenos">624</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">]</span> <span class="o">=</span> <span class="n">mode</span>
</span><span id="KiteTicker-625"><a href="#KiteTicker-625"><span class="linenos">625</span></a>
</span><span id="KiteTicker-626"><a href="#KiteTicker-626"><span class="linenos">626</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker-627"><a href="#KiteTicker-627"><span class="linenos">627</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="KiteTicker-628"><a href="#KiteTicker-628"><span class="linenos">628</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Error while setting mode: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</span><span id="KiteTicker-629"><a href="#KiteTicker-629"><span class="linenos">629</span></a>            <span class="k">raise</span>
</span><span id="KiteTicker-630"><a href="#KiteTicker-630"><span class="linenos">630</span></a>
</span><span id="KiteTicker-631"><a href="#KiteTicker-631"><span class="linenos">631</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resubscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker-632"><a href="#KiteTicker-632"><span class="linenos">632</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Resubscribe to all current subscribed tokens.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-633"><a href="#KiteTicker-633"><span class="linenos">633</span></a>        <span class="n">modes</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="KiteTicker-634"><a href="#KiteTicker-634"><span class="linenos">634</span></a>
</span><span id="KiteTicker-635"><a href="#KiteTicker-635"><span class="linenos">635</span></a>        <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">:</span>
</span><span id="KiteTicker-636"><a href="#KiteTicker-636"><span class="linenos">636</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">]</span>
</span><span id="KiteTicker-637"><a href="#KiteTicker-637"><span class="linenos">637</span></a>
</span><span id="KiteTicker-638"><a href="#KiteTicker-638"><span class="linenos">638</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">modes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="KiteTicker-639"><a href="#KiteTicker-639"><span class="linenos">639</span></a>                <span class="n">modes</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteTicker-640"><a href="#KiteTicker-640"><span class="linenos">640</span></a>
</span><span id="KiteTicker-641"><a href="#KiteTicker-641"><span class="linenos">641</span></a>            <span class="n">modes</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</span><span id="KiteTicker-642"><a href="#KiteTicker-642"><span class="linenos">642</span></a>
</span><span id="KiteTicker-643"><a href="#KiteTicker-643"><span class="linenos">643</span></a>        <span class="k">for</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">modes</span><span class="p">:</span>
</span><span id="KiteTicker-644"><a href="#KiteTicker-644"><span class="linenos">644</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="KiteTicker-645"><a href="#KiteTicker-645"><span class="linenos">645</span></a>                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Resubscribe and set mode: </span><span class="si">{}</span><span class="s2"> - </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">modes</span><span class="p">[</span><span class="n">mode</span><span class="p">]))</span>
</span><span id="KiteTicker-646"><a href="#KiteTicker-646"><span class="linenos">646</span></a>
</span><span id="KiteTicker-647"><a href="#KiteTicker-647"><span class="linenos">647</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">modes</span><span class="p">[</span><span class="n">mode</span><span class="p">])</span>
</span><span id="KiteTicker-648"><a href="#KiteTicker-648"><span class="linenos">648</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">modes</span><span class="p">[</span><span class="n">mode</span><span class="p">])</span>
</span><span id="KiteTicker-649"><a href="#KiteTicker-649"><span class="linenos">649</span></a>
</span><span id="KiteTicker-650"><a href="#KiteTicker-650"><span class="linenos">650</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ws</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
</span><span id="KiteTicker-651"><a href="#KiteTicker-651"><span class="linenos">651</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="n">ws</span>
</span><span id="KiteTicker-652"><a href="#KiteTicker-652"><span class="linenos">652</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_connect</span><span class="p">:</span>
</span><span id="KiteTicker-653"><a href="#KiteTicker-653"><span class="linenos">653</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="KiteTicker-654"><a href="#KiteTicker-654"><span class="linenos">654</span></a>
</span><span id="KiteTicker-655"><a href="#KiteTicker-655"><span class="linenos">655</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ws</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">reason</span><span class="p">):</span>
</span><span id="KiteTicker-656"><a href="#KiteTicker-656"><span class="linenos">656</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Call `on_close` callback when connection is closed.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-657"><a href="#KiteTicker-657"><span class="linenos">657</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Connection closed: </span><span class="si">{}</span><span class="s2"> - </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">reason</span><span class="p">)))</span>
</span><span id="KiteTicker-658"><a href="#KiteTicker-658"><span class="linenos">658</span></a>
</span><span id="KiteTicker-659"><a href="#KiteTicker-659"><span class="linenos">659</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_close</span><span class="p">:</span>
</span><span id="KiteTicker-660"><a href="#KiteTicker-660"><span class="linenos">660</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
</span><span id="KiteTicker-661"><a href="#KiteTicker-661"><span class="linenos">661</span></a>
</span><span id="KiteTicker-662"><a href="#KiteTicker-662"><span class="linenos">662</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ws</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">reason</span><span class="p">):</span>
</span><span id="KiteTicker-663"><a href="#KiteTicker-663"><span class="linenos">663</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Call `on_error` callback when connection throws an error.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-664"><a href="#KiteTicker-664"><span class="linenos">664</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Connection error: </span><span class="si">{}</span><span class="s2"> - </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">reason</span><span class="p">)))</span>
</span><span id="KiteTicker-665"><a href="#KiteTicker-665"><span class="linenos">665</span></a>
</span><span id="KiteTicker-666"><a href="#KiteTicker-666"><span class="linenos">666</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_error</span><span class="p">:</span>
</span><span id="KiteTicker-667"><a href="#KiteTicker-667"><span class="linenos">667</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
</span><span id="KiteTicker-668"><a href="#KiteTicker-668"><span class="linenos">668</span></a>
</span><span id="KiteTicker-669"><a href="#KiteTicker-669"><span class="linenos">669</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ws</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">is_binary</span><span class="p">):</span>
</span><span id="KiteTicker-670"><a href="#KiteTicker-670"><span class="linenos">670</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Call `on_message` callback when text message is received.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-671"><a href="#KiteTicker-671"><span class="linenos">671</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_message</span><span class="p">:</span>
</span><span id="KiteTicker-672"><a href="#KiteTicker-672"><span class="linenos">672</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">is_binary</span><span class="p">)</span>
</span><span id="KiteTicker-673"><a href="#KiteTicker-673"><span class="linenos">673</span></a>
</span><span id="KiteTicker-674"><a href="#KiteTicker-674"><span class="linenos">674</span></a>        <span class="c1"># If the message is binary, parse it and send it to the callback.</span>
</span><span id="KiteTicker-675"><a href="#KiteTicker-675"><span class="linenos">675</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_ticks</span> <span class="ow">and</span> <span class="n">is_binary</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="KiteTicker-676"><a href="#KiteTicker-676"><span class="linenos">676</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_binary</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span>
</span><span id="KiteTicker-677"><a href="#KiteTicker-677"><span class="linenos">677</span></a>
</span><span id="KiteTicker-678"><a href="#KiteTicker-678"><span class="linenos">678</span></a>        <span class="c1"># Parse text messages</span>
</span><span id="KiteTicker-679"><a href="#KiteTicker-679"><span class="linenos">679</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_binary</span><span class="p">:</span>
</span><span id="KiteTicker-680"><a href="#KiteTicker-680"><span class="linenos">680</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_text_message</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
</span><span id="KiteTicker-681"><a href="#KiteTicker-681"><span class="linenos">681</span></a>
</span><span id="KiteTicker-682"><a href="#KiteTicker-682"><span class="linenos">682</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ws</span><span class="p">):</span>
</span><span id="KiteTicker-683"><a href="#KiteTicker-683"><span class="linenos">683</span></a>        <span class="c1"># Resubscribe if its reconnect</span>
</span><span id="KiteTicker-684"><a href="#KiteTicker-684"><span class="linenos">684</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_first_connect</span><span class="p">:</span>
</span><span id="KiteTicker-685"><a href="#KiteTicker-685"><span class="linenos">685</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">resubscribe</span><span class="p">()</span>
</span><span id="KiteTicker-686"><a href="#KiteTicker-686"><span class="linenos">686</span></a>
</span><span id="KiteTicker-687"><a href="#KiteTicker-687"><span class="linenos">687</span></a>        <span class="c1"># Set first connect to false once its connected first time</span>
</span><span id="KiteTicker-688"><a href="#KiteTicker-688"><span class="linenos">688</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_is_first_connect</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="KiteTicker-689"><a href="#KiteTicker-689"><span class="linenos">689</span></a>
</span><span id="KiteTicker-690"><a href="#KiteTicker-690"><span class="linenos">690</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_open</span><span class="p">:</span>
</span><span id="KiteTicker-691"><a href="#KiteTicker-691"><span class="linenos">691</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="KiteTicker-692"><a href="#KiteTicker-692"><span class="linenos">692</span></a>
</span><span id="KiteTicker-693"><a href="#KiteTicker-693"><span class="linenos">693</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempts_count</span><span class="p">):</span>
</span><span id="KiteTicker-694"><a href="#KiteTicker-694"><span class="linenos">694</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_reconnect</span><span class="p">:</span>
</span><span id="KiteTicker-695"><a href="#KiteTicker-695"><span class="linenos">695</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempts_count</span><span class="p">)</span>
</span><span id="KiteTicker-696"><a href="#KiteTicker-696"><span class="linenos">696</span></a>
</span><span id="KiteTicker-697"><a href="#KiteTicker-697"><span class="linenos">697</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_noreconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker-698"><a href="#KiteTicker-698"><span class="linenos">698</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_noreconnect</span><span class="p">:</span>
</span><span id="KiteTicker-699"><a href="#KiteTicker-699"><span class="linenos">699</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_noreconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="KiteTicker-700"><a href="#KiteTicker-700"><span class="linenos">700</span></a>
</span><span id="KiteTicker-701"><a href="#KiteTicker-701"><span class="linenos">701</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_text_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
</span><span id="KiteTicker-702"><a href="#KiteTicker-702"><span class="linenos">702</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse text message.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-703"><a href="#KiteTicker-703"><span class="linenos">703</span></a>        <span class="c1"># Decode unicode data</span>
</span><span id="KiteTicker-704"><a href="#KiteTicker-704"><span class="linenos">704</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">six</span><span class="o">.</span><span class="n">PY2</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span id="KiteTicker-705"><a href="#KiteTicker-705"><span class="linenos">705</span></a>            <span class="n">payload</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</span><span id="KiteTicker-706"><a href="#KiteTicker-706"><span class="linenos">706</span></a>
</span><span id="KiteTicker-707"><a href="#KiteTicker-707"><span class="linenos">707</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-708"><a href="#KiteTicker-708"><span class="linenos">708</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
</span><span id="KiteTicker-709"><a href="#KiteTicker-709"><span class="linenos">709</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="KiteTicker-710"><a href="#KiteTicker-710"><span class="linenos">710</span></a>            <span class="k">return</span>
</span><span id="KiteTicker-711"><a href="#KiteTicker-711"><span class="linenos">711</span></a>
</span><span id="KiteTicker-712"><a href="#KiteTicker-712"><span class="linenos">712</span></a>        <span class="c1"># Order update callback</span>
</span><span id="KiteTicker-713"><a href="#KiteTicker-713"><span class="linenos">713</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_order_update</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;order&quot;</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">):</span>
</span><span id="KiteTicker-714"><a href="#KiteTicker-714"><span class="linenos">714</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_order_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
</span><span id="KiteTicker-715"><a href="#KiteTicker-715"><span class="linenos">715</span></a>
</span><span id="KiteTicker-716"><a href="#KiteTicker-716"><span class="linenos">716</span></a>        <span class="c1"># Custom error with websocket error code 0</span>
</span><span id="KiteTicker-717"><a href="#KiteTicker-717"><span class="linenos">717</span></a>        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
</span><span id="KiteTicker-718"><a href="#KiteTicker-718"><span class="linenos">718</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_on_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">))</span>
</span><span id="KiteTicker-719"><a href="#KiteTicker-719"><span class="linenos">719</span></a>
</span><span id="KiteTicker-720"><a href="#KiteTicker-720"><span class="linenos">720</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bin</span><span class="p">):</span>
</span><span id="KiteTicker-721"><a href="#KiteTicker-721"><span class="linenos">721</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse binary data to a (list of) ticks structure.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-722"><a href="#KiteTicker-722"><span class="linenos">722</span></a>        <span class="n">packets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_split_packets</span><span class="p">(</span><span class="nb">bin</span><span class="p">)</span>  <span class="c1"># split data to individual ticks packet</span>
</span><span id="KiteTicker-723"><a href="#KiteTicker-723"><span class="linenos">723</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteTicker-724"><a href="#KiteTicker-724"><span class="linenos">724</span></a>
</span><span id="KiteTicker-725"><a href="#KiteTicker-725"><span class="linenos">725</span></a>        <span class="k">for</span> <span class="n">packet</span> <span class="ow">in</span> <span class="n">packets</span><span class="p">:</span>
</span><span id="KiteTicker-726"><a href="#KiteTicker-726"><span class="linenos">726</span></a>            <span class="n">instrument_token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="KiteTicker-727"><a href="#KiteTicker-727"><span class="linenos">727</span></a>            <span class="n">segment</span> <span class="o">=</span> <span class="n">instrument_token</span> <span class="o">&amp;</span> <span class="mh">0xff</span>  <span class="c1"># Retrive segment constant from instrument_token</span>
</span><span id="KiteTicker-728"><a href="#KiteTicker-728"><span class="linenos">728</span></a>
</span><span id="KiteTicker-729"><a href="#KiteTicker-729"><span class="linenos">729</span></a>            <span class="c1"># Add price divisor based on segment</span>
</span><span id="KiteTicker-730"><a href="#KiteTicker-730"><span class="linenos">730</span></a>            <span class="k">if</span> <span class="n">segment</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">EXCHANGE_MAP</span><span class="p">[</span><span class="s2">&quot;cds&quot;</span><span class="p">]:</span>
</span><span id="KiteTicker-731"><a href="#KiteTicker-731"><span class="linenos">731</span></a>                <span class="n">divisor</span> <span class="o">=</span> <span class="mf">10000000.0</span>
</span><span id="KiteTicker-732"><a href="#KiteTicker-732"><span class="linenos">732</span></a>            <span class="k">elif</span> <span class="n">segment</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">EXCHANGE_MAP</span><span class="p">[</span><span class="s2">&quot;bcd&quot;</span><span class="p">]:</span>
</span><span id="KiteTicker-733"><a href="#KiteTicker-733"><span class="linenos">733</span></a>                <span class="n">divisor</span> <span class="o">=</span> <span class="mf">10000.0</span>
</span><span id="KiteTicker-734"><a href="#KiteTicker-734"><span class="linenos">734</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker-735"><a href="#KiteTicker-735"><span class="linenos">735</span></a>                <span class="n">divisor</span> <span class="o">=</span> <span class="mf">100.0</span>
</span><span id="KiteTicker-736"><a href="#KiteTicker-736"><span class="linenos">736</span></a>
</span><span id="KiteTicker-737"><a href="#KiteTicker-737"><span class="linenos">737</span></a>            <span class="c1"># All indices are not tradable</span>
</span><span id="KiteTicker-738"><a href="#KiteTicker-738"><span class="linenos">738</span></a>            <span class="n">tradable</span> <span class="o">=</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">segment</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">EXCHANGE_MAP</span><span class="p">[</span><span class="s2">&quot;indices&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="kc">True</span>
</span><span id="KiteTicker-739"><a href="#KiteTicker-739"><span class="linenos">739</span></a>
</span><span id="KiteTicker-740"><a href="#KiteTicker-740"><span class="linenos">740</span></a>            <span class="c1"># LTP packets</span>
</span><span id="KiteTicker-741"><a href="#KiteTicker-741"><span class="linenos">741</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="KiteTicker-742"><a href="#KiteTicker-742"><span class="linenos">742</span></a>                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="KiteTicker-743"><a href="#KiteTicker-743"><span class="linenos">743</span></a>                    <span class="s2">&quot;tradable&quot;</span><span class="p">:</span> <span class="n">tradable</span><span class="p">,</span>
</span><span id="KiteTicker-744"><a href="#KiteTicker-744"><span class="linenos">744</span></a>                    <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODE_LTP</span><span class="p">,</span>
</span><span id="KiteTicker-745"><a href="#KiteTicker-745"><span class="linenos">745</span></a>                    <span class="s2">&quot;instrument_token&quot;</span><span class="p">:</span> <span class="n">instrument_token</span><span class="p">,</span>
</span><span id="KiteTicker-746"><a href="#KiteTicker-746"><span class="linenos">746</span></a>                    <span class="s2">&quot;last_price&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span>
</span><span id="KiteTicker-747"><a href="#KiteTicker-747"><span class="linenos">747</span></a>                <span class="p">})</span>
</span><span id="KiteTicker-748"><a href="#KiteTicker-748"><span class="linenos">748</span></a>            <span class="c1"># Indices quote and full mode</span>
</span><span id="KiteTicker-749"><a href="#KiteTicker-749"><span class="linenos">749</span></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">28</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">32</span><span class="p">:</span>
</span><span id="KiteTicker-750"><a href="#KiteTicker-750"><span class="linenos">750</span></a>                <span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODE_QUOTE</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">28</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODE_FULL</span>
</span><span id="KiteTicker-751"><a href="#KiteTicker-751"><span class="linenos">751</span></a>
</span><span id="KiteTicker-752"><a href="#KiteTicker-752"><span class="linenos">752</span></a>                <span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteTicker-753"><a href="#KiteTicker-753"><span class="linenos">753</span></a>                    <span class="s2">&quot;tradable&quot;</span><span class="p">:</span> <span class="n">tradable</span><span class="p">,</span>
</span><span id="KiteTicker-754"><a href="#KiteTicker-754"><span class="linenos">754</span></a>                    <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="n">mode</span><span class="p">,</span>
</span><span id="KiteTicker-755"><a href="#KiteTicker-755"><span class="linenos">755</span></a>                    <span class="s2">&quot;instrument_token&quot;</span><span class="p">:</span> <span class="n">instrument_token</span><span class="p">,</span>
</span><span id="KiteTicker-756"><a href="#KiteTicker-756"><span class="linenos">756</span></a>                    <span class="s2">&quot;last_price&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-757"><a href="#KiteTicker-757"><span class="linenos">757</span></a>                    <span class="s2">&quot;ohlc&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="KiteTicker-758"><a href="#KiteTicker-758"><span class="linenos">758</span></a>                        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-759"><a href="#KiteTicker-759"><span class="linenos">759</span></a>                        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-760"><a href="#KiteTicker-760"><span class="linenos">760</span></a>                        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-761"><a href="#KiteTicker-761"><span class="linenos">761</span></a>                        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span>
</span><span id="KiteTicker-762"><a href="#KiteTicker-762"><span class="linenos">762</span></a>                    <span class="p">}</span>
</span><span id="KiteTicker-763"><a href="#KiteTicker-763"><span class="linenos">763</span></a>                <span class="p">}</span>
</span><span id="KiteTicker-764"><a href="#KiteTicker-764"><span class="linenos">764</span></a>
</span><span id="KiteTicker-765"><a href="#KiteTicker-765"><span class="linenos">765</span></a>                <span class="c1"># Compute the change price using close price and last price</span>
</span><span id="KiteTicker-766"><a href="#KiteTicker-766"><span class="linenos">766</span></a>                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="KiteTicker-767"><a href="#KiteTicker-767"><span class="linenos">767</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;ohlc&quot;</span><span class="p">][</span><span class="s2">&quot;close&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="KiteTicker-768"><a href="#KiteTicker-768"><span class="linenos">768</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;last_price&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;ohlc&quot;</span><span class="p">][</span><span class="s2">&quot;close&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;ohlc&quot;</span><span class="p">][</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>
</span><span id="KiteTicker-769"><a href="#KiteTicker-769"><span class="linenos">769</span></a>
</span><span id="KiteTicker-770"><a href="#KiteTicker-770"><span class="linenos">770</span></a>                <span class="c1"># Full mode with timestamp</span>
</span><span id="KiteTicker-771"><a href="#KiteTicker-771"><span class="linenos">771</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">32</span><span class="p">:</span>
</span><span id="KiteTicker-772"><a href="#KiteTicker-772"><span class="linenos">772</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-773"><a href="#KiteTicker-773"><span class="linenos">773</span></a>                        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">32</span><span class="p">))</span>
</span><span id="KiteTicker-774"><a href="#KiteTicker-774"><span class="linenos">774</span></a>                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="KiteTicker-775"><a href="#KiteTicker-775"><span class="linenos">775</span></a>                        <span class="n">timestamp</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-776"><a href="#KiteTicker-776"><span class="linenos">776</span></a>
</span><span id="KiteTicker-777"><a href="#KiteTicker-777"><span class="linenos">777</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;exchange_timestamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span>
</span><span id="KiteTicker-778"><a href="#KiteTicker-778"><span class="linenos">778</span></a>
</span><span id="KiteTicker-779"><a href="#KiteTicker-779"><span class="linenos">779</span></a>                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span id="KiteTicker-780"><a href="#KiteTicker-780"><span class="linenos">780</span></a>            <span class="c1"># Quote and full mode</span>
</span><span id="KiteTicker-781"><a href="#KiteTicker-781"><span class="linenos">781</span></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">44</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">184</span><span class="p">:</span>
</span><span id="KiteTicker-782"><a href="#KiteTicker-782"><span class="linenos">782</span></a>                <span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODE_QUOTE</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">44</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODE_FULL</span>
</span><span id="KiteTicker-783"><a href="#KiteTicker-783"><span class="linenos">783</span></a>
</span><span id="KiteTicker-784"><a href="#KiteTicker-784"><span class="linenos">784</span></a>                <span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteTicker-785"><a href="#KiteTicker-785"><span class="linenos">785</span></a>                    <span class="s2">&quot;tradable&quot;</span><span class="p">:</span> <span class="n">tradable</span><span class="p">,</span>
</span><span id="KiteTicker-786"><a href="#KiteTicker-786"><span class="linenos">786</span></a>                    <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="n">mode</span><span class="p">,</span>
</span><span id="KiteTicker-787"><a href="#KiteTicker-787"><span class="linenos">787</span></a>                    <span class="s2">&quot;instrument_token&quot;</span><span class="p">:</span> <span class="n">instrument_token</span><span class="p">,</span>
</span><span id="KiteTicker-788"><a href="#KiteTicker-788"><span class="linenos">788</span></a>                    <span class="s2">&quot;last_price&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-789"><a href="#KiteTicker-789"><span class="linenos">789</span></a>                    <span class="s2">&quot;last_traded_quantity&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
</span><span id="KiteTicker-790"><a href="#KiteTicker-790"><span class="linenos">790</span></a>                    <span class="s2">&quot;average_traded_price&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-791"><a href="#KiteTicker-791"><span class="linenos">791</span></a>                    <span class="s2">&quot;volume_traded&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
</span><span id="KiteTicker-792"><a href="#KiteTicker-792"><span class="linenos">792</span></a>                    <span class="s2">&quot;total_buy_quantity&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span>
</span><span id="KiteTicker-793"><a href="#KiteTicker-793"><span class="linenos">793</span></a>                    <span class="s2">&quot;total_sell_quantity&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">28</span><span class="p">),</span>
</span><span id="KiteTicker-794"><a href="#KiteTicker-794"><span class="linenos">794</span></a>                    <span class="s2">&quot;ohlc&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="KiteTicker-795"><a href="#KiteTicker-795"><span class="linenos">795</span></a>                        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-796"><a href="#KiteTicker-796"><span class="linenos">796</span></a>                        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">36</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-797"><a href="#KiteTicker-797"><span class="linenos">797</span></a>                        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-798"><a href="#KiteTicker-798"><span class="linenos">798</span></a>                        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">44</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span>
</span><span id="KiteTicker-799"><a href="#KiteTicker-799"><span class="linenos">799</span></a>                    <span class="p">}</span>
</span><span id="KiteTicker-800"><a href="#KiteTicker-800"><span class="linenos">800</span></a>                <span class="p">}</span>
</span><span id="KiteTicker-801"><a href="#KiteTicker-801"><span class="linenos">801</span></a>
</span><span id="KiteTicker-802"><a href="#KiteTicker-802"><span class="linenos">802</span></a>                <span class="c1"># Compute the change price using close price and last price</span>
</span><span id="KiteTicker-803"><a href="#KiteTicker-803"><span class="linenos">803</span></a>                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="KiteTicker-804"><a href="#KiteTicker-804"><span class="linenos">804</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;ohlc&quot;</span><span class="p">][</span><span class="s2">&quot;close&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="KiteTicker-805"><a href="#KiteTicker-805"><span class="linenos">805</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;last_price&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;ohlc&quot;</span><span class="p">][</span><span class="s2">&quot;close&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;ohlc&quot;</span><span class="p">][</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>
</span><span id="KiteTicker-806"><a href="#KiteTicker-806"><span class="linenos">806</span></a>
</span><span id="KiteTicker-807"><a href="#KiteTicker-807"><span class="linenos">807</span></a>                <span class="c1"># Parse full mode</span>
</span><span id="KiteTicker-808"><a href="#KiteTicker-808"><span class="linenos">808</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span> <span class="o">==</span> <span class="mi">184</span><span class="p">:</span>
</span><span id="KiteTicker-809"><a href="#KiteTicker-809"><span class="linenos">809</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-810"><a href="#KiteTicker-810"><span class="linenos">810</span></a>                        <span class="n">last_trade_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">48</span><span class="p">))</span>
</span><span id="KiteTicker-811"><a href="#KiteTicker-811"><span class="linenos">811</span></a>                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="KiteTicker-812"><a href="#KiteTicker-812"><span class="linenos">812</span></a>                        <span class="n">last_trade_time</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-813"><a href="#KiteTicker-813"><span class="linenos">813</span></a>
</span><span id="KiteTicker-814"><a href="#KiteTicker-814"><span class="linenos">814</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker-815"><a href="#KiteTicker-815"><span class="linenos">815</span></a>                        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">64</span><span class="p">))</span>
</span><span id="KiteTicker-816"><a href="#KiteTicker-816"><span class="linenos">816</span></a>                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="KiteTicker-817"><a href="#KiteTicker-817"><span class="linenos">817</span></a>                        <span class="n">timestamp</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker-818"><a href="#KiteTicker-818"><span class="linenos">818</span></a>
</span><span id="KiteTicker-819"><a href="#KiteTicker-819"><span class="linenos">819</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;last_trade_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_trade_time</span>
</span><span id="KiteTicker-820"><a href="#KiteTicker-820"><span class="linenos">820</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;oi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">52</span><span class="p">)</span>
</span><span id="KiteTicker-821"><a href="#KiteTicker-821"><span class="linenos">821</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;oi_day_high&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">56</span><span class="p">)</span>
</span><span id="KiteTicker-822"><a href="#KiteTicker-822"><span class="linenos">822</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;oi_day_low&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="KiteTicker-823"><a href="#KiteTicker-823"><span class="linenos">823</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;exchange_timestamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span>
</span><span id="KiteTicker-824"><a href="#KiteTicker-824"><span class="linenos">824</span></a>
</span><span id="KiteTicker-825"><a href="#KiteTicker-825"><span class="linenos">825</span></a>                    <span class="c1"># Market depth entries.</span>
</span><span id="KiteTicker-826"><a href="#KiteTicker-826"><span class="linenos">826</span></a>                    <span class="n">depth</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteTicker-827"><a href="#KiteTicker-827"><span class="linenos">827</span></a>                        <span class="s2">&quot;buy&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="KiteTicker-828"><a href="#KiteTicker-828"><span class="linenos">828</span></a>                        <span class="s2">&quot;sell&quot;</span><span class="p">:</span> <span class="p">[]</span>
</span><span id="KiteTicker-829"><a href="#KiteTicker-829"><span class="linenos">829</span></a>                    <span class="p">}</span>
</span><span id="KiteTicker-830"><a href="#KiteTicker-830"><span class="linenos">830</span></a>
</span><span id="KiteTicker-831"><a href="#KiteTicker-831"><span class="linenos">831</span></a>                    <span class="c1"># Compile the market depth lists.</span>
</span><span id="KiteTicker-832"><a href="#KiteTicker-832"><span class="linenos">832</span></a>                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">packet</span><span class="p">),</span> <span class="mi">12</span><span class="p">)):</span>
</span><span id="KiteTicker-833"><a href="#KiteTicker-833"><span class="linenos">833</span></a>                        <span class="n">depth</span><span class="p">[</span><span class="s2">&quot;sell&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="k">else</span> <span class="s2">&quot;buy&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="KiteTicker-834"><a href="#KiteTicker-834"><span class="linenos">834</span></a>                            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">4</span><span class="p">),</span>
</span><span id="KiteTicker-835"><a href="#KiteTicker-835"><span class="linenos">835</span></a>                            <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span><span class="p">,</span>
</span><span id="KiteTicker-836"><a href="#KiteTicker-836"><span class="linenos">836</span></a>                            <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">8</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">byte_format</span><span class="o">=</span><span class="s2">&quot;H&quot;</span><span class="p">)</span>
</span><span id="KiteTicker-837"><a href="#KiteTicker-837"><span class="linenos">837</span></a>                        <span class="p">})</span>
</span><span id="KiteTicker-838"><a href="#KiteTicker-838"><span class="linenos">838</span></a>
</span><span id="KiteTicker-839"><a href="#KiteTicker-839"><span class="linenos">839</span></a>                    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">depth</span>
</span><span id="KiteTicker-840"><a href="#KiteTicker-840"><span class="linenos">840</span></a>
</span><span id="KiteTicker-841"><a href="#KiteTicker-841"><span class="linenos">841</span></a>                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span id="KiteTicker-842"><a href="#KiteTicker-842"><span class="linenos">842</span></a>
</span><span id="KiteTicker-843"><a href="#KiteTicker-843"><span class="linenos">843</span></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="KiteTicker-844"><a href="#KiteTicker-844"><span class="linenos">844</span></a>
</span><span id="KiteTicker-845"><a href="#KiteTicker-845"><span class="linenos">845</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_unpack_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bin</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">byte_format</span><span class="o">=</span><span class="s2">&quot;I&quot;</span><span class="p">):</span>
</span><span id="KiteTicker-846"><a href="#KiteTicker-846"><span class="linenos">846</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Unpack binary data as unsgined interger.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-847"><a href="#KiteTicker-847"><span class="linenos">847</span></a>        <span class="k">return</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="n">byte_format</span><span class="p">,</span> <span class="nb">bin</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="KiteTicker-848"><a href="#KiteTicker-848"><span class="linenos">848</span></a>
</span><span id="KiteTicker-849"><a href="#KiteTicker-849"><span class="linenos">849</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_split_packets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bin</span><span class="p">):</span>
</span><span id="KiteTicker-850"><a href="#KiteTicker-850"><span class="linenos">850</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Split the data to individual packets of ticks.&quot;&quot;&quot;</span>
</span><span id="KiteTicker-851"><a href="#KiteTicker-851"><span class="linenos">851</span></a>        <span class="c1"># Ignore heartbeat data.</span>
</span><span id="KiteTicker-852"><a href="#KiteTicker-852"><span class="linenos">852</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">bin</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="KiteTicker-853"><a href="#KiteTicker-853"><span class="linenos">853</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="KiteTicker-854"><a href="#KiteTicker-854"><span class="linenos">854</span></a>
</span><span id="KiteTicker-855"><a href="#KiteTicker-855"><span class="linenos">855</span></a>        <span class="n">number_of_packets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="nb">bin</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">byte_format</span><span class="o">=</span><span class="s2">&quot;H&quot;</span><span class="p">)</span>
</span><span id="KiteTicker-856"><a href="#KiteTicker-856"><span class="linenos">856</span></a>        <span class="n">packets</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteTicker-857"><a href="#KiteTicker-857"><span class="linenos">857</span></a>
</span><span id="KiteTicker-858"><a href="#KiteTicker-858"><span class="linenos">858</span></a>        <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="KiteTicker-859"><a href="#KiteTicker-859"><span class="linenos">859</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_packets</span><span class="p">):</span>
</span><span id="KiteTicker-860"><a href="#KiteTicker-860"><span class="linenos">860</span></a>            <span class="n">packet_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_int</span><span class="p">(</span><span class="nb">bin</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">byte_format</span><span class="o">=</span><span class="s2">&quot;H&quot;</span><span class="p">)</span>
</span><span id="KiteTicker-861"><a href="#KiteTicker-861"><span class="linenos">861</span></a>            <span class="n">packets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">bin</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">packet_length</span><span class="p">])</span>
</span><span id="KiteTicker-862"><a href="#KiteTicker-862"><span class="linenos">862</span></a>            <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">packet_length</span>
</span><span id="KiteTicker-863"><a href="#KiteTicker-863"><span class="linenos">863</span></a>
</span><span id="KiteTicker-864"><a href="#KiteTicker-864"><span class="linenos">864</span></a>        <span class="k">return</span> <span class="n">packets</span>
</span></pre></div>


            <div class="docstring"><p>The WebSocket client for connecting to Kite Connect's streaming quotes service.</p>

<h2 id="getting-started">Getting started:</h2>

<pre><code>#!python
import logging
from kiteconnect import KiteTicker

logging.basicConfig(level=logging.DEBUG)

# Initialise
kws = KiteTicker("your_api_key", "your_access_token")

def on_ticks(ws, ticks):
    # Callback to receive ticks.
    logging.debug("Ticks: {}".format(ticks))

def on_connect(ws, response):
    # Callback on successful connect.
    # Subscribe to a list of instrument_tokens (RELIANCE and ACC here).
    ws.subscribe([738561, 5633])

    # Set RELIANCE to tick in `full` mode.
    ws.set_mode(ws.MODE_FULL, [738561])

def on_close(ws, code, reason):
    # On connection close stop the event loop.
    # Reconnection will not happen after executing `ws.stop()`
    ws.stop()

# Assign the callbacks.
kws.on_ticks = on_ticks
kws.on_connect = on_connect
kws.on_close = on_close

# Infinite loop on the main thread. Nothing after this will run.
# You have to use the pre-defined callbacks to manage subscriptions.
kws.connect()
</code></pre>

<h2 id="callbacks">Callbacks</h2>

<p>In below examples <code><a href="#KiteTicker.ws">ws</a></code> is the currently initialised WebSocket object.</p>

<ul>
<li><code>on_ticks(ws, ticks)</code> -  Triggered when ticks are recevied.
<ul>
<li><code>ticks</code> - List of <code>tick</code> object. Check below for sample structure.</li>
</ul></li>
<li><code>on_close(ws, code, reason)</code> -  Triggered when connection is closed.
<ul>
<li><code>code</code> - WebSocket standard close event code (<a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent"><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent">https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent</a></a>)</li>
<li><code>reason</code> - DOMString indicating the reason the server closed the connection</li>
</ul></li>
<li><code>on_error(ws, code, reason)</code> -  Triggered when connection is closed with an error.
<ul>
<li><code>code</code> - WebSocket standard close event code (<a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent"><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent">https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent</a></a>)</li>
<li><code>reason</code> - DOMString indicating the reason the server closed the connection</li>
</ul></li>
<li><code><a href="#KiteTicker.on_connect">on_connect</a></code> -  Triggered when connection is established successfully.
<ul>
<li><code>response</code> - Response received from server on successful connection.</li>
</ul></li>
<li><code>on_message(ws, payload, is_binary)</code> -  Triggered when message is received from the server.
<ul>
<li><code>payload</code> - Raw response from the server (either text or binary).</li>
<li><code>is_binary</code> - Bool to check if response is binary type.</li>
</ul></li>
<li><code>on_reconnect(ws, attempts_count)</code> -  Triggered when auto reconnection is attempted.
<ul>
<li><code>attempts_count</code> - Current reconnect attempt number.</li>
</ul></li>
<li><code>on_noreconnect(ws)</code> -  Triggered when number of auto reconnection attempts exceeds <code>reconnect_tries</code>.</li>
<li><code>on_order_update(ws, data)</code> -  Triggered when there is an order update for the connected user.</li>
</ul>

<h2 id="tick-structure-passed-to-the-on_ticks-callback">Tick structure (passed to the <code><a href="#KiteTicker.on_ticks">on_ticks</a></code> callback)</h2>

<pre><code>[{
    'instrument_token': 53490439,
    'mode': 'full',
    'volume_traded': 12510,
    'last_price': 4084.0,
    'average_traded_price': 4086.55,
    'last_traded_quantity': 1,
    'total_buy_quantity': 2356
    'total_sell_quantity': 2440,
    'change': 0.46740467404674046,
    'last_trade_time': datetime.datetime(2018, 1, 15, 13, 16, 54),
    'exchange_timestamp': datetime.datetime(2018, 1, 15, 13, 16, 56),
    'oi': 21845,
    'oi_day_low': 0,
    'oi_day_high': 0,
    'ohlc': {
        'high': 4093.0,
        'close': 4065.0,
        'open': 4088.0,
        'low': 4080.0
    },
    'tradable': True,
    'depth': {
        'sell': [{
            'price': 4085.0,
            'orders': 1048576,
            'quantity': 43
        }, {
            'price': 4086.0,
            'orders': 2752512,
            'quantity': 134
        }, {
            'price': 4087.0,
            'orders': 1703936,
            'quantity': 133
        }, {
            'price': 4088.0,
            'orders': 1376256,
            'quantity': 70
        }, {
            'price': 4089.0,
            'orders': 1048576,
            'quantity': 46
        }],
        'buy': [{
            'price': 4084.0,
            'orders': 589824,
            'quantity': 53
        }, {
            'price': 4083.0,
            'orders': 1245184,
            'quantity': 145
        }, {
            'price': 4082.0,
            'orders': 1114112,
            'quantity': 63
        }, {
            'price': 4081.0,
            'orders': 1835008,
            'quantity': 69
        }, {
            'price': 4080.0,
            'orders': 2752512,
            'quantity': 89
        }]
    }
},
...,
...]
</code></pre>

<h2 id="auto-reconnection">Auto reconnection</h2>

<p>Auto reconnection is enabled by default and it can be disabled by passing <code>reconnect</code> param while initialising <code><a href="#KiteTicker">KiteTicker</a></code>.
On a side note, reconnection mechanism cannot happen if event loop is terminated using <code><a href="#KiteTicker.stop">stop</a></code> method inside <code><a href="#KiteTicker.on_close">on_close</a></code> callback.</p>

<p>Auto reonnection mechanism is based on <a href="https://en.wikipedia.org/wiki/Exponential_backoff">Exponential backoff</a> algorithm in which
next retry interval will be increased exponentially. <code>reconnect_max_delay</code> and <code>reconnect_max_tries</code> params can be used to tewak
the alogrithm where <code>reconnect_max_delay</code> is the maximum delay after which subsequent reconnection interval will become constant and
<code>reconnect_max_tries</code> is maximum number of retries before its quiting reconnection.</p>

<p>For example if <code>reconnect_max_delay</code> is 60 seconds and <code>reconnect_max_tries</code> is 50 then the first reconnection interval starts from
minimum interval which is 2 seconds and keep increasing up to 60 seconds after which it becomes constant and when reconnection attempt
is reached upto 50 then it stops reconnecting.</p>

<p>method <code><a href="#KiteTicker.stop_retry">stop_retry</a></code> can be used to stop ongoing reconnect attempts and <code><a href="#KiteTicker.on_reconnect">on_reconnect</a></code> callback will be called with current reconnect
attempt and <code><a href="#KiteTicker.on_noreconnect">on_noreconnect</a></code> is called when reconnection attempts reaches max retries.</p>
</div>


                            <div id="KiteTicker.__init__" class="classattr">
                                        <input id="KiteTicker.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">KiteTicker</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">api_key</span>,</span><span class="param">	<span class="n">access_token</span>,</span><span class="param">	<span class="n">debug</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">root</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">reconnect</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">reconnect_max_tries</span><span class="o">=</span><span class="mi">50</span>,</span><span class="param">	<span class="n">reconnect_max_delay</span><span class="o">=</span><span class="mi">60</span>,</span><span class="param">	<span class="n">connect_timeout</span><span class="o">=</span><span class="mi">30</span></span>)</span>

                <label class="view-source-button" for="KiteTicker.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.__init__-404"><a href="#KiteTicker.__init__-404"><span class="linenos">404</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">access_token</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="KiteTicker.__init__-405"><a href="#KiteTicker.__init__-405"><span class="linenos">405</span></a>                 <span class="n">reconnect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">reconnect_max_tries</span><span class="o">=</span><span class="n">RECONNECT_MAX_TRIES</span><span class="p">,</span> <span class="n">reconnect_max_delay</span><span class="o">=</span><span class="n">RECONNECT_MAX_DELAY</span><span class="p">,</span>
</span><span id="KiteTicker.__init__-406"><a href="#KiteTicker.__init__-406"><span class="linenos">406</span></a>                 <span class="n">connect_timeout</span><span class="o">=</span><span class="n">CONNECT_TIMEOUT</span><span class="p">):</span>
</span><span id="KiteTicker.__init__-407"><a href="#KiteTicker.__init__-407"><span class="linenos">407</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker.__init__-408"><a href="#KiteTicker.__init__-408"><span class="linenos">408</span></a><span class="sd">        Initialise websocket client instance.</span>
</span><span id="KiteTicker.__init__-409"><a href="#KiteTicker.__init__-409"><span class="linenos">409</span></a>
</span><span id="KiteTicker.__init__-410"><a href="#KiteTicker.__init__-410"><span class="linenos">410</span></a><span class="sd">        - `api_key` is the API key issued to you</span>
</span><span id="KiteTicker.__init__-411"><a href="#KiteTicker.__init__-411"><span class="linenos">411</span></a><span class="sd">        - `access_token` is the token obtained after the login flow in</span>
</span><span id="KiteTicker.__init__-412"><a href="#KiteTicker.__init__-412"><span class="linenos">412</span></a><span class="sd">            exchange for the `request_token`. Pre-login, this will default to None,</span>
</span><span id="KiteTicker.__init__-413"><a href="#KiteTicker.__init__-413"><span class="linenos">413</span></a><span class="sd">            but once you have obtained it, you should</span>
</span><span id="KiteTicker.__init__-414"><a href="#KiteTicker.__init__-414"><span class="linenos">414</span></a><span class="sd">            persist it in a database or session to pass</span>
</span><span id="KiteTicker.__init__-415"><a href="#KiteTicker.__init__-415"><span class="linenos">415</span></a><span class="sd">            to the Kite Connect class initialisation for subsequent requests.</span>
</span><span id="KiteTicker.__init__-416"><a href="#KiteTicker.__init__-416"><span class="linenos">416</span></a><span class="sd">        - `root` is the websocket API end point root. Unless you explicitly</span>
</span><span id="KiteTicker.__init__-417"><a href="#KiteTicker.__init__-417"><span class="linenos">417</span></a><span class="sd">            want to send API requests to a non-default endpoint, this</span>
</span><span id="KiteTicker.__init__-418"><a href="#KiteTicker.__init__-418"><span class="linenos">418</span></a><span class="sd">            can be ignored.</span>
</span><span id="KiteTicker.__init__-419"><a href="#KiteTicker.__init__-419"><span class="linenos">419</span></a><span class="sd">        - `reconnect` is a boolean to enable WebSocket autreconnect in case of network failure/disconnection.</span>
</span><span id="KiteTicker.__init__-420"><a href="#KiteTicker.__init__-420"><span class="linenos">420</span></a><span class="sd">        - `reconnect_max_delay` in seconds is the maximum delay after which subsequent reconnection interval will become constant. Defaults to 60s and minimum acceptable value is 5s.</span>
</span><span id="KiteTicker.__init__-421"><a href="#KiteTicker.__init__-421"><span class="linenos">421</span></a><span class="sd">        - `reconnect_max_tries` is maximum number reconnection attempts. Defaults to 50 attempts and maximum up to 300 attempts.</span>
</span><span id="KiteTicker.__init__-422"><a href="#KiteTicker.__init__-422"><span class="linenos">422</span></a><span class="sd">        - `connect_timeout` in seconds is the maximum interval after which connection is considered as timeout. Defaults to 30s.</span>
</span><span id="KiteTicker.__init__-423"><a href="#KiteTicker.__init__-423"><span class="linenos">423</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker.__init__-424"><a href="#KiteTicker.__init__-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_URI</span>
</span><span id="KiteTicker.__init__-425"><a href="#KiteTicker.__init__-425"><span class="linenos">425</span></a>
</span><span id="KiteTicker.__init__-426"><a href="#KiteTicker.__init__-426"><span class="linenos">426</span></a>        <span class="c1"># Set max reconnect tries</span>
</span><span id="KiteTicker.__init__-427"><a href="#KiteTicker.__init__-427"><span class="linenos">427</span></a>        <span class="k">if</span> <span class="n">reconnect_max_tries</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum_reconnect_max_tries</span><span class="p">:</span>
</span><span id="KiteTicker.__init__-428"><a href="#KiteTicker.__init__-428"><span class="linenos">428</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;`reconnect_max_tries` can not be more than </span><span class="si">{val}</span><span class="s2">. Setting to highest possible value - </span><span class="si">{val}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteTicker.__init__-429"><a href="#KiteTicker.__init__-429"><span class="linenos">429</span></a>                <span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_maximum_reconnect_max_tries</span><span class="p">))</span>
</span><span id="KiteTicker.__init__-430"><a href="#KiteTicker.__init__-430"><span class="linenos">430</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_tries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum_reconnect_max_tries</span>
</span><span id="KiteTicker.__init__-431"><a href="#KiteTicker.__init__-431"><span class="linenos">431</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker.__init__-432"><a href="#KiteTicker.__init__-432"><span class="linenos">432</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_tries</span> <span class="o">=</span> <span class="n">reconnect_max_tries</span>
</span><span id="KiteTicker.__init__-433"><a href="#KiteTicker.__init__-433"><span class="linenos">433</span></a>
</span><span id="KiteTicker.__init__-434"><a href="#KiteTicker.__init__-434"><span class="linenos">434</span></a>        <span class="c1"># Set max reconnect delay</span>
</span><span id="KiteTicker.__init__-435"><a href="#KiteTicker.__init__-435"><span class="linenos">435</span></a>        <span class="k">if</span> <span class="n">reconnect_max_delay</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum_reconnect_max_delay</span><span class="p">:</span>
</span><span id="KiteTicker.__init__-436"><a href="#KiteTicker.__init__-436"><span class="linenos">436</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;`reconnect_max_delay` can not be less than </span><span class="si">{val}</span><span class="s2">. Setting to lowest possible value - </span><span class="si">{val}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteTicker.__init__-437"><a href="#KiteTicker.__init__-437"><span class="linenos">437</span></a>                <span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_minimum_reconnect_max_delay</span><span class="p">))</span>
</span><span id="KiteTicker.__init__-438"><a href="#KiteTicker.__init__-438"><span class="linenos">438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_delay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum_reconnect_max_delay</span>
</span><span id="KiteTicker.__init__-439"><a href="#KiteTicker.__init__-439"><span class="linenos">439</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker.__init__-440"><a href="#KiteTicker.__init__-440"><span class="linenos">440</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_max_delay</span> <span class="o">=</span> <span class="n">reconnect_max_delay</span>
</span><span id="KiteTicker.__init__-441"><a href="#KiteTicker.__init__-441"><span class="linenos">441</span></a>
</span><span id="KiteTicker.__init__-442"><a href="#KiteTicker.__init__-442"><span class="linenos">442</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">connect_timeout</span>
</span><span id="KiteTicker.__init__-443"><a href="#KiteTicker.__init__-443"><span class="linenos">443</span></a>
</span><span id="KiteTicker.__init__-444"><a href="#KiteTicker.__init__-444"><span class="linenos">444</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">socket_url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{root}</span><span class="s2">?api_key=</span><span class="si">{api_key}</span><span class="s2">&quot;</span>\
</span><span id="KiteTicker.__init__-445"><a href="#KiteTicker.__init__-445"><span class="linenos">445</span></a>            <span class="s2">&quot;&amp;access_token=</span><span class="si">{access_token}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="KiteTicker.__init__-446"><a href="#KiteTicker.__init__-446"><span class="linenos">446</span></a>                <span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
</span><span id="KiteTicker.__init__-447"><a href="#KiteTicker.__init__-447"><span class="linenos">447</span></a>                <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
</span><span id="KiteTicker.__init__-448"><a href="#KiteTicker.__init__-448"><span class="linenos">448</span></a>                <span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span>
</span><span id="KiteTicker.__init__-449"><a href="#KiteTicker.__init__-449"><span class="linenos">449</span></a>            <span class="p">)</span>
</span><span id="KiteTicker.__init__-450"><a href="#KiteTicker.__init__-450"><span class="linenos">450</span></a>
</span><span id="KiteTicker.__init__-451"><a href="#KiteTicker.__init__-451"><span class="linenos">451</span></a>        <span class="c1"># Debug enables logs</span>
</span><span id="KiteTicker.__init__-452"><a href="#KiteTicker.__init__-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
</span><span id="KiteTicker.__init__-453"><a href="#KiteTicker.__init__-453"><span class="linenos">453</span></a>
</span><span id="KiteTicker.__init__-454"><a href="#KiteTicker.__init__-454"><span class="linenos">454</span></a>        <span class="c1"># Initialize default value for websocket object</span>
</span><span id="KiteTicker.__init__-455"><a href="#KiteTicker.__init__-455"><span class="linenos">455</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-456"><a href="#KiteTicker.__init__-456"><span class="linenos">456</span></a>
</span><span id="KiteTicker.__init__-457"><a href="#KiteTicker.__init__-457"><span class="linenos">457</span></a>        <span class="c1"># Placeholders for callbacks.</span>
</span><span id="KiteTicker.__init__-458"><a href="#KiteTicker.__init__-458"><span class="linenos">458</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_ticks</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-459"><a href="#KiteTicker.__init__-459"><span class="linenos">459</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-460"><a href="#KiteTicker.__init__-460"><span class="linenos">460</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_close</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-461"><a href="#KiteTicker.__init__-461"><span class="linenos">461</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_error</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-462"><a href="#KiteTicker.__init__-462"><span class="linenos">462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_connect</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-463"><a href="#KiteTicker.__init__-463"><span class="linenos">463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_message</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-464"><a href="#KiteTicker.__init__-464"><span class="linenos">464</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_reconnect</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-465"><a href="#KiteTicker.__init__-465"><span class="linenos">465</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_noreconnect</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-466"><a href="#KiteTicker.__init__-466"><span class="linenos">466</span></a>
</span><span id="KiteTicker.__init__-467"><a href="#KiteTicker.__init__-467"><span class="linenos">467</span></a>        <span class="c1"># Text message updates</span>
</span><span id="KiteTicker.__init__-468"><a href="#KiteTicker.__init__-468"><span class="linenos">468</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_order_update</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.__init__-469"><a href="#KiteTicker.__init__-469"><span class="linenos">469</span></a>
</span><span id="KiteTicker.__init__-470"><a href="#KiteTicker.__init__-470"><span class="linenos">470</span></a>        <span class="c1"># List of current subscribed tokens</span>
</span><span id="KiteTicker.__init__-471"><a href="#KiteTicker.__init__-471"><span class="linenos">471</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span> <span class="o">=</span> <span class="p">{}</span>
</span></pre></div>


            <div class="docstring"><p>Initialise websocket client instance.</p>

<ul>
<li><code>api_key</code> is the API key issued to you</li>
<li><code>access_token</code> is the token obtained after the login flow in
exchange for the <code>request_token</code>. Pre-login, this will default to None,
but once you have obtained it, you should
persist it in a database or session to pass
to the Kite Connect class initialisation for subsequent requests.</li>
<li><code><a href="#KiteTicker.root">root</a></code> is the websocket API end point root. Unless you explicitly
want to send API requests to a non-default endpoint, this
can be ignored.</li>
<li><code>reconnect</code> is a boolean to enable WebSocket autreconnect in case of network failure/disconnection.</li>
<li><code>reconnect_max_delay</code> in seconds is the maximum delay after which subsequent reconnection interval will become constant. Defaults to 60s and minimum acceptable value is 5s.</li>
<li><code>reconnect_max_tries</code> is maximum number reconnection attempts. Defaults to 50 attempts and maximum up to 300 attempts.</li>
<li><code><a href="#KiteTicker.connect_timeout">connect_timeout</a></code> in seconds is the maximum interval after which connection is considered as timeout. Defaults to 30s.</li>
</ul>
</div>


                            </div>
                            <div id="KiteTicker.EXCHANGE_MAP" class="classattr">
                                <div class="attr variable">
            <span class="name">EXCHANGE_MAP</span>        =
<input id="KiteTicker.EXCHANGE_MAP-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="KiteTicker.EXCHANGE_MAP-view-value"></label><span class="default_value">{&#39;nse&#39;: 1, &#39;nfo&#39;: 2, &#39;cds&#39;: 3, &#39;bse&#39;: 4, &#39;bfo&#39;: 5, &#39;bcd&#39;: 6, &#39;mcx&#39;: 7, &#39;mcxsx&#39;: 8, &#39;indices&#39;: 9, &#39;bsecds&#39;: 6}</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.EXCHANGE_MAP"></a>
    
    

                            </div>
                            <div id="KiteTicker.CONNECT_TIMEOUT" class="classattr">
                                <div class="attr variable">
            <span class="name">CONNECT_TIMEOUT</span>        =
<span class="default_value">30</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.CONNECT_TIMEOUT"></a>
    
    

                            </div>
                            <div id="KiteTicker.RECONNECT_MAX_DELAY" class="classattr">
                                <div class="attr variable">
            <span class="name">RECONNECT_MAX_DELAY</span>        =
<span class="default_value">60</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.RECONNECT_MAX_DELAY"></a>
    
    

                            </div>
                            <div id="KiteTicker.RECONNECT_MAX_TRIES" class="classattr">
                                <div class="attr variable">
            <span class="name">RECONNECT_MAX_TRIES</span>        =
<span class="default_value">50</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.RECONNECT_MAX_TRIES"></a>
    
    

                            </div>
                            <div id="KiteTicker.ROOT_URI" class="classattr">
                                <div class="attr variable">
            <span class="name">ROOT_URI</span>        =
<span class="default_value">&#39;wss://ws.kite.trade&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.ROOT_URI"></a>
    
    

                            </div>
                            <div id="KiteTicker.MODE_FULL" class="classattr">
                                <div class="attr variable">
            <span class="name">MODE_FULL</span>        =
<span class="default_value">&#39;full&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.MODE_FULL"></a>
    
    

                            </div>
                            <div id="KiteTicker.MODE_QUOTE" class="classattr">
                                <div class="attr variable">
            <span class="name">MODE_QUOTE</span>        =
<span class="default_value">&#39;quote&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.MODE_QUOTE"></a>
    
    

                            </div>
                            <div id="KiteTicker.MODE_LTP" class="classattr">
                                <div class="attr variable">
            <span class="name">MODE_LTP</span>        =
<span class="default_value">&#39;ltp&#39;</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.MODE_LTP"></a>
    
    

                            </div>
                            <div id="KiteTicker.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.root"></a>
    
    

                            </div>
                            <div id="KiteTicker.connect_timeout" class="classattr">
                                <div class="attr variable">
            <span class="name">connect_timeout</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.connect_timeout"></a>
    
    

                            </div>
                            <div id="KiteTicker.socket_url" class="classattr">
                                <div class="attr variable">
            <span class="name">socket_url</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.socket_url"></a>
    
    

                            </div>
                            <div id="KiteTicker.debug" class="classattr">
                                <div class="attr variable">
            <span class="name">debug</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.debug"></a>
    
    

                            </div>
                            <div id="KiteTicker.ws" class="classattr">
                                <div class="attr variable">
            <span class="name">ws</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.ws"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_ticks" class="classattr">
                                <div class="attr variable">
            <span class="name">on_ticks</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_ticks"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_open" class="classattr">
                                <div class="attr variable">
            <span class="name">on_open</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_open"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_close" class="classattr">
                                <div class="attr variable">
            <span class="name">on_close</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_close"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_error" class="classattr">
                                <div class="attr variable">
            <span class="name">on_error</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_error"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_connect" class="classattr">
                                <div class="attr variable">
            <span class="name">on_connect</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_connect"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_message" class="classattr">
                                <div class="attr variable">
            <span class="name">on_message</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_message"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_reconnect" class="classattr">
                                <div class="attr variable">
            <span class="name">on_reconnect</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_reconnect"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_noreconnect" class="classattr">
                                <div class="attr variable">
            <span class="name">on_noreconnect</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_noreconnect"></a>
    
    

                            </div>
                            <div id="KiteTicker.on_order_update" class="classattr">
                                <div class="attr variable">
            <span class="name">on_order_update</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.on_order_update"></a>
    
    

                            </div>
                            <div id="KiteTicker.subscribed_tokens" class="classattr">
                                <div class="attr variable">
            <span class="name">subscribed_tokens</span>

        
    </div>
    <a class="headerlink" href="#KiteTicker.subscribed_tokens"></a>
    
    

                            </div>
                            <div id="KiteTicker.connect" class="classattr">
                                        <input id="KiteTicker.connect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">connect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">threaded</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">disable_ssl_verification</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.connect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.connect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.connect-497"><a href="#KiteTicker.connect-497"><span class="linenos">497</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">disable_ssl_verification</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteTicker.connect-498"><a href="#KiteTicker.connect-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker.connect-499"><a href="#KiteTicker.connect-499"><span class="linenos">499</span></a><span class="sd">        Establish a websocket connection.</span>
</span><span id="KiteTicker.connect-500"><a href="#KiteTicker.connect-500"><span class="linenos">500</span></a>
</span><span id="KiteTicker.connect-501"><a href="#KiteTicker.connect-501"><span class="linenos">501</span></a><span class="sd">        - `threaded` is a boolean indicating if the websocket client has to be run in threaded mode or not</span>
</span><span id="KiteTicker.connect-502"><a href="#KiteTicker.connect-502"><span class="linenos">502</span></a><span class="sd">        - `disable_ssl_verification` disables building ssl context</span>
</span><span id="KiteTicker.connect-503"><a href="#KiteTicker.connect-503"><span class="linenos">503</span></a><span class="sd">        - `proxy` is a dictionary with keys `host` and `port` which denotes the proxy settings</span>
</span><span id="KiteTicker.connect-504"><a href="#KiteTicker.connect-504"><span class="linenos">504</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker.connect-505"><a href="#KiteTicker.connect-505"><span class="linenos">505</span></a>        <span class="c1"># Custom headers</span>
</span><span id="KiteTicker.connect-506"><a href="#KiteTicker.connect-506"><span class="linenos">506</span></a>        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="KiteTicker.connect-507"><a href="#KiteTicker.connect-507"><span class="linenos">507</span></a>            <span class="s2">&quot;X-Kite-Version&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>  <span class="c1"># For version 3</span>
</span><span id="KiteTicker.connect-508"><a href="#KiteTicker.connect-508"><span class="linenos">508</span></a>        <span class="p">}</span>
</span><span id="KiteTicker.connect-509"><a href="#KiteTicker.connect-509"><span class="linenos">509</span></a>
</span><span id="KiteTicker.connect-510"><a href="#KiteTicker.connect-510"><span class="linenos">510</span></a>        <span class="c1"># Init WebSocket client factory</span>
</span><span id="KiteTicker.connect-511"><a href="#KiteTicker.connect-511"><span class="linenos">511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_create_connection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">socket_url</span><span class="p">,</span>
</span><span id="KiteTicker.connect-512"><a href="#KiteTicker.connect-512"><span class="linenos">512</span></a>                                <span class="n">useragent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_agent</span><span class="p">(),</span>
</span><span id="KiteTicker.connect-513"><a href="#KiteTicker.connect-513"><span class="linenos">513</span></a>                                <span class="n">proxy</span><span class="o">=</span><span class="n">proxy</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</span><span id="KiteTicker.connect-514"><a href="#KiteTicker.connect-514"><span class="linenos">514</span></a>
</span><span id="KiteTicker.connect-515"><a href="#KiteTicker.connect-515"><span class="linenos">515</span></a>        <span class="c1"># Set SSL context</span>
</span><span id="KiteTicker.connect-516"><a href="#KiteTicker.connect-516"><span class="linenos">516</span></a>        <span class="n">context_factory</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="KiteTicker.connect-517"><a href="#KiteTicker.connect-517"><span class="linenos">517</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">isSecure</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">disable_ssl_verification</span><span class="p">:</span>
</span><span id="KiteTicker.connect-518"><a href="#KiteTicker.connect-518"><span class="linenos">518</span></a>            <span class="n">context_factory</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">ClientContextFactory</span><span class="p">()</span>
</span><span id="KiteTicker.connect-519"><a href="#KiteTicker.connect-519"><span class="linenos">519</span></a>
</span><span id="KiteTicker.connect-520"><a href="#KiteTicker.connect-520"><span class="linenos">520</span></a>        <span class="c1"># Establish WebSocket connection to a server</span>
</span><span id="KiteTicker.connect-521"><a href="#KiteTicker.connect-521"><span class="linenos">521</span></a>        <span class="n">connectWS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="p">,</span> <span class="n">contextFactory</span><span class="o">=</span><span class="n">context_factory</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span><span class="p">)</span>
</span><span id="KiteTicker.connect-522"><a href="#KiteTicker.connect-522"><span class="linenos">522</span></a>
</span><span id="KiteTicker.connect-523"><a href="#KiteTicker.connect-523"><span class="linenos">523</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="KiteTicker.connect-524"><a href="#KiteTicker.connect-524"><span class="linenos">524</span></a>            <span class="n">twisted_log</span><span class="o">.</span><span class="n">startLogging</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span id="KiteTicker.connect-525"><a href="#KiteTicker.connect-525"><span class="linenos">525</span></a>
</span><span id="KiteTicker.connect-526"><a href="#KiteTicker.connect-526"><span class="linenos">526</span></a>        <span class="c1"># Run in seperate thread of blocking</span>
</span><span id="KiteTicker.connect-527"><a href="#KiteTicker.connect-527"><span class="linenos">527</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="KiteTicker.connect-528"><a href="#KiteTicker.connect-528"><span class="linenos">528</span></a>
</span><span id="KiteTicker.connect-529"><a href="#KiteTicker.connect-529"><span class="linenos">529</span></a>        <span class="c1"># Run when reactor is not running</span>
</span><span id="KiteTicker.connect-530"><a href="#KiteTicker.connect-530"><span class="linenos">530</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reactor</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
</span><span id="KiteTicker.connect-531"><a href="#KiteTicker.connect-531"><span class="linenos">531</span></a>            <span class="k">if</span> <span class="n">threaded</span><span class="p">:</span>
</span><span id="KiteTicker.connect-532"><a href="#KiteTicker.connect-532"><span class="linenos">532</span></a>                <span class="c1"># Signals are not allowed in non main thread by twisted so suppress it.</span>
</span><span id="KiteTicker.connect-533"><a href="#KiteTicker.connect-533"><span class="linenos">533</span></a>                <span class="n">opts</span><span class="p">[</span><span class="s2">&quot;installSignalHandlers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="KiteTicker.connect-534"><a href="#KiteTicker.connect-534"><span class="linenos">534</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">websocket_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">reactor</span><span class="o">.</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">opts</span><span class="p">)</span>
</span><span id="KiteTicker.connect-535"><a href="#KiteTicker.connect-535"><span class="linenos">535</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">websocket_thread</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="KiteTicker.connect-536"><a href="#KiteTicker.connect-536"><span class="linenos">536</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">websocket_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="KiteTicker.connect-537"><a href="#KiteTicker.connect-537"><span class="linenos">537</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker.connect-538"><a href="#KiteTicker.connect-538"><span class="linenos">538</span></a>                <span class="n">reactor</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Establish a websocket connection.</p>

<ul>
<li><code>threaded</code> is a boolean indicating if the websocket client has to be run in threaded mode or not</li>
<li><code>disable_ssl_verification</code> disables building ssl context</li>
<li><code>proxy</code> is a dictionary with keys <code>host</code> and <code>port</code> which denotes the proxy settings</li>
</ul>
</div>


                            </div>
                            <div id="KiteTicker.is_connected" class="classattr">
                                        <input id="KiteTicker.is_connected-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_connected</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.is_connected-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.is_connected"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.is_connected-540"><a href="#KiteTicker.is_connected-540"><span class="linenos">540</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker.is_connected-541"><a href="#KiteTicker.is_connected-541"><span class="linenos">541</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if WebSocket connection is established.&quot;&quot;&quot;</span>
</span><span id="KiteTicker.is_connected-542"><a href="#KiteTicker.is_connected-542"><span class="linenos">542</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">STATE_OPEN</span><span class="p">:</span>
</span><span id="KiteTicker.is_connected-543"><a href="#KiteTicker.is_connected-543"><span class="linenos">543</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker.is_connected-544"><a href="#KiteTicker.is_connected-544"><span class="linenos">544</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="KiteTicker.is_connected-545"><a href="#KiteTicker.is_connected-545"><span class="linenos">545</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if WebSocket connection is established.</p>
</div>


                            </div>
                            <div id="KiteTicker.close" class="classattr">
                                        <input id="KiteTicker.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">code</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">reason</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.close-552"><a href="#KiteTicker.close-552"><span class="linenos">552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="KiteTicker.close-553"><a href="#KiteTicker.close-553"><span class="linenos">553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the WebSocket connection.&quot;&quot;&quot;</span>
</span><span id="KiteTicker.close-554"><a href="#KiteTicker.close-554"><span class="linenos">554</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_retry</span><span class="p">()</span>
</span><span id="KiteTicker.close-555"><a href="#KiteTicker.close-555"><span class="linenos">555</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Close the WebSocket connection.</p>
</div>


                            </div>
                            <div id="KiteTicker.stop" class="classattr">
                                        <input id="KiteTicker.stop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stop</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.stop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.stop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.stop-557"><a href="#KiteTicker.stop-557"><span class="linenos">557</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker.stop-558"><a href="#KiteTicker.stop-558"><span class="linenos">558</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the event loop. Should be used if main thread has to be closed in `on_close` method.</span>
</span><span id="KiteTicker.stop-559"><a href="#KiteTicker.stop-559"><span class="linenos">559</span></a><span class="sd">        Reconnection mechanism cannot happen past this method</span>
</span><span id="KiteTicker.stop-560"><a href="#KiteTicker.stop-560"><span class="linenos">560</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker.stop-561"><a href="#KiteTicker.stop-561"><span class="linenos">561</span></a>        <span class="n">reactor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Stop the event loop. Should be used if main thread has to be closed in <code><a href="#KiteTicker.on_close">on_close</a></code> method.
Reconnection mechanism cannot happen past this method</p>
</div>


                            </div>
                            <div id="KiteTicker.stop_retry" class="classattr">
                                        <input id="KiteTicker.stop_retry-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stop_retry</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.stop_retry-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.stop_retry"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.stop_retry-563"><a href="#KiteTicker.stop_retry-563"><span class="linenos">563</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stop_retry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker.stop_retry-564"><a href="#KiteTicker.stop_retry-564"><span class="linenos">564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop auto retry when it is in progress.&quot;&quot;&quot;</span>
</span><span id="KiteTicker.stop_retry-565"><a href="#KiteTicker.stop_retry-565"><span class="linenos">565</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="p">:</span>
</span><span id="KiteTicker.stop_retry-566"><a href="#KiteTicker.stop_retry-566"><span class="linenos">566</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">factory</span><span class="o">.</span><span class="n">stopTrying</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Stop auto retry when it is in progress.</p>
</div>


                            </div>
                            <div id="KiteTicker.subscribe" class="classattr">
                                        <input id="KiteTicker.subscribe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">subscribe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">instrument_tokens</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.subscribe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.subscribe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.subscribe-568"><a href="#KiteTicker.subscribe-568"><span class="linenos">568</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">):</span>
</span><span id="KiteTicker.subscribe-569"><a href="#KiteTicker.subscribe-569"><span class="linenos">569</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker.subscribe-570"><a href="#KiteTicker.subscribe-570"><span class="linenos">570</span></a><span class="sd">        Subscribe to a list of instrument_tokens.</span>
</span><span id="KiteTicker.subscribe-571"><a href="#KiteTicker.subscribe-571"><span class="linenos">571</span></a>
</span><span id="KiteTicker.subscribe-572"><a href="#KiteTicker.subscribe-572"><span class="linenos">572</span></a><span class="sd">        - `instrument_tokens` is list of instrument instrument_tokens to subscribe</span>
</span><span id="KiteTicker.subscribe-573"><a href="#KiteTicker.subscribe-573"><span class="linenos">573</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker.subscribe-574"><a href="#KiteTicker.subscribe-574"><span class="linenos">574</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker.subscribe-575"><a href="#KiteTicker.subscribe-575"><span class="linenos">575</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">(</span>
</span><span id="KiteTicker.subscribe-576"><a href="#KiteTicker.subscribe-576"><span class="linenos">576</span></a>                <span class="n">six</span><span class="o">.</span><span class="n">b</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_subscribe</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span> <span class="n">instrument_tokens</span><span class="p">}))</span>
</span><span id="KiteTicker.subscribe-577"><a href="#KiteTicker.subscribe-577"><span class="linenos">577</span></a>            <span class="p">)</span>
</span><span id="KiteTicker.subscribe-578"><a href="#KiteTicker.subscribe-578"><span class="linenos">578</span></a>
</span><span id="KiteTicker.subscribe-579"><a href="#KiteTicker.subscribe-579"><span class="linenos">579</span></a>            <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">instrument_tokens</span><span class="p">:</span>
</span><span id="KiteTicker.subscribe-580"><a href="#KiteTicker.subscribe-580"><span class="linenos">580</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODE_QUOTE</span>
</span><span id="KiteTicker.subscribe-581"><a href="#KiteTicker.subscribe-581"><span class="linenos">581</span></a>
</span><span id="KiteTicker.subscribe-582"><a href="#KiteTicker.subscribe-582"><span class="linenos">582</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker.subscribe-583"><a href="#KiteTicker.subscribe-583"><span class="linenos">583</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="KiteTicker.subscribe-584"><a href="#KiteTicker.subscribe-584"><span class="linenos">584</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Error while subscribe: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</span><span id="KiteTicker.subscribe-585"><a href="#KiteTicker.subscribe-585"><span class="linenos">585</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Subscribe to a list of instrument_tokens.</p>

<ul>
<li><code>instrument_tokens</code> is list of instrument instrument_tokens to subscribe</li>
</ul>
</div>


                            </div>
                            <div id="KiteTicker.unsubscribe" class="classattr">
                                        <input id="KiteTicker.unsubscribe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unsubscribe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">instrument_tokens</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.unsubscribe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.unsubscribe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.unsubscribe-587"><a href="#KiteTicker.unsubscribe-587"><span class="linenos">587</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">unsubscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">):</span>
</span><span id="KiteTicker.unsubscribe-588"><a href="#KiteTicker.unsubscribe-588"><span class="linenos">588</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker.unsubscribe-589"><a href="#KiteTicker.unsubscribe-589"><span class="linenos">589</span></a><span class="sd">        Unsubscribe the given list of instrument_tokens.</span>
</span><span id="KiteTicker.unsubscribe-590"><a href="#KiteTicker.unsubscribe-590"><span class="linenos">590</span></a>
</span><span id="KiteTicker.unsubscribe-591"><a href="#KiteTicker.unsubscribe-591"><span class="linenos">591</span></a><span class="sd">        - `instrument_tokens` is list of instrument_tokens to unsubscribe.</span>
</span><span id="KiteTicker.unsubscribe-592"><a href="#KiteTicker.unsubscribe-592"><span class="linenos">592</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker.unsubscribe-593"><a href="#KiteTicker.unsubscribe-593"><span class="linenos">593</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker.unsubscribe-594"><a href="#KiteTicker.unsubscribe-594"><span class="linenos">594</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">(</span>
</span><span id="KiteTicker.unsubscribe-595"><a href="#KiteTicker.unsubscribe-595"><span class="linenos">595</span></a>                <span class="n">six</span><span class="o">.</span><span class="n">b</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_unsubscribe</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span> <span class="n">instrument_tokens</span><span class="p">}))</span>
</span><span id="KiteTicker.unsubscribe-596"><a href="#KiteTicker.unsubscribe-596"><span class="linenos">596</span></a>            <span class="p">)</span>
</span><span id="KiteTicker.unsubscribe-597"><a href="#KiteTicker.unsubscribe-597"><span class="linenos">597</span></a>
</span><span id="KiteTicker.unsubscribe-598"><a href="#KiteTicker.unsubscribe-598"><span class="linenos">598</span></a>            <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">instrument_tokens</span><span class="p">:</span>
</span><span id="KiteTicker.unsubscribe-599"><a href="#KiteTicker.unsubscribe-599"><span class="linenos">599</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker.unsubscribe-600"><a href="#KiteTicker.unsubscribe-600"><span class="linenos">600</span></a>                    <span class="k">del</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">])</span>
</span><span id="KiteTicker.unsubscribe-601"><a href="#KiteTicker.unsubscribe-601"><span class="linenos">601</span></a>                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="KiteTicker.unsubscribe-602"><a href="#KiteTicker.unsubscribe-602"><span class="linenos">602</span></a>                    <span class="k">pass</span>
</span><span id="KiteTicker.unsubscribe-603"><a href="#KiteTicker.unsubscribe-603"><span class="linenos">603</span></a>
</span><span id="KiteTicker.unsubscribe-604"><a href="#KiteTicker.unsubscribe-604"><span class="linenos">604</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker.unsubscribe-605"><a href="#KiteTicker.unsubscribe-605"><span class="linenos">605</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="KiteTicker.unsubscribe-606"><a href="#KiteTicker.unsubscribe-606"><span class="linenos">606</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Error while unsubscribe: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</span><span id="KiteTicker.unsubscribe-607"><a href="#KiteTicker.unsubscribe-607"><span class="linenos">607</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Unsubscribe the given list of instrument_tokens.</p>

<ul>
<li><code>instrument_tokens</code> is list of instrument_tokens to unsubscribe.</li>
</ul>
</div>


                            </div>
                            <div id="KiteTicker.set_mode" class="classattr">
                                        <input id="KiteTicker.set_mode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_mode</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span>, </span><span class="param"><span class="n">instrument_tokens</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.set_mode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.set_mode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.set_mode-609"><a href="#KiteTicker.set_mode-609"><span class="linenos">609</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">):</span>
</span><span id="KiteTicker.set_mode-610"><a href="#KiteTicker.set_mode-610"><span class="linenos">610</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KiteTicker.set_mode-611"><a href="#KiteTicker.set_mode-611"><span class="linenos">611</span></a><span class="sd">        Set streaming mode for the given list of tokens.</span>
</span><span id="KiteTicker.set_mode-612"><a href="#KiteTicker.set_mode-612"><span class="linenos">612</span></a>
</span><span id="KiteTicker.set_mode-613"><a href="#KiteTicker.set_mode-613"><span class="linenos">613</span></a><span class="sd">        - `mode` is the mode to set. It can be one of the following class constants:</span>
</span><span id="KiteTicker.set_mode-614"><a href="#KiteTicker.set_mode-614"><span class="linenos">614</span></a><span class="sd">            MODE_LTP, MODE_QUOTE, or MODE_FULL.</span>
</span><span id="KiteTicker.set_mode-615"><a href="#KiteTicker.set_mode-615"><span class="linenos">615</span></a><span class="sd">        - `instrument_tokens` is list of instrument tokens on which the mode should be applied</span>
</span><span id="KiteTicker.set_mode-616"><a href="#KiteTicker.set_mode-616"><span class="linenos">616</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KiteTicker.set_mode-617"><a href="#KiteTicker.set_mode-617"><span class="linenos">617</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="KiteTicker.set_mode-618"><a href="#KiteTicker.set_mode-618"><span class="linenos">618</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">(</span>
</span><span id="KiteTicker.set_mode-619"><a href="#KiteTicker.set_mode-619"><span class="linenos">619</span></a>                <span class="n">six</span><span class="o">.</span><span class="n">b</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_setmode</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">mode</span><span class="p">,</span> <span class="n">instrument_tokens</span><span class="p">]}))</span>
</span><span id="KiteTicker.set_mode-620"><a href="#KiteTicker.set_mode-620"><span class="linenos">620</span></a>            <span class="p">)</span>
</span><span id="KiteTicker.set_mode-621"><a href="#KiteTicker.set_mode-621"><span class="linenos">621</span></a>
</span><span id="KiteTicker.set_mode-622"><a href="#KiteTicker.set_mode-622"><span class="linenos">622</span></a>            <span class="c1"># Update modes</span>
</span><span id="KiteTicker.set_mode-623"><a href="#KiteTicker.set_mode-623"><span class="linenos">623</span></a>            <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">instrument_tokens</span><span class="p">:</span>
</span><span id="KiteTicker.set_mode-624"><a href="#KiteTicker.set_mode-624"><span class="linenos">624</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">]</span> <span class="o">=</span> <span class="n">mode</span>
</span><span id="KiteTicker.set_mode-625"><a href="#KiteTicker.set_mode-625"><span class="linenos">625</span></a>
</span><span id="KiteTicker.set_mode-626"><a href="#KiteTicker.set_mode-626"><span class="linenos">626</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="KiteTicker.set_mode-627"><a href="#KiteTicker.set_mode-627"><span class="linenos">627</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="KiteTicker.set_mode-628"><a href="#KiteTicker.set_mode-628"><span class="linenos">628</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Error while setting mode: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</span><span id="KiteTicker.set_mode-629"><a href="#KiteTicker.set_mode-629"><span class="linenos">629</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Set streaming mode for the given list of tokens.</p>

<ul>
<li><code>mode</code> is the mode to set. It can be one of the following class constants:
MODE_LTP, MODE_QUOTE, or MODE_FULL.</li>
<li><code>instrument_tokens</code> is list of instrument tokens on which the mode should be applied</li>
</ul>
</div>


                            </div>
                            <div id="KiteTicker.resubscribe" class="classattr">
                                        <input id="KiteTicker.resubscribe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">resubscribe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KiteTicker.resubscribe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KiteTicker.resubscribe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KiteTicker.resubscribe-631"><a href="#KiteTicker.resubscribe-631"><span class="linenos">631</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resubscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KiteTicker.resubscribe-632"><a href="#KiteTicker.resubscribe-632"><span class="linenos">632</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Resubscribe to all current subscribed tokens.&quot;&quot;&quot;</span>
</span><span id="KiteTicker.resubscribe-633"><a href="#KiteTicker.resubscribe-633"><span class="linenos">633</span></a>        <span class="n">modes</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="KiteTicker.resubscribe-634"><a href="#KiteTicker.resubscribe-634"><span class="linenos">634</span></a>
</span><span id="KiteTicker.resubscribe-635"><a href="#KiteTicker.resubscribe-635"><span class="linenos">635</span></a>        <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">:</span>
</span><span id="KiteTicker.resubscribe-636"><a href="#KiteTicker.resubscribe-636"><span class="linenos">636</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subscribed_tokens</span><span class="p">[</span><span class="n">token</span><span class="p">]</span>
</span><span id="KiteTicker.resubscribe-637"><a href="#KiteTicker.resubscribe-637"><span class="linenos">637</span></a>
</span><span id="KiteTicker.resubscribe-638"><a href="#KiteTicker.resubscribe-638"><span class="linenos">638</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">modes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="KiteTicker.resubscribe-639"><a href="#KiteTicker.resubscribe-639"><span class="linenos">639</span></a>                <span class="n">modes</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="KiteTicker.resubscribe-640"><a href="#KiteTicker.resubscribe-640"><span class="linenos">640</span></a>
</span><span id="KiteTicker.resubscribe-641"><a href="#KiteTicker.resubscribe-641"><span class="linenos">641</span></a>            <span class="n">modes</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</span><span id="KiteTicker.resubscribe-642"><a href="#KiteTicker.resubscribe-642"><span class="linenos">642</span></a>
</span><span id="KiteTicker.resubscribe-643"><a href="#KiteTicker.resubscribe-643"><span class="linenos">643</span></a>        <span class="k">for</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">modes</span><span class="p">:</span>
</span><span id="KiteTicker.resubscribe-644"><a href="#KiteTicker.resubscribe-644"><span class="linenos">644</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="KiteTicker.resubscribe-645"><a href="#KiteTicker.resubscribe-645"><span class="linenos">645</span></a>                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Resubscribe and set mode: </span><span class="si">{}</span><span class="s2"> - </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">modes</span><span class="p">[</span><span class="n">mode</span><span class="p">]))</span>
</span><span id="KiteTicker.resubscribe-646"><a href="#KiteTicker.resubscribe-646"><span class="linenos">646</span></a>
</span><span id="KiteTicker.resubscribe-647"><a href="#KiteTicker.resubscribe-647"><span class="linenos">647</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">modes</span><span class="p">[</span><span class="n">mode</span><span class="p">])</span>
</span><span id="KiteTicker.resubscribe-648"><a href="#KiteTicker.resubscribe-648"><span class="linenos">648</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">modes</span><span class="p">[</span><span class="n">mode</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Resubscribe to all current subscribed tokens.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>